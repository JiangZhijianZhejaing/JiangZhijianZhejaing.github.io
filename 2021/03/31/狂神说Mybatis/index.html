<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="AI Jiang"><meta name="copyright" content="AI Jiang"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>狂神说Mybatis | Hexo</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.24/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="shortcut icon" type="image/svg+xml" href="/imgaes/avatar.jpg"><link rel="mask-icon" href="/imgaes/avatar.jpg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"example.com","root":"/","title":"AI.Jiang的笔记","version":"1.5.1","mode":"auto","copycode":true,"page":{"isPost":true},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><meta name="description" content="MyBatis  1、简介  1.1 什么是Mybatis 文档：https:&#x2F;&#x2F;mybatis.org&#x2F;mybatis-3&#x2F;zh&#x2F;getting-started.html   MyBatis 是一款优秀的持久层框架; 它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以通过简单的 XML 或注解来配置和">
<meta property="og:type" content="article">
<meta property="og:title" content="狂神说Mybatis">
<meta property="og:url" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="MyBatis  1、简介  1.1 什么是Mybatis 文档：https:&#x2F;&#x2F;mybatis.org&#x2F;mybatis-3&#x2F;zh&#x2F;getting-started.html   MyBatis 是一款优秀的持久层框架; 它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以通过简单的 XML 或注解来配置和">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316463790.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130065018788.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130073513622.png">
<meta property="og:image" content="http://example.com/2021/code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210130073808571.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130082844552.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210216184706121.png">
<meta property="og:image" content="http://example.com/2021/code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/%25E5%2585%25A8%25E7%25AB%2599%25E5%25AD%25A6%25E4%25B9%25A0/images/image-20210216184732399.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130083326102.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130084330363.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130084734034.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130191757881.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130182528886.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130093828361.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130094734702.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130204407763.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130205822111.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316474822.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201101013162.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131080434752.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164809990.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164833872.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164845962.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164853569.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164901861.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131190533613.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131085254136.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164920502.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316493391.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131111116459.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131105737594.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164958936.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165014965.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183548383.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183530203.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183706828.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131184602709.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165030775.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165052167.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201092409036.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201095703748.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201102700086.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201102904377.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201165126553.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201165141410.png">
<meta property="og:image" content="http://example.com/2021/code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210201180634989.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201205757272.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201212654522.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210202064249303.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165129955.png">
<meta property="og:image" content="http://example.com/2021/code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210202074029457.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210202074223968.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013095849984.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013093137919.png">
<meta property="og:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013093206643.png">
<meta property="article:published_time" content="2021-03-31T02:58:10.000Z">
<meta property="article:modified_time" content="2021-04-02T07:19:33.686Z">
<meta property="article:author" content="AI Jiang">
<meta property="article:tag" content="后端学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316463790.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="AI Jiang"><img width="96" loading="lazy" src="/Yun.png" alt="AI Jiang"></a><div class="site-author-name"><a href="/about/">AI Jiang</a></div><a class="site-name" href="/about/site.html">Hexo</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">19</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">7</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">7</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://qm.qq.com/cgi-bin/qm/qr?k=epvxdq1sknJe9JMj6J1LsBw4a6cI_2ln&amp;jump_from=webapi" title="QQ 群 389401003" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/JiangZhijianZhejaing" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/jizhideyunyoujun" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/yunyoujun/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=247102977" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/yunyoujun/" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/1579790" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/YunYouJun" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/elpsycn" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#mybatis"><span class="toc-number">1.</span> <span class="toc-text"> MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text"> 1、简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E4%BB%80%E4%B9%88%E6%98%AFmybatis"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 1.1 什么是Mybatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 1.2 持久化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 1.3 持久层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81mybatis"><span class="toc-number">1.1.4.</span> <span class="toc-text"> 1.4 为什么需要MyBatis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%AC%AC%E4%B8%80%E4%B8%AAmybatis%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text"> 2、第一个Mybatis程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 2.1 搭建环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%A8%A1%E5%9D%97"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 2.2 创建一个模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 2.3 编写代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 2.4测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.5.</span> <span class="toc-text"> 2.5可能会遇到的问题：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#maven%E5%AF%BC%E5%87%BA%E8%B5%84%E6%BA%90%E9%97%AE%E9%A2%98pom%E6%96%87%E4%BB%B6%E4%B8%AD%E6%89%A7%E8%A1%8C"><span class="toc-number">1.2.5.1.</span> <span class="toc-text"> Maven导出资源问题.pom文件中执行</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-curd"><span class="toc-number">1.3.</span> <span class="toc-text"> 3、CURD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-namespace"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 1. namespace</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-select"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 2. select</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E7%BC%96%E5%86%99%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.3.2.0.1.</span> <span class="toc-text"> 1.编写接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E7%BC%96%E5%86%99%E5%AF%B9%E5%BA%94%E7%9A%84mapper%E4%B8%AD%E7%9A%84sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.2.0.2.</span> <span class="toc-text"> 2.编写对应的mapper中的sql语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.2.0.3.</span> <span class="toc-text"> 3.测试</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E5%A2%9E%E5%88%A0%E6%94%B9%E4%B8%80%E5%AE%9A%E8%A6%81%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.3.2.1.</span> <span class="toc-text"> 注意：增删改一定要提交事务：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-update%E8%BF%94%E5%9B%9E%E9%83%BD%E6%98%AFint"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 3. update(返回都是int)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-insert"><span class="toc-number">1.3.4.</span> <span class="toc-text"> 4. Insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-delete"><span class="toc-number">1.3.5.</span> <span class="toc-text"> 5. Delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%B8%87%E8%83%BDmap"><span class="toc-number">1.3.6.</span> <span class="toc-text"> 6. 万能Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.7.</span> <span class="toc-text"> 7. 模糊查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE%E8%A7%A3%E6%9E%90"><span class="toc-number">1.4.</span> <span class="toc-text"> 4、配置解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 1. 核心配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-environments"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 2. 环境配置 environments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B1%9E%E6%80%A7-properties"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 3. 属性 properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D-typealiases"><span class="toc-number">1.4.4.</span> <span class="toc-text"> 4. 类型别名 typeAliases</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%AE%BE%E7%BD%AE-settings"><span class="toc-number">1.4.5.</span> <span class="toc-text"> 5. 设置 Settings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%85%B6%E4%BB%96%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.6.</span> <span class="toc-text"> 6. 其他配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%98%A0%E5%B0%84%E5%99%A8-mappers"><span class="toc-number">1.4.7.</span> <span class="toc-text"> 7. 映射器 mappers</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8class%E5%92%8Cpackage%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">1.4.7.1.</span> <span class="toc-text"> 使用class和package的注意点：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.4.8.</span> <span class="toc-text"> 8. 作用域和生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E8%A7%A3%E5%86%B3%E5%B1%9E%E6%80%A7%E5%90%8D%E5%92%8C%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.</span> <span class="toc-text"> 5、解决属性名和字段名不一致的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%97%AE%E9%A2%98"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 1. 问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.1.1.</span> <span class="toc-text"> 解决方法：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-resultmap"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 2. resultMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%97%A5%E5%BF%97"><span class="toc-number">1.6.</span> <span class="toc-text"> 6、日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-%E6%97%A5%E5%BF%97%E5%B7%A5%E5%8E%82"><span class="toc-number">1.6.1.</span> <span class="toc-text"> 6.1 日志工厂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E6%97%A5%E5%BF%97%E5%B7%A5%E5%8E%82"><span class="toc-number">1.6.2.</span> <span class="toc-text"> 标准日志工厂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-log4j"><span class="toc-number">1.6.3.</span> <span class="toc-text"> 6.2 Log4j</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#63log4j%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">1.6.4.</span> <span class="toc-text"> 6.3Log4j简单使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.</span> <span class="toc-text"> 7、分页</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#71-%E4%BD%BF%E7%94%A8limit%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.1.</span> <span class="toc-text"> 7.1 使用Limit分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#72-rowbounds%E5%88%86%E9%A1%B5"><span class="toc-number">1.7.2.</span> <span class="toc-text"> 7.2 RowBounds分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#73-%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">1.7.3.</span> <span class="toc-text"> 7.3 分页插件、</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91-05"><span class="toc-number">1.8.</span> <span class="toc-text"> 8、使用注解开发（-05）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#81-%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.8.1.</span> <span class="toc-text"> 8.1 面向接口开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#82-%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91"><span class="toc-number">1.8.2.</span> <span class="toc-text"> 8.2 使用注解开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis%E8%AF%A6%E7%BB%86%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E9%87%8D%E8%A6%81"><span class="toc-number">1.8.3.</span> <span class="toc-text"> MyBatis详细执行流程（重要）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#83-%E6%B3%A8%E8%A7%A3curd%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="toc-number">1.8.4.</span> <span class="toc-text"> 8.3 注解CURD增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4"><span class="toc-number">1.8.4.1.</span> <span class="toc-text"> 在工具类设置自动提交</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Eparam-%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.8.4.2.</span> <span class="toc-text"> 关于@Param( )注解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%92%8C"><span class="toc-number">1.8.4.3.</span> <span class="toc-text"> #{} 和 ${}</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-lombok"><span class="toc-number">1.9.</span> <span class="toc-text"> 9、Lombok</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E5%A4%9A%E5%AF%B9%E4%B8%80%E5%A4%84%E7%90%86"><span class="toc-number">1.10.</span> <span class="toc-text"> 10、多对一处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.10.1.</span> <span class="toc-text"> 1. 测试环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%89%E7%85%A7%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.10.2.</span> <span class="toc-text"> 2. 按照查询嵌套处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#image-20210201102700086"><span class="toc-number">1.10.3.</span> <span class="toc-text"> </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.10.4.</span> <span class="toc-text"> 3.按照结果嵌套处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%A4%84%E7%90%86%E9%9B%86%E5%90%88"><span class="toc-number">1.11.</span> <span class="toc-text"> 11、一对多处理(集合)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">1.11.1.</span> <span class="toc-text"> 1. 环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E6%8C%89%E7%85%A7%E6%9F%A5%E8%AF%A2%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.11.2.</span> <span class="toc-text"> 2,按照查询嵌套处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8C%89%E7%85%A7%E7%BB%93%E6%9E%9C%E5%B5%8C%E5%A5%97%E5%B5%8C%E5%A5%97%E5%A4%84%E7%90%86"><span class="toc-number">1.11.3.</span> <span class="toc-text"> 3… **按照结果嵌套嵌套处理 **</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.11.4.</span> <span class="toc-text"> 小结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">1.11.5.</span> <span class="toc-text"> 注意点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%91"><span class="toc-number">1.11.6.</span> <span class="toc-text"> Mysql面试高频</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%8A%A8%E6%80%81sql"><span class="toc-number">1.12.</span> <span class="toc-text"> 12、动态SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">1.12.1.</span> <span class="toc-text"> 搭建环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%9F%BA%E7%A1%80%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.12.1.1.</span> <span class="toc-text"> 创建一个基础工程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1if%E9%81%BF%E5%85%8D%E9%87%8D%E8%BD%BD"><span class="toc-number">1.12.2.</span> <span class="toc-text"> 1.IF–避免重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2choose-when-otherwiseswitch-case%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.12.3.</span> <span class="toc-text"> 2.choose (when, otherwise)–Switch-case语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3trim-where-set"><span class="toc-number">1.12.4.</span> <span class="toc-text"> 3.Trim、where、Set</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#trim"><span class="toc-number">1.12.4.1.</span> <span class="toc-text"> Trim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#where"><span class="toc-number">1.12.4.2.</span> <span class="toc-text"> where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set"><span class="toc-number">1.12.4.3.</span> <span class="toc-text"> Set</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4sql%E7%89%87%E6%AE%B5"><span class="toc-number">1.12.5.</span> <span class="toc-text"> 4.SQL片段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5foreach"><span class="toc-number">1.12.6.</span> <span class="toc-text"> 5.Foreach</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.</span> <span class="toc-text"> 13、缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#131-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.13.1.</span> <span class="toc-text"> 13.1 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#132-mybatis%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.2.</span> <span class="toc-text"> 13.2 MyBatis缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#133-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">1.13.3.</span> <span class="toc-text"> 13.3 一级缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#134-%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.13.4.</span> <span class="toc-text"> 13.4 使用步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#135-%E7%BB%93%E8%AE%BA"><span class="toc-number">1.13.5.</span> <span class="toc-text"> 13.5 结论</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#136%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86"><span class="toc-number">1.13.6.</span> <span class="toc-text"> 13.6缓存原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1310-ehcache"><span class="toc-number">1.13.7.</span> <span class="toc-text"> 13.10 EhCache</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-mybatis%E6%80%BB%E7%BB%93"><span class="toc-number">1.14.</span> <span class="toc-text"> 14、Mybatis总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#141-%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">1.14.1.</span> <span class="toc-text"> 14.1 参考文章</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#142-%E6%89%80%E6%9C%89%E4%BB%A3%E7%A0%81"><span class="toc-number">1.14.2.</span> <span class="toc-text"> 14.2 所有代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-mybatis24%E9%81%93%E7%BB%83%E4%B9%A0%E9%A2%98"><span class="toc-number">1.15.</span> <span class="toc-text"> 15、Mybatis–24道练习题</span></a></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="AI Jiang"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">狂神说Mybatis</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2021-03-31 10:58:10" itemprop="dateCreated datePublished" datetime="2021-03-31T10:58:10+08:00">2021-03-31</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-04-02 15:19:33" itemprop="dateModified" datetime="2021-04-02T15:19:33+08:00">2021-04-02</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E5%90%8E%E7%AB%AF/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">后端</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">后端学习</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="mybatis"><a class="markdownIt-Anchor" href="#mybatis"></a> MyBatis</h1>
<h2 id="1-简介"><a class="markdownIt-Anchor" href="#1-简介"></a> 1、简介</h2>
<h3 id="11-什么是mybatis"><a class="markdownIt-Anchor" href="#11-什么是mybatis"></a> 1.1 什么是Mybatis</h3>
<p>文档：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/getting-started.html">https://mybatis.org/mybatis-3/zh/getting-started.html</a></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316463790.png" alt="在这里插入图片描述" loading="lazy"></p>
<ul>
<li>MyBatis 是一款优秀的<strong>持久层框架;</strong></li>
<li>它支持自定义 SQL、存储过程以及高级映射。MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。MyBatis 可以<strong>通过简单的 XML 或注解来配置和映射原始类型</strong>、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</li>
</ul>
<h3 id="12-持久化"><a class="markdownIt-Anchor" href="#12-持久化"></a> 1.2 持久化</h3>
<p>数据持久化</p>
<ul>
<li>持久化就是将程序的数据在持久状态和瞬时状态转化的过程</li>
<li>内存：<strong>断电即失</strong></li>
<li>数据库（Jdbc）,io文件持久化。</li>
</ul>
<p><strong>为什么要持久化？</strong></p>
<ul>
<li>有一些对象，不能让他丢掉</li>
<li>内存太贵</li>
</ul>
<h3 id="13-持久层"><a class="markdownIt-Anchor" href="#13-持久层"></a> 1.3 持久层</h3>
<p>Dao层、Service层、Controller层</p>
<ul>
<li>完成持久化工作的代码块</li>
<li>层界限十分明显</li>
</ul>
<h3 id="14-为什么需要mybatis"><a class="markdownIt-Anchor" href="#14-为什么需要mybatis"></a> 1.4 为什么需要MyBatis</h3>
<ul>
<li>帮助程序员将数据存入到数据库中</li>
<li>方便</li>
<li>传统的JDBC代码太复杂了，简化，框架，自动化</li>
<li>不用MyBatis也可以，技术没有高低之分</li>
<li>优点：
<ul>
<li>简单易学</li>
<li>灵活</li>
<li>sql和代码的分离，提高了可维护性。</li>
<li>提供映射标签，支持对象与数据库的orm字段关系映射</li>
<li>提供对象关系映射标签，支持对象关系组建维护</li>
<li>提供xml标签，支持编写动态sql</li>
</ul>
</li>
</ul>
<h2 id="2-第一个mybatis程序"><a class="markdownIt-Anchor" href="#2-第一个mybatis程序"></a> 2、第一个Mybatis程序</h2>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--新建数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis`;</span><br><span class="line">USE `mybatis`</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`(</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> ,</span><br><span class="line">	`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	`pwd` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(`id`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (`id`,`name`,`pwd`) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;蒋中正&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>思路：搭建环境(普通的项目) --&gt; 导入MyBatis --&gt; 编写代码 --&gt; 测试</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130065018788.png" alt="image-20210130065018788" loading="lazy"></p>
<h3 id="21-搭建环境"><a class="markdownIt-Anchor" href="#21-搭建环境"></a> 2.1 搭建环境</h3>
<p>新建项目</p>
<ol>
<li>
<p>创建一个普通的maven项目</p>
</li>
<li>
<p>删除src目录 （就可以把此工程当做父工程了，然后创建子工程）</p>
</li>
<li>
<p>导入maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--导入依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysqlq驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>创建一个Module</p>
</li>
</ol>
<h3 id="22-创建一个模块"><a class="markdownIt-Anchor" href="#22-创建一个模块"></a> 2.2 创建一个模块</h3>
<ul>
<li>
<p>编写mybatis的核心配置文件</p>
</li>
<li>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130073513622.png" alt="image-20210130073513622" loading="lazy"><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/../../../code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210130073808571.png" alt="image-20210130073808571" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configuration核心配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="comment">&lt;!---设置连接，&amp;amp；==&amp;--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?userSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>serverTimezone=UTC&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写<strong>mybatis工具类</strong></p>
</li>
<li>
<p>每个基于 MyBatis 的应用都是以一个SqlSessionFactory 的实例为核心的。SqlSessionFactory 的实例可以通过 SqlSessionFactoryBuilder 获得。<strong>类似于preparedStatement</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用Mybatis第一步 ：获取sqlSessionFactory对象</span></span><br><span class="line">            String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//既然有了 SqlSessionFactory，顾名思义，我们可以从中获得 SqlSession 的实例.</span></span><br><span class="line">    <span class="comment">// SqlSession 提供了在数据库执行 SQL 命令所需的所有方法。工厂模式或者单例模式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="23-编写代码"><a class="markdownIt-Anchor" href="#23-编写代码"></a> 2.3 编写代码</h3>
<ul>
<li>
<p>实体类</p>
</li>
<li>
<p>Dao接口-&gt;mapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>接口实现类 （由原来的<strong>UserDaoImpl转变为一个Mapper配置文件）</strong></p>
</li>
<li>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130082844552.png" alt="image-20210130082844552" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210216184706121.png" alt="image-20210216184706121" loading="lazy"><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/../../../code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/%25E5%2585%25A8%25E7%25AB%2599%25E5%25AD%25A6%25E4%25B9%25A0/images/image-20210216184732399.png" alt="image-20210216184732399" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--namespace=绑定一个指定的Dao/Mapper接口--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.kuang.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line">     <span class="comment">&lt;!--id对应方法名--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from USER</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="24测试"><a class="markdownIt-Anchor" href="#24测试"></a> 2.4测试</h3>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130083326102.png" alt="image-20210130083326102" loading="lazy"></p>
<p><strong>注意点：</strong></p>
<p>org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry.</p>
<p><strong>MapperRegistry是什么?</strong></p>
<p>核心配置文件中注册mappers，每一个都要注册</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130084330363.png" alt="image-20210130084330363" loading="lazy"></p>
<ul>
<li>
<p>junit测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.获取SqlSession对象</span></span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//2.执行SQL</span></span><br><span class="line">    <span class="comment">// 方式一：getMapper</span></span><br><span class="line">    UserDao userDao = sqlSession.getMapper(UserDao.class);</span><br><span class="line">    List&lt;User&gt; userList = userDao.getUserList();</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关闭sqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="25可能会遇到的问题"><a class="markdownIt-Anchor" href="#25可能会遇到的问题"></a> <em>2.5可能会遇到的问题：</em></h3>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130084734034.png" alt="image-20210130084734034" loading="lazy"></p>
<ol>
<li>
<p>配置文件没有注册</p>
</li>
<li>
<p>绑定接口错误，路径要对</p>
</li>
<li>
<p>方法名不对</p>
</li>
<li>
<p>返回类型不对</p>
</li>
<li>
<p>sql语句的问题空格等<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130191757881.png" alt="image-20210130191757881" loading="lazy"></p>
</li>
</ol>
<h4 id="maven导出资源问题pom文件中执行"><a class="markdownIt-Anchor" href="#maven导出资源问题pom文件中执行"></a> Maven导出资源问题.pom文件中执行</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在build中配置resources，来防止我们资源导出失败的问题--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="7">
<li>
<p>输出xml文件的中文乱码问题</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130182528886.png" alt="image-20210130182528886" loading="lazy"></p>
</li>
</ol>
<p>命名空间，限定名，核心接口，SqlSessionFactoryBuilder</p>
<h2 id="3-curd"><a class="markdownIt-Anchor" href="#3-curd"></a> 3、CURD</h2>
<h3 id="1-namespace"><a class="markdownIt-Anchor" href="#1-namespace"></a> 1. namespace</h3>
<p>namespace中的<strong>包名要和Dao/Mapper接口的包名一致</strong><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130093828361.png" alt="image-20210130093828361" loading="lazy"></p>
<h3 id="2-select"><a class="markdownIt-Anchor" href="#2-select"></a> 2. select</h3>
<p>选择，查询语句；</p>
<ul>
<li>
<p>id：就是对应的<strong>namespace中的方法名；</strong></p>
</li>
<li>
<p>resultType : Sql语句执行的返回值；类为多</p>
</li>
<li>
<p>parameterType : 参数类型；</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130094734702.png" alt="image-20210130094734702" loading="lazy"></p>
</li>
</ul>
<h5 id="1编写接口"><a class="markdownIt-Anchor" href="#1编写接口"></a> 1.编写接口</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">    <span class="function">List&lt;User&gt; <span class="title">getUserList</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="comment">//获取用户信息</span></span><br><span class="line">    <span class="function">User <span class="title">getUserById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="comment">//添加用户</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(User user)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2编写对应的mapper中的sql语句"><a class="markdownIt-Anchor" href="#2编写对应的mapper中的sql语句"></a> 2.编写对应的mapper中的sql语句</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--查询全部--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> &gt;</span></span><br><span class="line">    select * from mybatis.user</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.user where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 参数和返回值是int可以不写--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> &gt;</span></span><br><span class="line">    insert into mybatis.user (id,name,pwd) value (#&#123;id&#125;,#&#123;name &#125;,#&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update mybatis.user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete from mybatis.user where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3测试"><a class="markdownIt-Anchor" href="#3测试"></a> 3.测试</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDemoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//优化代码,官方建议</span></span><br><span class="line"><span class="comment">//        try&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="comment">//获取sqlSession对象</span></span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">//执行1</span></span><br><span class="line">        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        List&lt;User&gt; userList = userMapper.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方法二要强转,类型不安全</span></span><br><span class="line"><span class="comment">//      List&lt;User&gt; userList=sqlSession.selectList(&quot;com.kuang.dao.UserDao.getUserList&quot;);</span></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user.getName() + <span class="string">&quot;&quot;</span> + user.getName() + user.getPwd());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        <span class="comment">//获得接口</span></span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//增删改要提交事务</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        <span class="keyword">int</span> res = mapper.addUser(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">&quot;dj&quot;</span>, <span class="string">&quot;12233&quot;</span>));</span><br><span class="line">        <span class="keyword">if</span> (res &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;插入成功&quot;</span>);</span><br><span class="line">            <span class="comment">//插入事务</span></span><br><span class="line">            sqlSession.commit();</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//更新</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mapper.updateUser(<span class="keyword">new</span> User(<span class="number">4</span>, <span class="string">&quot;呵呵&quot;</span>, <span class="string">&quot;12344&quot;</span>)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SqlSession sqlSession=MybatisUtils.getSqlSession();</span><br><span class="line">        UserMapper mapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        mapper.deleteUser(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        sqlSession.commit();</span><br><span class="line"></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="注意增删改一定要提交事务"><a class="markdownIt-Anchor" href="#注意增删改一定要提交事务"></a> <em>注意：<strong>增删改</strong>一定要提交事务：</em></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSession.commit();</span><br></pre></td></tr></table></figure>
<h3 id="3-update返回都是int"><a class="markdownIt-Anchor" href="#3-update返回都是int"></a> 3. update(返回都是int)</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">        update mybatis.user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="4-insert"><a class="markdownIt-Anchor" href="#4-insert"></a> 4. Insert</h3>
<h3 id="5-delete"><a class="markdownIt-Anchor" href="#5-delete"></a> 5. Delete</h3>
<h3 id="6-万能map"><a class="markdownIt-Anchor" href="#6-万能map"></a> 6. 万能Map</h3>
<p>假设，<strong>我们的实体类，或者数据库中的表，字段或者参数过多，我们应该考虑使用Map!</strong></p>
<ol>
<li>UserMapper接口</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用万能Map插入用户</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser2</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>
<ol>
<li>UserMapper.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--对象中的属性可以直接取出来 传递map的key--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser2&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    insert into user (id,name,password) values (#&#123;userid&#125;,#&#123;username&#125;,#&#123;userpassword&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>测试</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">4</span>);</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;王虎&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;userpassword&quot;</span>,<span class="number">789</span>); <span class="comment">//一一对应</span></span><br><span class="line">    mapper.addUser2(map);</span><br><span class="line">    <span class="comment">//提交事务</span></span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    <span class="comment">//关闭资源</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Map传递参数，直接在sql中取出key即可！ 【parameter=“map”】</p>
<p>对象传递参数，直接在sql中取出对象的属性即可！ 【parameter=“Object”】对象</p>
<p>只有<strong>一个基本类型参数的情况下，可以直接在sql中取到</strong></p>
<p>多个参数用Map , <strong>或者注解！</strong></p>
</blockquote>
<h3 id="7-模糊查询"><a class="markdownIt-Anchor" href="#7-模糊查询"></a> 7. 模糊查询</h3>
<p>模糊查询这么写？</p>
<ol>
<li>
<p>Java代码执行的时候，传递通配符%</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; userList = mapper.getUserLike(<span class="string">&quot;%李%&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在sql拼接中使用通配符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from user where name like &quot;%&quot;#&#123;value&#125;&quot;%&quot;</span><br><span class="line"><span class="comment">--尽量采用 #的方式，#将传入的数据都当成一个字符串，会对自动传入的数据加一个双引号</span></span><br><span class="line"><span class="comment">--尽量避免采用$的方式，$会导致SQL注入， LIKE &#x27;%$institutionName$%&#x27; 和  LIKE  concat( &#x27;%&#x27;,$institutionName$,&#x27;%&#x27;) 都会导致SQL注入 ；</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="4-配置解析"><a class="markdownIt-Anchor" href="#4-配置解析"></a> 4、配置解析</h2>
<h3 id="1-核心配置文件"><a class="markdownIt-Anchor" href="#1-核心配置文件"></a> 1. 核心配置文件</h3>
<ul>
<li>
<p>mybatis-config.xml</p>
</li>
<li>
<p>Mybatis的配置文件包含了会<strong>深深影响MyBatis行为的设置和属性信息。</strong></p>
</li>
<li>
<p><strong>有顺序，比如properties要在最上面</strong><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130204407763.png" alt="image-20210130204407763" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">configuration（配置）</span><br><span class="line">    properties（属性）</span><br><span class="line">    settings（设置）</span><br><span class="line">    typeAliases（类型别名）</span><br><span class="line">    typeHandlers（类型处理器）</span><br><span class="line">    objectFactory（对象工厂）</span><br><span class="line">    plugins（插件）</span><br><span class="line">    environments（环境配置）</span><br><span class="line">    	environment（环境变量）</span><br><span class="line">    		transactionManager（事务管理器）</span><br><span class="line">    		dataSource（数据源）</span><br><span class="line">    databaseIdProvider（数据库厂商标识）</span><br><span class="line">    mappers（映射器）</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-环境配置-environments"><a class="markdownIt-Anchor" href="#2-环境配置-environments"></a> 2. 环境配置 environments</h3>
<p>MyBatis 可以配置成<strong>适应多种环境</strong></p>
<p><strong>不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--环境，可以有多套默认选中了development--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span> serverTimezone=Hongkong<span class="symbol">&amp;amp;</span> characterEncoding=utf-8<span class="symbol">&amp;amp;</span> autoReconnect=true&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 第二套环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>学会使用配置多套运行环境！</p>
<p>MyBatis<strong>默认的事务管理器就是JDBC</strong> ，还有MANAGED</p>
<p>数据源：(dbcp c3p0 druid)连接数据库</p>
<p>默认<strong>连接池（连接用完不关）：POOLED</strong>  UNPOOLED(没有数据池)</p>
<h3 id="3-属性-properties"><a class="markdownIt-Anchor" href="#3-属性-properties"></a> 3. 属性 properties</h3>
<p>我们可以通过properties属性来<strong>实现引用配置文件</strong></p>
<p>这些属性可以在外部进行配置，并可以进行动态替换。你既可以在典型的 Java 属性文件中配置这些属性，也可以在 properties 元素的子元素中设置。【<strong>db.poperties</strong>】</p>
<ol>
<li>
<p>resourse下面编写一个配置文件</p>
<p>db.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?userSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在<strong>核心配置文件中引入</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引用外部配置文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li>可以直接引入外部文件
<ul>
<li>可以在其中增加一些属性配置<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210130205822111.png" alt="image-20210130205822111" loading="lazy"></li>
<li>如果两个文件有同一个字段，<strong>优先使用外部配置文件的</strong></li>
</ul>
</li>
</ul>
<h3 id="4-类型别名-typealiases"><a class="markdownIt-Anchor" href="#4-类型别名-typealiases"></a> 4. 类型别名 typeAliases</h3>
<ul>
<li>
<p>类型别名可为 Java 类型设置一个缩写名字。 它仅用于 XML 配置.</p>
</li>
<li>
<p>意在降低冗余的全限定类名书写。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--可以给实体类起别名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>也可以指定一个包，每一个在包 <code>domain.blog</code> 中的 Java Bean，<strong>在没有注解的情况下，会使用 Bean 的首字母小写的非限定类名来作为它的别名。</strong> 比如 <code>domain.blog.Author</code> 的别名为 <code>author</code>,；若有注解，则别名为其注解值。见下面的例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在实体类比较少的时候，使用第一种方式。</p>
<p>如果实体类十分多，建议用第二种扫描包的方式。</p>
<p>第一种可以DIY别名，第二种不行，如果非要改，需要在实体上增加注解。</p>
</blockquote>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;author&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Author</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-设置-settings"><a class="markdownIt-Anchor" href="#5-设置-settings"></a> 5. 设置 Settings</h3>
<p>这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。</p>
<table>
<thead>
<tr>
<th>mapUnderscoreToCamelCase</th>
<th><strong>是否开启驼峰命名自动映射</strong>，即从经典数据库列名 A_COLUMN 映射到经典 Java 属性名 aColumn。  last_name --&gt;lastName</th>
<th>true | false</th>
<th>False</th>
</tr>
</thead>
<tbody>
<tr>
<td>logImpl</td>
<td>指定 MyBatis 所用日志的具体实现，未指定时将自动查找。</td>
<td>SLF4J | LOG4J | LOG4J2 | JDK_LOGGING | COMMONS_LOGGING | STDOUT_LOGGING | NO_LOGGING</td>
<td>未设置</td>
</tr>
</tbody>
</table>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316474822.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="6-其他配置"><a class="markdownIt-Anchor" href="#6-其他配置"></a> 6. 其他配置</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlers（类型处理器）</a></li>
<li><a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactory（对象工厂）</a></li>
<li>plugins 插件
<ul>
<li>mybatis-generator-core</li>
<li><strong>mybatis-plus</strong></li>
<li>通用mapper</li>
</ul>
</li>
</ul>
<h3 id="7-映射器-mappers"><a class="markdownIt-Anchor" href="#7-映射器-mappers"></a> 7. 映射器 mappers</h3>
<p>MapperRegistry：<strong>注册绑定我们的Mapper文件；</strong></p>
<p>方式一：资源路径【推荐使用】</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--每一个Mapper.xml都需要在MyBatis核心配置文件中注册--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/kuang/dao/*.xml&quot;</span>&gt;</span>  通配，慎用可能不行</span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方式二：使用class文件绑定注册</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--每一个Mapper.xml都需要在MyBatis核心配置文件中注册--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>方式三：使用<strong>包扫描进行</strong>注入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.kuang.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="使用class和package的注意点"><a class="markdownIt-Anchor" href="#使用class和package的注意点"></a> <strong>使用class和package的注意点：</strong></h4>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201101013162.png" alt="image-20210201101013162" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131080434752.png" alt="image-20210131080434752" loading="lazy"></p>
<ul>
<li><strong>接口和他的Mapper配置文件必须同名</strong></li>
<li>接口和他的Mapper配置文件必须在同一个包下（resourse随便放）</li>
</ul>
<h3 id="8-作用域和生命周期"><a class="markdownIt-Anchor" href="#8-作用域和生命周期"></a> 8. 作用域和生命周期</h3>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164809990.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>声明周期和作用域是至关重要的，因为错误的使用会导致非常严重的<strong>并发问题</strong>。</p>
<p><strong>SqlSessionFactoryBuilder:</strong></p>
<ul>
<li>一旦创建了SqlSessionFactory，就不再需要它了</li>
<li>局部变量</li>
</ul>
<p><strong>SqlSessionFactory:</strong></p>
<ul>
<li>说白了就可以想象为：数据库连接池</li>
<li>SqlSessionFactory一旦被创建就应该在应用的运行期间一直存在，<strong>没有任何理由丢弃它或重新创建一个实例。</strong></li>
<li>因此SqlSessionFactory的最佳作用域是应用作用域（ApplocationContext）。</li>
<li>最简单的就是使用<strong>单例模式</strong>或静态单例模式。</li>
</ul>
<p><strong>SqlSession：</strong></p>
<ul>
<li>连接到连接池的一个请求</li>
<li>SqlSession 的实例不是线程安全的，因此是不能被共享的，所以它的最佳的作用域是请求或方法作用域。</li>
<li>用完之后需要赶紧关闭，否则资源被占用！</li>
</ul>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164833872.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="5-解决属性名和字段名不一致的问题"><a class="markdownIt-Anchor" href="#5-解决属性名和字段名不一致的问题"></a> 5、解决属性名和字段名不一致的问题</h2>
<h3 id="1-问题"><a class="markdownIt-Anchor" href="#1-问题"></a> 1. 问题</h3>
<p>数据库中的字段</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164845962.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>新建一个项目，拷贝之前的，测试实体类字段不一致的情况</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164853569.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>测试出现问题 password返回null,因为和数据库内部的东西不一致<br>
<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164901861.png" alt="在这里插入图片描述" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// select * from user where id = #&#123;id&#125;</span><br><span class="line">// 类型处理器</span><br><span class="line">// select id,name,pwd from user where id = #&#123;id&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131190533613.png" alt="image-20210131190533613" loading="lazy">select和Insert不一样</p>
<h4 id="解决方法"><a class="markdownIt-Anchor" href="#解决方法"></a> 解决方法：</h4>
<ul>
<li><strong>起别名</strong> .xml配置sql文件</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.kuang.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select id,name,pwd as password from USER where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>用resultMap</li>
</ul>
<h3 id="2-resultmap"><a class="markdownIt-Anchor" href="#2-resultmap"></a> <em>2. resultMap</em></h3>
<p>结果集映射</p>
<blockquote>
<p>id name pwd  <strong>转为</strong></p>
<p>id name password  <strong>使得结果变为</strong></p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--结果集映射--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--resultMap id对应resultMap type对应结果集--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--column数据库中的字段，property实体类中的属性--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span>   <span class="comment">&lt;!--可以不用显示的配置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select * from USER</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    SELECT s.id sid, s.name sname,t.name tname,t.id tid FROM student s, teacher t</span><br><span class="line">    WHERE s.tid = t.id AND tid = #&#123;tid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span>  有别名其情况的结果集</span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>
<p><code>resultMap</code> 元素是 MyBatis 中<strong>最重要最强大的元素</strong>。</p>
</li>
<li>
<p>ResultMap 的设计思想是，对<strong>简单的语句做到零配置，对于复杂一点的语句，只需要描述语句之间的关系就行了。</strong></p>
</li>
<li>
<p><code>ResultMap</code> 的优秀之处——你完全可以不用显式地配置它们。</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131085254136.png" alt="image-20210131085254136" loading="lazy"></p>
</li>
<li>
<p>如果这个世界总是这么简单就好了。一对多多对多</p>
</li>
</ul>
<h2 id="6-日志"><a class="markdownIt-Anchor" href="#6-日志"></a> 6、日志</h2>
<h3 id="61-日志工厂"><a class="markdownIt-Anchor" href="#61-日志工厂"></a> 6.1 日志工厂</h3>
<p>如果一个数据库操作，出现了异常，我们需要排错，日志就是最好的助手！</p>
<p><strong>曾经</strong>：sout、debug</p>
<p>现在：<strong>日志工厂</strong></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164920502.png" alt="img" loading="lazy"></p>
<ul>
<li>SLF4J</li>
<li>LOG4J 【掌握】</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING 【掌握】</li>
<li>NO_LOGGING</li>
</ul>
<p>在MyBatis中具体使用哪一个日志实现，在设置中设定</p>
<h3 id="标准日志工厂"><a class="markdownIt-Anchor" href="#标准日志工厂"></a> 标准日志工厂</h3>
<p><strong>STDOUT_LOGGING</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/2020062316493391.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="62-log4j"><a class="markdownIt-Anchor" href="#62-log4j"></a> 6.2 Log4j</h3>
<p>什么是Log4j？</p>
<ul>
<li>Log4j是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Apache/8512995">Apache</a>的一个开源项目，通过使用Log4j，我们可以控制日志信息输送的目的地是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">控制台</a>、文件、<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/GUI">GUI</a>组件；</li>
<li>我们也可以控制每一条日志的输出格式；</li>
<li>通过定义每一条日志信息的级别，我们能够更加细致地控制日志的生成过程；</li>
<li>最令人感兴趣的就是，这些可以通过一个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">配置文件</a>来灵活地进行配置，而不需要修改应用的代码。</li>
</ul>
<ol>
<li>
<p><strong>先导入log4j的包</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>log4j.properties</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131111116459.png" alt="image-20210131111116459" loading="lazy"></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将等级为DEBUG的日志信息输出到console和file这两个目的地，console和file的定义在下面的代码</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#控制台输出的相关设置</span></span><br><span class="line"><span class="meta">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="meta">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n  #格式可以改变</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#文件输出的相关设置</span></span><br><span class="line"><span class="meta">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="meta">log4j.appender.file.File</span>=<span class="string">./log/rzp.log</span></span><br><span class="line"><span class="meta">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="meta">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n </span></span><br><span class="line"><span class="comment">#格式</span></span><br><span class="line"><span class="meta">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#日志输出级别</span></span><br><span class="line"><span class="meta">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="meta">log4j.logger.java.sq1.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>配置<strong>settings为log4j实现</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;LOG4J&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试运行<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131105737594.png" alt="image-20210131105737594" loading="lazy"></p>
</li>
</ol>
<h3 id="63log4j简单使用"><a class="markdownIt-Anchor" href="#63log4j简单使用"></a> 6.3Log4j简单使用</h3>
<ol>
<li>
<p>在要使用Log4j的类中，导入包 import org.apache.log4j.Logger;<strong>（默认导入util的包）</strong></p>
</li>
<li>
<p>日志对象，参数为当前类的class对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Logger logger = Logger.getLogger(UserDaoTest.class); <span class="comment">//载入测试的类对象</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>日志级别</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;info: 测试log4j&quot;</span>);</span><br><span class="line">logger.debug(<span class="string">&quot;debug: 测试log4j&quot;</span>);</span><br><span class="line">logger.error(<span class="string">&quot;error:测试log4j&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>info  普通信息单纯的info《==》sout</p>
<ol start="2">
<li>debug     大多数配置都是debug</li>
<li>error  try catch里面使用</li>
</ol>
</li>
</ol>
<h2 id="7-分页"><a class="markdownIt-Anchor" href="#7-分页"></a> 7、分页</h2>
<p><strong>思考：为什么分页？</strong></p>
<ul>
<li><strong>减少数据的处理量</strong></li>
</ul>
<h3 id="71-使用limit分页"><a class="markdownIt-Anchor" href="#71-使用limit分页"></a> 7.1 <strong>使用Limit分页</strong></h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> limit startIndex,pageSize </span><br></pre></td></tr></table></figure>
<p><strong>使用MyBatis实现分页，核心SQL</strong></p>
<ol>
<li>
<p>接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUserByLimit</span><span class="params">(Map&lt;String,Integer&gt; map)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分页查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserByLimit</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;String, Integer&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;startIndex&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">2</span>);</span><br><span class="line">    List&lt;User&gt; list = mapper.getUserByLimit(map);</span><br><span class="line">    <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="72-rowbounds分页"><a class="markdownIt-Anchor" href="#72-rowbounds分页"></a> 7.2 RowBounds分页</h3>
<p><strong>不再使用SQL实现分页</strong>，面向对象</p>
<ol>
<li>
<p>接口</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//分页2</span><br><span class="line">List<span class="tag">&lt;<span class="name">User</span>&gt;</span> getUserByRowBounds();</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--分页查询2--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByRowBounds&quot;</span>&gt;</span></span><br><span class="line">    select * from user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserByRowBounds</span><span class="params">()</span></span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="comment">//RowBounds实现</span></span><br><span class="line">    RowBounds rowBounds = <span class="keyword">new</span> RowBounds(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//通过Java代码层面实现分页</span></span><br><span class="line">    List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;com.kaung.dao.UserMapper.getUserByRowBounds&quot;</span>, <span class="keyword">null</span>, rowBounds);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="73-分页插件"><a class="markdownIt-Anchor" href="#73-分页插件"></a> 7.3 分页插件、</h3>
<p>了解即可https://pagehelper.github.io/</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623164958936.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="8-使用注解开发-05"><a class="markdownIt-Anchor" href="#8-使用注解开发-05"></a> 8、使用注解开发（-05）</h2>
<h3 id="81-面向接口开发"><a class="markdownIt-Anchor" href="#81-面向接口开发"></a> 8.1 面向<strong>接口</strong>开发</h3>
<p>定义与实现的分离，解耦</p>
<p><strong>三个面向区别</strong></p>
<ul>
<li>面向对象是指，我们考虑问题时，以对象为单位，考虑它的属性和方法；</li>
<li>面向过程是指，我们考虑问题时，以一个具体的流程（事务过程）为单位，考虑它的实现；</li>
<li>接口设计与非接口设计是针对复用技术而言的，与面向对象（过程）不是一个问题，更多的体现就是对系统整体的架构；</li>
</ul>
<h3 id="82-使用注解开发"><a class="markdownIt-Anchor" href="#82-使用注解开发"></a> 8.2 使用注解开发</h3>
<ol>
<li>
<p>注解在接口上实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line"><span class="function">List&lt;User&gt; <span class="title">getUsers</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>需要在核心配置文件中<strong>绑定接口</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>测试</p>
</li>
</ol>
<blockquote>
<p>注：可以在简单的情况下运用但是对属性名字段名不一致的情况力不从心</p>
</blockquote>
<p>本质：反射机制实现</p>
<p>底层：动态代理<br>
<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165014965.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="mybatis详细执行流程重要"><a class="markdownIt-Anchor" href="#mybatis详细执行流程重要"></a> <strong>MyBatis详细执行流程</strong>（重要）</h3>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183548383.png" alt="image-20210131183548383" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183530203.png" alt="image-20210131183530203" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131183706828.png" alt="image-20210131183706828" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210131184602709.png" alt="image-20210131184602709" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165030775.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="83-注解curd增删改查"><a class="markdownIt-Anchor" href="#83-注解curd增删改查"></a> 8.3 注解CURD增删改查</h3>
<h4 id="在工具类设置自动提交"><a class="markdownIt-Anchor" href="#在工具类设置自动提交"></a> 在工具类设置自动提交</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//既然有了 SqlSessionFactory，顾名思义，我们可以从中获得 SqlSession 的实例.</span></span><br><span class="line"><span class="comment">// SqlSession 提供了在数据库执行 SQL 命令所需的所有方法。</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlSession</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Mapper.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法存在多个参数，所有的参数前面必须加上@Param(&quot;id&quot;)注解</span></span><br><span class="line"><span class="meta">@Delete(&quot;delete from user where id = $&#123;uid&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">deleteUser</span><span class="params">(<span class="meta">@Param(&quot;uid&quot;)</span> <span class="keyword">int</span> id)</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="关于param-注解"><a class="markdownIt-Anchor" href="#关于param-注解"></a> <strong>关于@Param( )注解</strong></h4>
<ul>
<li>基本类型的参数或者String类型，需要加上</li>
<li><strong>引用类</strong>型不需要加</li>
<li>如果只有一个基本类型的话，可以忽略，但是建议大家都加上</li>
<li>我们在<strong>SQL中引用的就是我们这里的@Param()中设定的属性名</strong></li>
</ul>
<h4 id="和"><a class="markdownIt-Anchor" href="#和"></a> <strong>#{} 和 ${}</strong></h4>
<p><strong>#{}防止sql注入</strong></p>
<h2 id="9-lombok"><a class="markdownIt-Anchor" href="#9-lombok"></a> 9、Lombok</h2>
<p>Lombok项目是一个Java库，它会自动插入编辑器和构建工具中，Lombok**提供了一组有用的注释，用来消除Java类中的大量样板代码。**仅五个字符(@Data)就可以替换数百行代码从而产生干净，简洁且易于维护的Java类。</p>
<p>使用步骤：</p>
<ol>
<li>
<p>在IDEA中安装Lombok插件</p>
</li>
<li>
<p>在项目中导入lombok的jar包</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在程序上加注解</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span> and <span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@FieldNameConstants</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>, <span class="meta">@RequiredArgsConstructor</span> and <span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Log</span>, <span class="meta">@Log4j</span>, <span class="meta">@Log4j2</span>, <span class="meta">@Slf4j</span>, <span class="meta">@XSlf4j</span>, <span class="meta">@CommonsLog</span>, <span class="meta">@JBossLog</span>, <span class="meta">@Flogger</span>, <span class="meta">@CustomLog</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@SuperBuilder</span></span><br><span class="line"><span class="meta">@Singular</span></span><br><span class="line"><span class="meta">@Delegate</span></span><br><span class="line"><span class="meta">@Value</span></span><br><span class="line"><span class="meta">@Accessors</span></span><br><span class="line"><span class="meta">@Wither</span></span><br><span class="line"><span class="meta">@With</span></span><br><span class="line"><span class="meta">@SneakyThrows</span></span><br><span class="line"><span class="meta">@val</span></span><br></pre></td></tr></table></figure>
<p>说明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="meta">@Setter</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//类上生产类的字段上生产字段的</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">private</span>  String i;</span><br></pre></td></tr></table></figure>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165052167.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="10-多对一处理"><a class="markdownIt-Anchor" href="#10-多对一处理"></a> 10、多对一处理</h2>
<blockquote>
<p>多个学生一个老师；</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_tid <span class="keyword">foreign</span> key (tid) <span class="keyword">references</span> teacher(id)</span><br></pre></td></tr></table></figure>
<h3 id="1-测试环境搭建"><a class="markdownIt-Anchor" href="#1-测试环境搭建"></a> <strong>1. 测试环境搭建</strong></h3>
<ol>
<li>
<p>导入lombok</p>
</li>
<li>
<p>新建实体类Teacher,Student</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201092409036.png" alt="image-20210201092409036" loading="lazy"></p>
</li>
<li>
<p>建立Mapper接口</p>
</li>
<li>
<p>建立Mapper.xml文件</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201095703748.png" alt="image-20210201095703748" loading="lazy"></p>
</li>
<li>
<p>在核心配置文件中绑定注册我们的Mapper接口或者文件 【方式很多，随心选】</p>
</li>
<li>
<p>测试查询是否能够成功</p>
</li>
</ol>
<h3 id="2-按照查询嵌套处理"><a class="markdownIt-Anchor" href="#2-按照查询嵌套处理"></a> 2. 按照查询嵌套处理</h3>
<p><strong>子查询：</strong></p>
<p>问题引入：</p>
<p>直接用select语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    &lt;select id=&quot;getStudent&quot; resultType=&quot;Student&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        select s.id,s.name,t.name from student s,teacher t where s.tid=t.id--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/select&gt;--&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="image-20210201102700086"><a class="markdownIt-Anchor" href="#image-20210201102700086"></a> <img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201102700086.png" alt="image-20210201102700086" loading="lazy"></h3>
<p>解决teacher=null的问题</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201102904377.png" alt="image-20210201102904377" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     思路：</span></span><br><span class="line"><span class="comment">        1. 查询所有的学生信息</span></span><br><span class="line"><span class="comment">        2. 根据查询出来的学生的tid寻找特定的老师 (子查询)</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--不能直接写teacher  复杂的属性，我们需要单独出来 对象：association 集合：collection--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--property :注入给实体类的某个属性</span></span><br><span class="line"><span class="comment">		column:在上次查询结果集中，哪些列作为下一条Sql语句</span></span><br><span class="line"><span class="comment">		javaType:把sql语句查询的结果集，封装给某个类对象，</span></span><br><span class="line"><span class="comment">		select:下一条要执行的sql语句</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">    select * from teacher where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="3按照结果嵌套处理"><a class="markdownIt-Anchor" href="#3按照结果嵌套处理"></a> 3.按照结果嵌套处理</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--按照结果进行查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span>&gt;</span></span><br><span class="line">    select s.id sid , s.name sname, t.name tname</span><br><span class="line">    from student s,teacher t</span><br><span class="line">    where s.tid=t.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--结果封装，将查询出来的列封装到对象属性中--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>回顾Mysql多对一查询方式:</p>
<ul>
<li>子查询 （按照查询嵌套）</li>
<li>联表查询 （按照结果嵌套）</li>
</ul>
<h2 id="11-一对多处理集合"><a class="markdownIt-Anchor" href="#11-一对多处理集合"></a> 11、一对多处理(集合)</h2>
<blockquote>
<p>一个老师多个学生；</p>
<p>对于老师而言，就是一对多的关系；</p>
</blockquote>
<h3 id="1-环境搭建"><a class="markdownIt-Anchor" href="#1-环境搭建"></a> 1. 环境搭建</h3>
<p><strong>实体类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//一个老师拥有多个学生</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2按照查询嵌套处理"><a class="markdownIt-Anchor" href="#2按照查询嵌套处理"></a> 2,按照查询嵌套处理</h3>
<h3 id="3-按照结果嵌套嵌套处理"><a class="markdownIt-Anchor" href="#3-按照结果嵌套嵌套处理"></a> 3… **按照结果嵌套嵌套处理 **</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--按结果嵌套查询--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    SELECT s.id sid, s.name sname,t.name tname,t.id tid FROM student s, teacher t</span><br><span class="line">    WHERE s.tid = t.id AND tid = #&#123;tid&#125; </span><br><span class="line">    <span class="comment">&lt;!--要和接口的@Param(&quot;tid&quot;)对应--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span>  有别名</span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	  复杂的属性，我们需要单独处理 </span></span><br><span class="line"><span class="comment">    对象：association 集合：collection</span></span><br><span class="line"><span class="comment">    javaType=&quot;&quot;指定属性的类型！</span></span><br><span class="line"><span class="comment">    集合中的泛型信息，我们使用ofType获取，小区别</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="小结"><a class="markdownIt-Anchor" href="#小结"></a> 小结</h3>
<ol>
<li>
<p>关联 - association <strong>【多对一】</strong></p>
</li>
<li>
<p>集合 - collection 【一对多】</p>
</li>
<li>
<p>javaType &amp; ofType</p>
<ol>
<li>
<p>JavaType用来指定实体类中的类型  <strong>把sql语句查询的结果集，封装给某个类对象，</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;student&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">&quot;getStudentByteacherId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ofType用来指定映射到<strong>List或者集合中的pojo类型，泛型中的约束类型</strong></p>
</li>
</ol>
</li>
</ol>
<h3 id="注意点"><a class="markdownIt-Anchor" href="#注意点"></a> <strong>注意点：</strong></h3>
<ul>
<li>保证SQL的可读性，尽量保证通俗易懂</li>
<li>注意一对多和多对一，属性名和字段的问题</li>
</ul>
<p>1.两者对应起来</p>
<p>.java接口</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201165126553.png" alt="image-20210201165126553" loading="lazy"></p>
<p>.xml文件</p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201165141410.png" alt="image-20210201165141410" loading="lazy"><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/../../../code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210201180634989.png" alt="image-20210201180634989" loading="lazy"></p>
<p>2.各个属性详解</p>
<p>​		property :注入给实体类的某个属性<br>
​		column:在上次查询结果集中，哪些列作为下一条Sql语句<br>
​		javaType:把sql语句查询的结果集，封装给某个类对象，<br>
​		select:下一条要执行的sql语句</p>
<ul>
<li>如果问题不好排查错误，可以使用日志，建议使用Log4j</li>
</ul>
<h3 id="mysql面试高频"><a class="markdownIt-Anchor" href="#mysql面试高频"></a> Mysql面试高频</h3>
<ul>
<li>Mysql引擎</li>
<li>InnoDB底层原理</li>
<li>索引</li>
<li>索引优化</li>
</ul>
<h2 id="12-动态sql"><a class="markdownIt-Anchor" href="#12-动态sql"></a> 12、动态SQL</h2>
<p><strong>什么是动态SQL：动态SQL就是根据不同的条件生成不同的SQL语句</strong></p>
<p><strong>所谓的动态SQL，本质上还是SQL语句，只是我们可以在SQL层面，去执行一个逻辑代码</strong></p>
<hr>
<blockquote>
<p>动态 SQL 是 MyBatis 的强大特性之一。如果你使用过 JDBC 或其它类似的框架，你应该能理解根据不**同条件拼接 SQL 语句有多痛苦，例如拼接时要确保不能忘记添加必要的空格，**还要注意去掉列表最后一个列名的逗号。利用动态 SQL，可以彻底摆脱这种痛苦。</p>
</blockquote>
<h3 id="搭建环境"><a class="markdownIt-Anchor" href="#搭建环境"></a> 搭建环境</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `mybatis`.`blog`  (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;博客id&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;博客标题&#x27;</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;博客作者&#x27;</span>,</span><br><span class="line">  `create_time` datetime(<span class="number">0</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;创建时间&#x27;</span>,</span><br><span class="line">  `views` <span class="type">int</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;浏览量&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="创建一个基础工程"><a class="markdownIt-Anchor" href="#创建一个基础工程"></a> 创建一个基础工程</h4>
<ol>
<li>
<p>导包</p>
</li>
<li>
<p>编写配置文件</p>
</li>
<li>
<p>编写实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Blog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Date createTime;<span class="comment">// 属性名和字段名不一致，数据库是下划线</span></span><br><span class="line">    <span class="comment">//config.xml  &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;开启动态命名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> views;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//小技巧获取随机ID utils.IDutils类下面</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>编写实体类对应Mapper接口和Mapper.xml文件</p>
</li>
</ol>
<h3 id="1if避免重载"><a class="markdownIt-Anchor" href="#1if避免重载"></a> 1.IF–避免重载</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIF&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">            and title = #&#123;title&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">            and author = #&#123;author&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>相当于and操作select * from mybatis.blog where 1=1 [and title=#{title}][and author=#{author}]</p>
<p>是重载的简化不用根据不同的查询写不同的参数</p>
<h3 id="2choose-when-otherwiseswitch-case语句"><a class="markdownIt-Anchor" href="#2choose-when-otherwiseswitch-case语句"></a> 2.choose (when, otherwise)–Switch-case语句</h3>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>  <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span>and title=#&#123;title&#125;<span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span>and author=#&#123;author&#125;<span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span>and views=#&#123;views&#125;<span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201205757272.png" alt="image-20210201205757272" loading="lazy"></p>
<h3 id="3trim-where-set"><a class="markdownIt-Anchor" href="#3trim-where-set"></a> 3.Trim、where、Set</h3>
<h4 id="trim"><a class="markdownIt-Anchor" href="#trim"></a> Trim</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;AND&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state != null&quot;</span>&gt;</span></span><br><span class="line">	  state = #&#123;state&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">	  AND title like #&#123;title&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null and author.name != null&quot;</span>&gt;</span></span><br><span class="line">	  AND author_name like #&#123;author.name&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="where"><a class="markdownIt-Anchor" href="#where"></a> where</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">    	title=#&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">       and author=#&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line">等价于  </span><br><span class="line">where 1=1</span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">    title=#&#123;title&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">    and author=#&#123;author&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>避免where and test=#{test}的情况出现 <strong>,智能去掉and</strong></p>
<h4 id="set"><a class="markdownIt-Anchor" href="#set"></a> Set</h4>
<p>动态前置**（拼接）set关键字，删除无关的逗号**（记得加逗号），update专用<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210201212654522.png" alt="image-20210201212654522" loading="lazy"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">update blog</span><br><span class="line"><span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">        title=#&#123;title&#125;,</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author !=null&quot;</span>&gt;</span></span><br><span class="line">        author=#&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">where id=#&#123;id&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4sql片段"><a class="markdownIt-Anchor" href="#4sql片段"></a> 4.SQL片段</h3>
<p>有的时候，我们可能会将一些功能的部分抽取出来，方便服用！</p>
<ol>
<li>
<p>使用SQL标签抽取公共部分可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author!=null&quot;</span>&gt;</span></span><br><span class="line">        and author = #&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在需要使用的地方使用Include标签引用即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIF&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>注意：</strong></p>
<p>①、最好基于 单表来定义 sql 片段，提高片段的可重用性</p>
<p>②、在 sql 片段中<strong>不要包括 where</strong></p>
<h3 id="5foreach"><a class="markdownIt-Anchor" href="#5foreach"></a> 5.Foreach</h3>
<p>select * from blog where 1=1 and (id=1 or id=2 or id=3)</p>
<p>将数据库中前三个数据的id修改为1,2,3；</p>
<p><strong>需求：我们需要查询 blog 表中 id 分别为1,2,3的博客信息</strong></p>
<p>1、编写接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;Blog&gt; <span class="title">queryBlogForeach</span><span class="params">(Map map)</span></span>;</span><br></pre></td></tr></table></figure>
<p>2、编写SQL语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">  select * from blog</span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       collection:指定输入对象中的集合属性  map里的ids属性是集合</span></span><br><span class="line"><span class="comment">       item:每次遍历生成的对象</span></span><br><span class="line"><span class="comment">       open:开始遍历时的拼接字符串</span></span><br><span class="line"><span class="comment">       close:结束时拼接的字符串</span></span><br><span class="line"><span class="comment">       separator:遍历对象之间需要拼接的字符串</span></span><br><span class="line"><span class="comment">       select * from blog where 1=1 and (id=1 or id=2 or id=3)</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span>  <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">          id=#&#123;id&#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>3、测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryBlogForeach</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   BlogMapper mapper = session.getMapper(BlogMapper.class);</span><br><span class="line"></span><br><span class="line">   HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">   List&lt;Integer&gt; ids = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">   ids.add(<span class="number">1</span>);</span><br><span class="line">   ids.add(<span class="number">2</span>);</span><br><span class="line">   ids.add(<span class="number">3</span>);</span><br><span class="line">   map.put(<span class="string">&quot;ids&quot;</span>,ids);</span><br><span class="line">   List&lt;Blog&gt; blogs = mapper.queryBlogForeach(map);</span><br><span class="line">   System.out.println(blogs);</span><br><span class="line">   session.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>动态SQL就是在拼接SQL语句，我们只要保证SQL的正确性，按照SQL的格式，去排列组合就可以了</strong></p>
<p>建议：</p>
<ul>
<li>先在Mysql中写出完整的SQL，再对应的去修改成我们的动态SQL实现通用即可</li>
<li>if是拼接多个语句，Choose动态的break只匹配合适的第一条语句</li>
</ul>
<h2 id="13-缓存"><a class="markdownIt-Anchor" href="#13-缓存"></a> 13、缓存</h2>
<h3 id="131-简介"><a class="markdownIt-Anchor" href="#131-简介"></a> 13.1 简介</h3>
<blockquote>
<p>查询 ： 连接数据库，耗资源</p>
<p>一次查询的结果，给他<strong>暂存一个可以直接取到的地方</strong> --&gt; 内存：缓存</p>
<p>我们再次查询的相同数据的时候，直接走缓存，不走数据库了</p>
</blockquote>
<ol>
<li>什么是缓存[Cache]？
<ul>
<li>存在内存中的临时数据<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210202064249303.png" alt="image-20210202064249303" loading="lazy"></li>
<li>将用户经常查询的数据放在缓存（内存）中，用户去查询数据就不用从磁盘上（关系型数据库文件）查询，从缓存中查询，从而提高查询效率，<strong>解决了高并发系统的性能问题</strong></li>
</ul>
</li>
<li>为什么使用缓存？
<ul>
<li><strong>减少和数据库的交互次数，减少系统开销，提高系统效率</strong></li>
</ul>
</li>
<li>什么样的数据可以使用缓存？
<ul>
<li>经常查询并且不经常改变的数据 【可以使用缓存】</li>
</ul>
</li>
</ol>
<h3 id="132-mybatis缓存"><a class="markdownIt-Anchor" href="#132-mybatis缓存"></a> 13.2 MyBatis缓存</h3>
<ul>
<li>
<p>MyBatis包含一个非常强大的查询缓存特性，它可以非常方便的定制和配置缓存，缓存可以极大的提高查询效率。</p>
</li>
<li>
<p>MyBatis系统中默认定义了两级缓存：</p>
<p>一级缓存和二级缓存</p>
<ul>
<li>默认情况下，只有一级缓存开启（SqlSession级别的缓存，也称为本地缓存）</li>
</ul>
</li>
<li>
<p>二级缓存需要手动开启和配置，他是基于namespace级别的缓存。</p>
<ul>
<li>为了提高可扩展性，MyBatis定义了缓存接口Cache。我们可以通过实现Cache接口来定义二级缓存。</li>
</ul>
</li>
</ul>
<h3 id="133-一级缓存"><a class="markdownIt-Anchor" href="#133-一级缓存"></a> 13.3 一级缓存</h3>
<ul>
<li>一级缓存也叫<strong>本地缓存：SqlSession</strong>
<ul>
<li>与数据库同一次会话期间<strong>查询到的数据会放在本地缓存中</strong></li>
<li>以后如果需要获取相同的数据，直接从缓存中拿，没必要再去查询数据库</li>
</ul>
</li>
</ul>
<p>测试步骤：</p>
<ol>
<li>
<p>开启日志</p>
</li>
<li>
<p>测试在一个Session中查询两次记录</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SqlSession sqlSession = MybatisUtils.getSqlSession();</span><br><span class="line">    UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    User user = mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=====================================&quot;</span>);</span><br><span class="line"></span><br><span class="line">    User user2 =  mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user2 == user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>查看日志输出</p>
</li>
</ol>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20200623165129955.png" alt="在这里插入图片描述" loading="lazy"><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/../../../code%2520file/markdown/%25E5%2590%258E%25E7%25AB%25AF/images/image-20210202074029457.png" alt="image-20210202074029457" loading="lazy"></p>
<p><strong>缓存失效的情况：</strong></p>
<ol>
<li>
<p><strong>查询不同</strong>的东西<img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/image-20210202074223968.png" alt="image-20210202074223968" loading="lazy"></p>
</li>
<li>
<p>增删改操作，可能会改变原来的数据，所以必定会刷新缓存</p>
</li>
<li>
<p>查询不同的Mapper.xml</p>
</li>
<li>
<p>手动清理缓存</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlSession.clearCache();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="134-使用步骤"><a class="markdownIt-Anchor" href="#134-使用步骤"></a> 13.4 使用步骤</h3>
<blockquote>
<p>使用步骤</p>
</blockquote>
<p>1、开启全局缓存 【<code>mybatis-config.xml</code>】</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>2、去每个<code>mapper.xml</code>中配置使用二级缓存，这个配置非常简单；【<code>xxxMapper.xml</code>】</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>官方示例=====&gt;查看官方文档</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;cache</span><br><span class="line"> eviction=&quot;FIFO&quot;</span><br><span class="line"> flushInterval=&quot;60000&quot;</span><br><span class="line"> size=&quot;512&quot;</span><br><span class="line"> readOnly=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>这个更高级的配置创建了一个 FIFO 缓存，每隔 60 秒刷新，最多可以存储结果对象或列表的 512 个引用，而且返回的对象被认为是只读的，因此对它们进行修改可能会在不同线程中的调用者产生冲突。</p>
<p>3、代码测试</p>
<ul>
<li>所有的实体类先<strong>实现序列化接口</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>测试代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testQueryUserById</span><span class="params">()</span></span>&#123;</span><br><span class="line">   SqlSession session = MybatisUtils.getSession();</span><br><span class="line">   SqlSession session2 = MybatisUtils.getSession();</span><br><span class="line"></span><br><span class="line">   UserMapper mapper = session.getMapper(UserMapper.class);</span><br><span class="line">   UserMapper mapper2 = session2.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">   User user = mapper.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user);</span><br><span class="line">   session.close();</span><br><span class="line"></span><br><span class="line">   User user2 = mapper2.queryUserById(<span class="number">1</span>);</span><br><span class="line">   System.out.println(user2);</span><br><span class="line">   System.out.println(user==user2);</span><br><span class="line"></span><br><span class="line">   session2.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="135-结论"><a class="markdownIt-Anchor" href="#135-结论"></a> 13.5 结论</h3>
<blockquote>
<p>结论</p>
</blockquote>
<ul>
<li>
<p>只要开启了二级缓存，我们在同一个Mapper中的查询，可以在二级缓存中拿到数据</p>
</li>
<li>
<p>查出的数据都会被默认先放在一级缓存中</p>
</li>
<li>
<p>只有会话提交或者关闭以后，一级缓存中的数据才会转到二级缓存中</p>
</li>
<li>
<p>小技巧：在增删的时候不刷新缓存</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">flushCache</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="136缓存原理"><a class="markdownIt-Anchor" href="#136缓存原理"></a> 13.6缓存原理</h3>
<blockquote>
<p>缓存原理图</p>
</blockquote>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013095849984.png" alt="在这里插入图片描述" loading="lazy"></p>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013093137919.png" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="1310-ehcache"><a class="markdownIt-Anchor" href="#1310-ehcache"></a> 13.10 EhCache</h3>
<p><img src="/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/20201013093206643.png" alt="在这里插入图片描述" loading="lazy"></p>
<p>第三方缓存实现–EhCache: 查看百度百科</p>
<p>Ehcache是一种广泛使用的java分布式缓存，用于通用缓存；</p>
<p><strong>要在应用程序中使用Ehcache，需要引入依赖的jar包</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在<code>UserMapper.xml</code>中使用对应的缓存即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span> = <span class="string">“org.acme.FooMapper”</span> &gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span> = <span class="string">“org.mybatis.caches.ehcache.EhcacheCache”</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>编写<code>ehcache.xml</code>文件，如果在加载时未找到/<code>ehcache.xml</code>资源或出现问题，则将使用默认配置。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;http://ehcache.org/ehcache.xsd&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">updateCheck</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      diskStore：为缓存路径，ehcache分为内存和磁盘两级，此属性定义磁盘的缓存位置。参数解释如下：</span></span><br><span class="line"><span class="comment">      user.home – 用户主目录</span></span><br><span class="line"><span class="comment">      user.dir – 用户当前工作目录</span></span><br><span class="line"><span class="comment">      java.io.tmpdir – 默认临时文件路径</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;./tmpdir/Tmp_EhCache&quot;</span>/&gt;</span></span><br><span class="line">   </span><br><span class="line">   &lt;defaultCache</span><br><span class="line">           eternal=&quot;false&quot;</span><br><span class="line">           maxElementsInMemory=&quot;10000&quot;</span><br><span class="line">           overflowToDisk=&quot;false&quot;</span><br><span class="line">           diskPersistent=&quot;false&quot;</span><br><span class="line">           timeToIdleSeconds=&quot;1800&quot;</span><br><span class="line">           timeToLiveSeconds=&quot;259200&quot;</span><br><span class="line">           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;</span><br><span class="line"></span><br><span class="line">   &lt;cache</span><br><span class="line">           name=&quot;cloud_user&quot;</span><br><span class="line">           eternal=&quot;false&quot;</span><br><span class="line">           maxElementsInMemory=&quot;5000&quot;</span><br><span class="line">           overflowToDisk=&quot;false&quot;</span><br><span class="line">           diskPersistent=&quot;false&quot;</span><br><span class="line">           timeToIdleSeconds=&quot;1800&quot;</span><br><span class="line">           timeToLiveSeconds=&quot;1800&quot;</span><br><span class="line">           memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt;</span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      defaultCache：默认缓存策略，当ehcache找不到定义的缓存时，则使用这个缓存策略。只能定义一个。</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     name:缓存名称。</span></span><br><span class="line"><span class="comment">     maxElementsInMemory:缓存最大数目</span></span><br><span class="line"><span class="comment">     maxElementsOnDisk：硬盘最大缓存个数。</span></span><br><span class="line"><span class="comment">     eternal:对象是否永久有效，一但设置了，timeout将不起作用。</span></span><br><span class="line"><span class="comment">     overflowToDisk:是否保存到磁盘，当系统当机时</span></span><br><span class="line"><span class="comment">     timeToIdleSeconds:设置对象在失效前的允许闲置时间（单位：秒）。仅当eternal=false对象不是永久有效时使用，可选属性，默认值是0，也就是可闲置时间无穷大。</span></span><br><span class="line"><span class="comment">     timeToLiveSeconds:设置对象在失效前允许存活时间（单位：秒）。最大时间介于创建时间和失效时间之间。仅当eternal=false对象不是永久有效时使用，默认是0.，也就是对象存活时间无穷大。</span></span><br><span class="line"><span class="comment">     diskPersistent：是否缓存虚拟机重启期数据 Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">     diskSpoolBufferSizeMB：这个参数设置DiskStore（磁盘缓存）的缓存区大小。默认是30MB。每个Cache都应该有自己的一个缓冲区。</span></span><br><span class="line"><span class="comment">     diskExpiryThreadIntervalSeconds：磁盘失效线程运行时间间隔，默认是120秒。</span></span><br><span class="line"><span class="comment">     memoryStoreEvictionPolicy：当达到maxElementsInMemory限制时，Ehcache将会根据指定的策略去清理内存。默认策略是LRU（最近最少使用）。你可以设置为FIFO（先进先出）或是LFU（较少使用）。</span></span><br><span class="line"><span class="comment">     clearOnFlush：内存数量最大时是否清除。</span></span><br><span class="line"><span class="comment">     memoryStoreEvictionPolicy:可选策略有：LRU（最近最少使用，默认策略）、FIFO（先进先出）、LFU（最少访问次数）。</span></span><br><span class="line"><span class="comment">     FIFO，first in first out，这个是大家最熟的，先进先出。</span></span><br><span class="line"><span class="comment">     LFU， Less Frequently Used，就是上面例子中使用的策略，直白一点就是讲一直以来最少被使用的。如上面所讲，缓存的元素有一个hit属性，hit值最小的将会被清出缓存。</span></span><br><span class="line"><span class="comment">     LRU，Least Recently Used，最近最少使用的，缓存的元素有一个时间戳，当缓存容量满了，而又需要腾出地方来缓存新的元素的时候，那么现有缓存元素中时间戳离当前时间最远的元素将被清出缓存。</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>合理的使用缓存，可以让我们程序的性能大大提升！</strong></p>
<h2 id="14-mybatis总结"><a class="markdownIt-Anchor" href="#14-mybatis总结"></a> 14、Mybatis总结</h2>
<h3 id="141-参考文章"><a class="markdownIt-Anchor" href="#141-参考文章"></a> 14.1 参考文章</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/vy-TUFa1Rb69ekxiEYGRqw">狂神说MyBatis01：第一个程序</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/efqEupNSPZUKqrRoGAnxzQ">狂神说MyBatis02：CRUD操作及配置解析</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/LXXIR7W_kZBHPIDqkNwrLg">狂神说MyBatis03：ResultMap及分页</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/3x3ynp5qhGNP-leeOxBU6g">狂神说MyBatis04：使用注解开发</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Dpt0LHTgx0kL7RCk8PZ2aw">狂神说MyBatis05：一对多和多对一处理</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/gtXsTG2naMTDnC6aqQICMg">狂神说MyBatis06：动态SQL</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MwkfQNMXD6oO3dOaQYDdGA">狂神说MyBatis07：缓存</a></li>
</ul>
<h3 id="142-所有代码"><a class="markdownIt-Anchor" href="#142-所有代码"></a> 14.2 所有代码</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://gitee.com/huangjialin3344/mybatis-study-master">代码已经上传至码云</a></li>
</ul>
<h2 id="15-mybatis24道练习题"><a class="markdownIt-Anchor" href="#15-mybatis24道练习题"></a> 15、Mybatis–24道练习题</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38616503/article/details/107149495">24道练习题</a></li>
</ul>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/donate/zhifubao.jpg"><img loading="lazy" src="/images/donate/zhifubao.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/donate/weixin.png"><img loading="lazy" src="/images/donate/weixin.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/donate/weixin.png"><img loading="lazy" src="/images/donate/weixin.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>AI Jiang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/" title="狂神说Mybatis">http://example.com/2021/03/31/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/03/31/python%E7%AE%80%E5%8D%95%E7%88%AC%E5%8F%96%E6%95%B0%E6%8D%AE/" rel="prev" title="python简单数据爬取"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">python简单数据爬取</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/03/30/%E7%8B%82%E7%A5%9E%E8%AF%B4ajax/" rel="next" title="狂神说ajax"><span class="post-nav-text">狂神说ajax</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>点击按钮跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+狂神说Mybatis">GitHub Issues</a><a class="hty-button hty-button--raised" id="github-discussions" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/discussions/new">GitHub Discussions</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> AI Jiang</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.4.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.5.1</span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>