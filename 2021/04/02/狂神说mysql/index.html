<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="AI Jiang"><meta name="copyright" content="AI Jiang"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>狂神说mysql | Hexo</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.24/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_ed8vp4atwoj.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>document.addEventListener("DOMContentLoaded", () => {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
});
</script><link rel="shortcut icon" type="image/svg+xml" href="/imgaes/avatar.jpg"><link rel="mask-icon" href="/imgaes/avatar.jpg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"example.com","root":"/","title":"AI.Jiang的笔记","version":"1.5.1","mode":"auto","copycode":true,"page":{"isPost":true},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><meta name="description" content="一.什么是数据库  数据库 ( DataBase , 简称DB ) 概念 : 长期存放在计算机内,有组织,可共享的大量数据的集合,是一个数据 “仓库” 作用 : 保存,并能安全管理数据(如:增删改查等),减少冗余…  数据库总览 :  关系型数据库 ( SQL )  非关系型数据库 ( NOSQL )    MySQL , Oracle , SQL Server , SQLite , DB2 ,">
<meta property="og:type" content="article">
<meta property="og:title" content="狂神说mysql">
<meta property="og:url" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="一.什么是数据库  数据库 ( DataBase , 简称DB ) 概念 : 长期存放在计算机内,有组织,可共享的大量数据的集合,是一个数据 “仓库” 作用 : 保存,并能安全管理数据(如:增删改查等),减少冗余…  数据库总览 :  关系型数据库 ( SQL )  非关系型数据库 ( NOSQL )    MySQL , Oracle , SQL Server , SQLite , DB2 ,">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkRBbGdFaGljUWZ5VWVrbGVmclVoWWliSWV3M3ZvOE4xem95OWljMm5PVlZKV3RqWnNYZzdUV3NEREdoQUk1clNHWjB0blE2T0lPOE1CZy82NDA-1619184421663">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkRBbGdFaGljUWZ5VWVrbGVmclVoWWlia1lJNWpma1lqOGhwaFl2N0dFZFFTY3pqYjFpY1F3aldHbFdxaEcyNlZPMXk1dGdNMk9jU3RhQS82NDA-1619184423127">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155421241.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155937537-1619184425511.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101160008573-1619184427090.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101160416042-1619184428432.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101210833903-1619184429592.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155747473-1619184431088.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFPR3BEaWNMendTNk5KVkFlTEVDdTJyeDJxYm9HVTM2UzloWExvdjB4MGM1dnpaQWNleVNTWG5BLzY0MA-1619184434061">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVEySVR4aWJSUnNRdXVxaWJIb3JocXpZSTgzUVlLUlVWcE1MQ1BBMWNoS1EzOWVVRlFpYkoyZndXRmcvNjQw-1619184438542">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFMWFJyZm1RamJVdDNPN3NMdzBLS3Y5VXRyaWFUcjYwSnNwWElaNjlIa2VPaWFnejg2Q0UzYTlXZy82NDA-1619184442836-1619184457889">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFzak9QZnROZm4xaWJYU1A4T0lZbnNKYWFQQzhkYTYxakN6Y2Jka3FiQXBpYlFXZ1E3S0JqWWJ1dy82NDA-1619184459700">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFjaWIzT3dHdFdFSmtFRTJiaWFhNGpUM3hva1kxVWljUFQxTVFjUU5zYTFFc2ppYUlxTTF2dnlVUGpnLzY0MA-1619184461375">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFwbVNGTWxKNGZERmRHb1dPc1R1TmZGWnEwWEtXMUd5aWJkWkhVMkY3M0RUZXpNWU0xSzBkYzJBLzY0MA-1619184464658">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVE1dGs4WHROdE5HblVnZXZoRlN6d1RVck83QW1iWFpGdW1UaWJ0NDNTRElJOW5PUVk5N090UWRRLzY0MA-1619184466787">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210109205014544-1619184470599.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210109204958246-1619184469036.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210116210738405-1619184472955.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210116212208887-1619184477250.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRUMkdUc09kY2o3bk91b1hUSWdFZnJOTU44WUd5Z1dkckZVVExlNDF4TnFjaGhmR2RxNkNIdHcvNjQw-1619184484303">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRrOHhsNThvUDZjaDY3WmliaWNVMWZuMk83TGs0dUxaeWlhRzhwOFpoa2w0b0YxR1VpYmJQRjBpYXhJUS82NDA-1619184486171">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRvd1FmMUhIYVlJaWNFTFlLblU5a0RlYUZIbmZ4MEdZVzZBc0V3b1R5U3l3bjkxaWE4V3oyc1hpYUEvNjQw-1619184488042">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkR3NWFaTGVoSVl6d0xwckNmcWR4U2pzbTJ3ZmljSHJTRXpKaWFKQkdhS1dwYXRRN3NJU2liOU1nQ1EvNjQw-1619184489391">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125082220093-1619184498069.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125082234268-1619184499449.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209190431445-1619184501135.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209185644057-1619184505623.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209185117758-1619184508063.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209190457067-1619184509751.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209191259746-1619184511159.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20191217133545374-1619184516270.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SmY3ZGVvbHdRYTQ0clh2aWNJaFhaME5HTDRzWktnOG5pY0JHcllsRUJKaDFWM3ltSjRXekJ4OXpYc0laeVBZRkFESkJ6bjBpYkNtZ2lhdUEvNjQw-1619184518981">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125153602454-1619184521572.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125153403050-1619184524725.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SmY3ZGVvbHdRYTQ0clh2aWNJaFhaME56Z1dKV2V5WVljZjFEeTNpYmZONjZTaWFaUW1xVEYzSHY4SEJqcjF6SW93WGgyMDFwRWpVenlKdy82NDA-1619184528052">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125171323187-1619184531781.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160718151-1619184538569.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160825975-1619184540036.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160904322-1619184544505.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625162500274-1619184546328.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210126093609776-1619184548500.png">
<meta property="og:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210126093703710-1619184550118.png">
<meta property="article:published_time" content="2021-04-02T05:58:10.000Z">
<meta property="article:modified_time" content="2021-04-23T13:29:14.504Z">
<meta property="article:author" content="AI Jiang">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkRBbGdFaGljUWZ5VWVrbGVmclVoWWliSWV3M3ZvOE4xem95OWljMm5PVlZKV3RqWnNYZzdUV3NEREdoQUk1clNHWjB0blE2T0lPOE1CZy82NDA-1619184421663"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="AI Jiang"><img width="96" loading="lazy" src="/Yun.png" alt="AI Jiang"></a><div class="site-author-name"><a href="/about/">AI Jiang</a></div><a class="site-name" href="/about/site.html">Hexo</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">19</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">7</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">7</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://qm.qq.com/cgi-bin/qm/qr?k=epvxdq1sknJe9JMj6J1LsBw4a6cI_2ln&amp;jump_from=webapi" title="QQ 群 389401003" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/JiangZhijianZhejaing" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://weibo.com/jizhideyunyoujun" title="微博" target="_blank" style="color:#E6162D"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-weibo-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.douban.com/people/yunyoujun/" title="豆瓣" target="_blank" style="color:#007722"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-douban-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=247102977" title="网易云音乐" target="_blank" style="color:#C20C0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://www.zhihu.com/people/yunyoujun/" title="知乎" target="_blank" style="color:#0084FF"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-zhihu-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/1579790" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/YunYouJun" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/elpsycn" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:me@yunyoujun.cn" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.now.sh/" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-send-plane-2-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text"> 一.什么是数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93-database-%E7%AE%80%E7%A7%B0db"><span class="toc-number">1.1.</span> <span class="toc-text"> 数据库 ( DataBase , 简称DB )</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%BB%E8%A7%88"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 数据库总览 :</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93-sql"><span class="toc-number">1.1.1.1.</span> <span class="toc-text"> 关系型数据库 ( SQL )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93-nosql"><span class="toc-number">1.1.1.2.</span> <span class="toc-text"> 非关系型数据库 ( NOSQL )</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFdbms"><span class="toc-number">1.2.</span> <span class="toc-text"> 什么是DBMS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 数据库管理系统</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E7%AE%80%E4%BB%8B"><span class="toc-number">1.3.</span> <span class="toc-text"> MySQL简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 特点 :</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sqlyog"><span class="toc-number">1.4.</span> <span class="toc-text"> SQLyog</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8sqlyog%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E8%87%AA%E5%B7%B1%E5%AE%8C%E6%88%90%E4%BB%A5%E4%B8%8B%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 使用SQLyog管理工具自己完成以下操作 :</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A40%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text"> 常用命令（0）连接数据库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text"> 二.数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21%E7%BB%93%E6%9E%84%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E5%88%86%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1结构化查询语句分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A41%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 常见命令（1）数据库操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95"><span class="toc-number">2.1.2.</span> <span class="toc-text"> 学习方法：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8%E9%87%8D%E7%82%B924"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2创建数据表(重点+2.4)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23%E6%95%B0%E6%8D%AE%E5%80%BC%E5%92%8C%E5%88%97%E7%B1%BB%E5%9E%8B%E9%87%8D%E7%82%B9"><span class="toc-number">2.3.</span> <span class="toc-text"> 2.3数据值和列类型（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.1.</span> <span class="toc-text"> 列类型 :</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.1.1.</span> <span class="toc-text"> 1.数值类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.1.2.</span> <span class="toc-text"> 2.字符串类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%9E%8B%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.3.1.3.</span> <span class="toc-text"> 3.日期和时间型数值类型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7%E9%87%8D%E7%82%B9"><span class="toc-number">2.4.</span> <span class="toc-text"> 2.4数据字段属性（重点）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#unsigned"><span class="toc-number">2.4.0.1.</span> <span class="toc-text"> UnSigned</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zerofill"><span class="toc-number">2.4.0.2.</span> <span class="toc-text"> ZEROFILL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#auto_increment"><span class="toc-number">2.4.0.3.</span> <span class="toc-text"> Auto_InCrement</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#null-%E5%92%8C-not-null"><span class="toc-number">2.4.0.4.</span> <span class="toc-text"> NULL 和 NOT NULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#default"><span class="toc-number">2.4.0.5.</span> <span class="toc-text"> DEFAULT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A42%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%AE%9A%E4%B9%89%E7%9A%84%E9%80%86%E5%90%91%E6%93%8D%E4%BD%9C"><span class="toc-number">2.4.1.</span> <span class="toc-text"> 常见命令（2）查看数据库表定义的逆向操作：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text"> 2.5数据表的类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%95%E6%93%8E"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 常见数据库引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84-myisam-%E4%B8%8E-innodb-%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.5.1.1.</span> <span class="toc-text"> 常见的 MyISAM 与 InnoDB 类型：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E6%93%8E%E7%9A%84%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 引擎的物理存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">2.5.3.</span> <span class="toc-text"> 注意 :</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEcharset"><span class="toc-number">2.5.3.1.</span> <span class="toc-text"> 设置charset</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.6.</span> <span class="toc-text"> 2.6修改数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8-alter-table"><span class="toc-number">2.6.1.</span> <span class="toc-text"> 修改表 ( ALTER TABLE )</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">2.6.2.</span> <span class="toc-text"> 删除数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">2.6.3.</span> <span class="toc-text"> 注意点：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89mysql%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text"> 三.MySQL数据管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31%E5%A4%96%E9%94%AE%E5%86%99%E4%B8%80%E9%81%8D"><span class="toc-number">3.1.</span> <span class="toc-text"> 3,1外键（写一遍）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.1.</span> <span class="toc-text"> 外键概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E4%BD%9C%E7%94%A8"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 外键作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%A4%96%E9%94%AE"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 创建外键</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%8C%87%E5%AE%9A%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.1.3.1.</span> <span class="toc-text"> 1建表时指定外键约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E5%BB%BA%E8%A1%A8%E5%90%8E%E4%BF%AE%E6%94%B9"><span class="toc-number">3.1.3.2.</span> <span class="toc-text"> 2建表后修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE"><span class="toc-number">3.1.4.</span> <span class="toc-text"> 删除外键</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32dml%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E8%AF%AD%E8%A8%80"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2DML语言(数据库管理语言)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.3添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#insert%E5%91%BD%E4%BB%A4%E8%83%8C"><span class="toc-number">3.3.1.</span> <span class="toc-text"> INSERT命令(背)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">3.4.</span> <span class="toc-text"> 3.4修改数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#update%E5%91%BD%E4%BB%A4"><span class="toc-number">3.4.1.</span> <span class="toc-text"> update命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where%E6%9D%A1%E4%BB%B6%E5%AD%90%E5%8F%A5"><span class="toc-number">3.4.2.</span> <span class="toc-text"> where条件子句</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">3.5.</span> <span class="toc-text"> 3.4删除数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#delete%E5%91%BD%E4%BB%A4"><span class="toc-number">3.5.1.</span> <span class="toc-text"> DELETE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#truncate%E5%91%BD%E4%BB%A4"><span class="toc-number">3.5.2.</span> <span class="toc-text"> TRUNCATE命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E5%8C%BA%E5%88%AB%E4%BA%8Edelete%E5%91%BD%E4%BB%A4"><span class="toc-number">3.5.3.</span> <span class="toc-text"> 注意：区别于DELETE命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E4%BD%BF%E7%94%A8dql%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text"> 四.使用DQL查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dql%E8%AF%AD%E8%A8%80-data-query-language-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">4.0.1.</span> <span class="toc-text"> DQL语言( Data Query Language 数据查询语言 )**</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select%E8%AF%AD%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text"> SELECT语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 指定查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#as-%E5%AD%90%E5%8F%A5%E4%BD%9C%E4%B8%BA%E5%88%AB%E5%90%8D"><span class="toc-number">4.1.2.</span> <span class="toc-text"> AS 子句作为别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#distinct%E5%85%B3%E9%94%AE%E5%AD%97%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.1.3.</span> <span class="toc-text"> DISTINCT关键字的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E5%88%97"><span class="toc-number">4.1.4.</span> <span class="toc-text"> 使用表达式的列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.1.5.</span> <span class="toc-text"> where条件语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.1.5.1.</span> <span class="toc-text"> 逻辑操作符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2-%E6%AF%94%E8%BE%83%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.1.5.2.</span> <span class="toc-text"> 模糊查询 ：比较操作符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.1.6.</span> <span class="toc-text"> 连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#join-%E5%AF%B9%E6%AF%94"><span class="toc-number">4.1.6.1.</span> <span class="toc-text"> JOIN 对比</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">4.1.6.2.</span> <span class="toc-text"> 自连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E5%92%8C%E5%88%86%E9%A1%B5"><span class="toc-number">4.1.7.</span> <span class="toc-text"> 排序和分页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.1.8.</span> <span class="toc-text"> 子查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%92%8C%E8%BF%87%E6%BB%A4"><span class="toc-number">4.1.9.</span> <span class="toc-text"> 分组和过滤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94mysql%E5%87%BD%E6%95%B0"><span class="toc-number">5.</span> <span class="toc-text"> 五.MySQL函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">5.0.1.</span> <span class="toc-text"> 常用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0where%E4%B8%8D%E8%83%BDuse"><span class="toc-number">5.0.2.</span> <span class="toc-text"> 聚合函数where不能use</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#md5-%E5%8A%A0%E5%AF%86"><span class="toc-number">5.0.3.</span> <span class="toc-text"> MD5 加密</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-md5%E7%AE%80%E4%BB%8B"><span class="toc-number">5.0.3.1.</span> <span class="toc-text"> 一、MD5简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%8A%A0%E5%AF%86"><span class="toc-number">5.0.3.2.</span> <span class="toc-text"> 二、实现数据加密</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E4%BA%8B%E5%8A%A1%E5%92%8C%E7%B4%A2%E5%BC%95"><span class="toc-number">6.</span> <span class="toc-text"> 六.事务和索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1transaction"><span class="toc-number">6.1.</span> <span class="toc-text"> 事务transaction</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.1.1.</span> <span class="toc-text"> 什么是事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84acid%E5%8E%9F%E5%88%99"><span class="toc-number">6.1.1.1.</span> <span class="toc-text"> 事务的ACID原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7atomic"><span class="toc-number">6.1.1.2.</span> <span class="toc-text"> 原子性(Atomic)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E8%87%B4%E6%80%A7consist"><span class="toc-number">6.1.1.3.</span> <span class="toc-text"> 一致性(Consist)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E6%80%A7isolated%E4%B8%A4%E4%B8%AA%E6%88%96%E8%80%85%E4%BB%A5%E4%B8%8A%E4%BA%8B%E5%8A%A1"><span class="toc-number">6.1.1.4.</span> <span class="toc-text"> **隔离性(Isolated)**两个或者以上事务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%94%E7%A6%BB%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">6.1.1.4.1.</span> <span class="toc-text"> 隔离的问题：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E8%AF%BB%E6%9C%AA%E6%8F%90%E4%BA%A4read-uncommittedq%E8%84%8F%E8%AF%BB%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-number">6.1.1.5.</span> <span class="toc-text"> （1）读未提交：read uncommitted（Q:脏读，不可重复读）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E8%AF%BB%E5%B7%B2%E6%8F%90%E4%BA%A4read-committedq%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="toc-number">6.1.1.5.1.</span> <span class="toc-text"> （2）读已提交：read committed（Q:不可重复读）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BBrepeatable-readq%E5%B9%BB%E8%AF%BB"><span class="toc-number">6.1.1.5.2.</span> <span class="toc-text"> （3）可重复读：repeatable read（Q:幻读）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E4%B8%B2%E8%A1%8C%E5%8C%96serializable%E8%A7%A3%E5%86%B3%E4%B8%80%E5%88%87%E9%97%AE%E9%A2%98%E4%BD%86%E6%98%AF%E6%85%A2"><span class="toc-number">6.1.1.5.3.</span> <span class="toc-text"> （4）串行化：serializable(解决一切问题但是慢)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E6%80%A7durable"><span class="toc-number">6.1.1.6.</span> <span class="toc-text"> 持久性(Durable)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">6.1.2.</span> <span class="toc-text"> 基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">6.1.3.</span> <span class="toc-text"> 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.</span> <span class="toc-text"> 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">6.2.1.</span> <span class="toc-text"> 索引的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB"><span class="toc-number">6.2.2.</span> <span class="toc-text"> 分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.2.1.</span> <span class="toc-text"> 主键索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.2.2.</span> <span class="toc-text"> 唯一索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.2.3.</span> <span class="toc-text"> 常规索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.2.4.</span> <span class="toc-text"> 全文索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E6%B5%8B%E8%AF%95%E7%B4%A2%E5%BC%95"><span class="toc-number">6.2.3.</span> <span class="toc-text"> 拓展：测试索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#current_timestamp"><span class="toc-number">6.2.3.1.</span> <span class="toc-text"> Current_timestamp:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%87%86%E5%88%99"><span class="toc-number">6.2.4.</span> <span class="toc-text"> 索引准则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">6.2.5.</span> <span class="toc-text"> 索引的数据结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E6%9D%83%E9%99%90%E5%8F%8A%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">7.</span> <span class="toc-text"> 七.权限及如何设计数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">7.0.1.</span> <span class="toc-text"> 用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8sqlyog-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%B9%B6%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90%E6%BC%94%E7%A4%BA"><span class="toc-number">7.0.1.1.</span> <span class="toc-text"> 用SQLyog 创建用户并授予权限演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-number">7.0.1.2.</span> <span class="toc-text"> 基本命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E8%A7%A3%E9%87%8A"><span class="toc-number">7.0.1.3.</span> <span class="toc-text"> 权限解释</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mysql%E5%A4%87%E4%BB%BD"><span class="toc-number">7.0.2.</span> <span class="toc-text"> MySQL备份</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA"><span class="toc-number">7.0.2.1.</span> <span class="toc-text"> 导入导出</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%84%E8%8C%83%E5%8C%96%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">7.1.</span> <span class="toc-text"> 规范化数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">7.1.1.</span> <span class="toc-text"> 为什么需要数据库设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">7.1.2.</span> <span class="toc-text"> 三大范式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%ABjdbc"><span class="toc-number">8.</span> <span class="toc-text"> 八：JDBC</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#jdbc%E6%B5%8B%E8%AF%95"><span class="toc-number">8.1.</span> <span class="toc-text"> jdbc测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#drivermanager"><span class="toc-number">8.1.1.</span> <span class="toc-text"> DriverManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#url"><span class="toc-number">8.1.2.</span> <span class="toc-text"> url</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connection"><span class="toc-number">8.1.3.</span> <span class="toc-text"> Connection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#statement%E5%90%91%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%91%E9%80%81sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">8.1.4.</span> <span class="toc-text"> Statement：向数据库发送sql语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resultset%E5%8F%AA%E6%9C%89%E6%9F%A5%E8%AF%A2%E6%98%AF%E8%BF%99%E4%B8%AA"><span class="toc-number">8.1.5.</span> <span class="toc-text"> ResultSet：只有查询是这个</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E5%B7%A5%E5%85%B7%E7%B1%BBjdbcutils"><span class="toc-number">8.1.6.</span> <span class="toc-text"> 代码实现&amp;工具类JdbcUtils</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9Dsql%E6%B3%A8%E5%85%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">9.</span> <span class="toc-text"> 九：SQL注入的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E7%AD%96preparedstatement"><span class="toc-number">9.0.1.</span> <span class="toc-text"> 对策：PreparedStatement</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#idea%E9%93%BE%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">9.1.</span> <span class="toc-text"> IDEA链接数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jdbc%E6%93%8D%E4%BD%9C%E4%BA%8B%E5%8A%A1"><span class="toc-number">9.2.</span> <span class="toc-text"> JDBC操作事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">9.3.</span> <span class="toc-text"> 数据库连接池</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%BA%90%E6%95%B0%E6%8D%AE%E6%BA%90%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.3.1.</span> <span class="toc-text"> 开源数据源实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#dbcp"><span class="toc-number">9.3.1.1.</span> <span class="toc-text"> DBCP</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="AI Jiang"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">狂神说mysql</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2021-04-02 13:58:10" itemprop="dateCreated datePublished" datetime="2021-04-02T13:58:10+08:00">2021-04-02</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-04-23 21:29:14" itemprop="dateModified" datetime="2021-04-23T21:29:14+08:00">2021-04-23</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">数据库</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">数据库</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h1 id="一什么是数据库"><a class="markdownIt-Anchor" href="#一什么是数据库"></a> 一.什么是数据库</h1>
<h2 id="数据库-database-简称db"><a class="markdownIt-Anchor" href="#数据库-database-简称db"></a> 数据库 ( DataBase , 简称<strong>DB</strong> )</h2>
<p><strong>概念</strong> : 长期存放在计算机内,有组织,可共享的大量数据的集合,是一个数据 “仓库”</p>
<p><strong>作用</strong> : 保存,并能安全管理数据(如:增删改查等),减少冗余…</p>
<h3 id="数据库总览"><a class="markdownIt-Anchor" href="#数据库总览"></a> 数据库总览 :</h3>
<h4 id="关系型数据库-sql"><a class="markdownIt-Anchor" href="#关系型数据库-sql"></a> 关系型数据库 ( SQL )</h4>
<h4 id="非关系型数据库-nosql"><a class="markdownIt-Anchor" href="#非关系型数据库-nosql"></a> 非关系型数据库 ( NOSQL )</h4>
<ul>
<li>
<ul>
<li>MySQL , Oracle , SQL Server , SQLite , DB2 , …</li>
<li>关系型数据库通过外键关联来建立表与表之间的关系</li>
</ul>
</li>
<li>
<ul>
<li>Redis , MongoDB , …</li>
<li>非关系型数据库通常指数据<strong>以对象的形式存储在数据库中</strong>，而对象之间的关系通过每个对象自身的属性来决定</li>
</ul>
</li>
</ul>
<h2 id="什么是dbms"><a class="markdownIt-Anchor" href="#什么是dbms"></a> 什么是DBMS</h2>
<h3 id="数据库管理系统"><a class="markdownIt-Anchor" href="#数据库管理系统"></a> 数据库管理系统</h3>
<p><strong>( DataBase Management System )</strong></p>
<p>数据库管理软件 , 科学组织和存储数据 , 高效地获取和维护数据</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkRBbGdFaGljUWZ5VWVrbGVmclVoWWliSWV3M3ZvOE4xem95OWljMm5PVlZKV3RqWnNYZzdUV3NEREdoQUk1clNHWjB0blE2T0lPOE1CZy82NDA-1619184421663" alt="img" loading="lazy"></p>
<p>因为我们要学习的MySQL应该算是一个<strong>数据库管理系统.</strong></p>
<h2 id="mysql简介"><a class="markdownIt-Anchor" href="#mysql简介"></a> MySQL简介</h2>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SkRBbGdFaGljUWZ5VWVrbGVmclVoWWlia1lJNWpma1lqOGhwaFl2N0dFZFFTY3pqYjFpY1F3aldHbFdxaEcyNlZPMXk1dGdNMk9jU3RhQS82NDA-1619184423127" alt="img" loading="lazy"></p>
<p><strong>概念 :</strong> 是现在<strong>流行</strong>的<strong>开源</strong>的,<strong>免费</strong>的 <strong>关系型</strong>数据库</p>
<p><strong>历史 :</strong> 由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。</p>
<h3 id="特点"><a class="markdownIt-Anchor" href="#特点"></a> 特点 :</h3>
<ul>
<li>免费 , 开源数据库</li>
<li>小巧 , 功能齐全</li>
<li>可运行于Windows或Linux操作系统</li>
<li>可适用于中小型甚至大型网站应用</li>
</ul>
<h2 id="sqlyog"><a class="markdownIt-Anchor" href="#sqlyog"></a> SQLyog</h2>
<p>可手动操作,管理MySQL数据库的软件工具</p>
<p>特点 : 简洁 , 易用 , 图形化</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155421241.png" alt="image-20210101155421241" loading="lazy"></p>
<p><strong>mysql的数据存放在data下面</strong></p>
<h3 id="使用sqlyog管理工具自己完成以下操作"><a class="markdownIt-Anchor" href="#使用sqlyog管理工具自己完成以下操作"></a> 使用SQLyog管理工具自己完成以下操作 :</h3>
<ul>
<li>
<p>连接本地MySQL数据库</p>
</li>
<li>
<p>新建MySchool数据库</p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155937537-1619184425511.png" alt="image-20210101155937537" loading="lazy"></p>
</li>
<li>
<p>查询历史记录</p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101160008573-1619184427090.png" alt="image-20210101160008573" loading="lazy"></p>
</li>
<li>
<p>新建表</p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101160416042-1619184428432.png" alt="image-20210101160416042" loading="lazy"></p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101210833903-1619184429592.png" alt="image-20210101210833903" loading="lazy"></p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210101155747473-1619184431088.png" alt="image-20210101155747473" loading="lazy"></p>
</li>
<li>
<ul>
<li>字段</li>
<li>GradeID : int(11) , Primary Key (pk)</li>
<li>GradeName : varchar(50)</li>
<li>数据库名称MySchool</li>
<li>新建数据库表(grade)</li>
</ul>
</li>
</ul>
<blockquote>
<p>小技巧以后sql太复杂,先手动操作再学习历史记录</p>
</blockquote>
<h2 id="常用命令0连接数据库"><a class="markdownIt-Anchor" href="#常用命令0连接数据库"></a> 常用命令（0）连接数据库</h2>
<p>打开MySQL命令窗口</p>
<ul>
<li>在DOS命令行窗口进入 <strong>安装目录\mysql\bin</strong></li>
<li>可设置环境变量，设置了环境变量，可以在任意目录打开！</li>
</ul>
<p><strong>连接数据库语句 :</strong> mysql -h 服务器主机地址 -u 用户名 -p 用户密码</p>
<p>注意 : -p后面不能加空格,否则会被当做密码的内容,导致登录失败 !</p>
<p><strong>几个基本的数据库操作命令 :</strong></p>
<p>特点：<strong>–注释  所有语句用；结尾</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--启动</span></span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p密码(不能有空格)</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="number">1.</span></span><br><span class="line">update <span class="keyword">user</span> <span class="keyword">set</span> password<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>)<span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span>; <span class="comment">--修改密码</span></span><br><span class="line"><span class="comment">--2</span></span><br><span class="line">flush privileges;  刷新数据库</span><br><span class="line"><span class="comment">--3   </span></span><br><span class="line"><span class="keyword">show</span> databases; <span class="comment">--显示所有数据库</span></span><br><span class="line"><span class="comment">--4 5 6</span></span><br><span class="line">use dbname；<span class="comment">--打开某个数据库</span></span><br><span class="line"><span class="keyword">show</span> tables; <span class="comment">--先打开，再显示数据库mysql中所有的表</span></span><br><span class="line"><span class="keyword">describe</span> student; <span class="comment">--显示表mysql数据库student表的列信息</span></span><br><span class="line"><span class="comment">--7</span></span><br><span class="line"><span class="keyword">create</span> database name; <span class="comment">--创建数据库</span></span><br><span class="line"><span class="comment">--8</span></span><br><span class="line">use databasename; <span class="comment">--选择数据库</span></span><br><span class="line"><span class="comment">--9</span></span><br><span class="line">exit; 退出Mysql连接</span><br><span class="line"><span class="comment">--10</span></span><br><span class="line"><span class="comment">--  本身唯一注释</span></span><br><span class="line"><span class="comment">/*多行注释*/</span></span><br><span class="line">? 命令关键词 : <span class="comment">--寻求帮助</span></span><br></pre></td></tr></table></figure>
<h1 id="二数据库操作"><a class="markdownIt-Anchor" href="#二数据库操作"></a> 二.数据库操作</h1>
<h2 id="21结构化查询语句分类"><a class="markdownIt-Anchor" href="#21结构化查询语句分类"></a> 2.1结构化查询语句分类</h2>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFPR3BEaWNMendTNk5KVkFlTEVDdTJyeDJxYm9HVTM2UzloWExvdjB4MGM1dnpaQWNleVNTWG5BLzY0MA-1619184434061" alt loading="lazy"></p>
<h3 id="常见命令1数据库操作"><a class="markdownIt-Anchor" href="#常见命令1数据库操作"></a> 常见命令（1）数据库操作</h3>
<blockquote>
<p>命令行操作数据库</p>
</blockquote>
<p>创建数据库 :  create database [if not exists] 数据库名;</p>
<p>删除数据库 : drop database [if exists] 数据库名;</p>
<p>查看数据库 : show databases;</p>
<p>使用数据库 : use 数据库名;</p>
<blockquote>
<p>对比工具操作数据库</p>
</blockquote>
<h3 id="学习方法"><a class="markdownIt-Anchor" href="#学习方法"></a> 学习方法：</h3>
<ul>
<li>对照SQLyog工具自动生成的语句学习</li>
<li>固定语法中的单词需要记忆</li>
<li><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVEySVR4aWJSUnNRdXVxaWJIb3JocXpZSTgzUVlLUlVWcE1MQ1BBMWNoS1EzOWVVRlFpYkoyZndXRmcvNjQw-1619184438542" alt loading="lazy"></li>
</ul>
<h2 id="22创建数据表重点24"><a class="markdownIt-Anchor" href="#22创建数据表重点24"></a> 2.2创建数据表(重点+2.4)</h2>
<p>属于DDL的一种，语法 :</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> [if <span class="keyword">not</span> <span class="keyword">exists</span>] `表名`(</span><br><span class="line">    <span class="string">&#x27;字段名1&#x27;</span> 列类型 [属性][索引][注释],</span><br><span class="line">    <span class="string">&#x27;字段名2&#x27;</span> 列类型 [属性][索引][注释],</span><br><span class="line">    #...</span><br><span class="line">    <span class="string">&#x27;字段名n&#x27;</span> 列类型 [属性][索引][注释]</span><br><span class="line">)[表类型][表字符集][注释];</span><br><span class="line"></span><br><span class="line"><span class="comment">--实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--表名称和字段用``飘</span></span><br><span class="line"><span class="comment">--用括号括起来</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student`(</span><br><span class="line">	`id` <span class="type">INT</span>(<span class="number">4</span>)<span class="comment">/*长度*/</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>, </span><br><span class="line">   <span class="comment">--1.AUTO_INCREMENT 自增 2.字符串统一使用单引号3.除了最后一个都要加,</span></span><br><span class="line">   `name` <span class="type">VARCHAR</span> (<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;12345&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">    `sex` <span class="type">VARCHAR</span> (<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;女&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<p><strong>说明 :</strong> 反引号用于区别MySQL保留字与普通字符而引入的 (键盘esc下面的键).</p>
<h2 id="23数据值和列类型重点"><a class="markdownIt-Anchor" href="#23数据值和列类型重点"></a> 2.3数据值和列类型（重点）</h2>
<h3 id="列类型"><a class="markdownIt-Anchor" href="#列类型"></a> 列类型 :</h3>
<p><strong>规定数据库中该列存放的数据类型</strong></p>
<h4 id="1数值类型"><a class="markdownIt-Anchor" href="#1数值类型"></a> 1.数值类型</h4>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFMWFJyZm1RamJVdDNPN3NMdzBLS3Y5VXRyaWFUcjYwSnNwWElaNjlIa2VPaWFnejg2Q0UzYTlXZy82NDA-1619184442836-1619184457889" alt loading="lazy"></p>
<h4 id="2字符串类型"><a class="markdownIt-Anchor" href="#2字符串类型"></a> 2.字符串类型</h4>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFzak9QZnROZm4xaWJYU1A4T0lZbnNKYWFQQzhkYTYxakN6Y2Jka3FiQXBpYlFXZ1E3S0JqWWJ1dy82NDA-1619184459700" alt loading="lazy"></p>
<h4 id="3日期和时间型数值类型"><a class="markdownIt-Anchor" href="#3日期和时间型数值类型"></a> 3.日期和时间型数值类型</h4>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFjaWIzT3dHdFdFSmtFRTJiaWFhNGpUM3hva1kxVWljUFQxTVFjUU5zYTFFc2ppYUlxTTF2dnlVUGpnLzY0MA-1619184461375" alt loading="lazy"></p>
<blockquote>
<p>NULL值</p>
</blockquote>
<ul>
<li>理解为 “没有值” 或 “未知值”</li>
<li>不要用NULL进行算术运算 , 结果仍为NULL</li>
</ul>
<h2 id="24数据字段属性重点"><a class="markdownIt-Anchor" href="#24数据字段属性重点"></a> 2.4数据字段属性（重点）</h2>
<h4 id="unsigned"><a class="markdownIt-Anchor" href="#unsigned"></a> UnSigned</h4>
<ul>
<li>无符号的</li>
<li>声明该数据列不允许负数 .</li>
<li><code>id</code> int unsigned not null auto_increment,</li>
</ul>
<h4 id="zerofill"><a class="markdownIt-Anchor" href="#zerofill"></a> ZEROFILL</h4>
<ul>
<li>0填充的</li>
<li>不足位数的用0来填充 , 如int(3),5则为005</li>
</ul>
<h4 id="auto_increment"><a class="markdownIt-Anchor" href="#auto_increment"></a> Auto_InCrement</h4>
<ul>
<li>自动增长的 , <strong>每添加一条数据 , 自动在上一个记录数上加 1</strong>(默认)</li>
<li>通常用于设置<strong>主键</strong> , 且为整数类型</li>
<li>可定义起始值和步长
<ul>
<li><strong>当前表设置步长(AUTO_INCREMENT=100)</strong> : 只影响当前表</li>
<li><strong>SET @@auto_increment_increment=5 ;</strong> 影响所有使用自增的表(全局)</li>
</ul>
</li>
</ul>
<h4 id="null-和-not-null"><a class="markdownIt-Anchor" href="#null-和-not-null"></a> NULL 和 NOT NULL</h4>
<ul>
<li>默认为NULL , 即没有插入该列的数值</li>
<li>如果设置为NOT NULL , 则该列必须有值</li>
</ul>
<h4 id="default"><a class="markdownIt-Anchor" href="#default"></a> DEFAULT</h4>
<ul>
<li>默认的</li>
<li>用于设置默认值</li>
<li>例如,性别字段,默认为&quot;男&quot; , 否则为 “女” ; 若无指定该列的值 , 则默认值为&quot;男&quot;的值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 目标 : 创建一个school数据库</span></span><br><span class="line"><span class="comment">-- 创建学生表(列,字段)</span></span><br><span class="line"><span class="comment">-- 学号int 登录密码varchar(20) 姓名,性别varchar(2),出生日期(datatime),家庭住址,email</span></span><br><span class="line"><span class="comment">-- 创建表之前 , 一定要先选择数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">  `pwd` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `sex` <span class="type">varchar</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">  `birthday` datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;生日&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<h3 id="常见命令2查看数据库表定义的逆向操作"><a class="markdownIt-Anchor" href="#常见命令2查看数据库表定义的逆向操作"></a> 常见命令（2）查看数据库表定义的逆向操作：</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看数据库的定义命令</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE school;</span><br><span class="line"><span class="comment">-- 查看数据表的定义</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student;</span><br><span class="line"><span class="comment">-- 显示表结构</span></span><br><span class="line"><span class="keyword">DESC</span> student;  <span class="comment">-- 设置严格检查模式(不能容错了)SET sql_mode=&#x27;STRICT_TRANS_TABLES&#x27;;</span></span><br></pre></td></tr></table></figure>
<h2 id="25数据表的类型"><a class="markdownIt-Anchor" href="#25数据表的类型"></a> 2.5数据表的类型</h2>
<h3 id="常见数据库引擎"><a class="markdownIt-Anchor" href="#常见数据库引擎"></a> 常见数据库引擎</h3>
<blockquote>
<p>设置数据表的类型</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">)ENGINE = MyISAM (<span class="keyword">or</span> InnoDB)</span><br><span class="line">-- 查看mysql所支持的引擎类型 (表类型)</span><br><span class="line">SHOW ENGINES;</span><br></pre></td></tr></table></figure>
<p>MySQL的数据表的类型 : <strong>MyISAM</strong> , <strong>InnoDB</strong> , HEAP , BOB , CSV等…</p>
<h4 id="常见的-myisam-与-innodb-类型"><a class="markdownIt-Anchor" href="#常见的-myisam-与-innodb-类型"></a> 常见的 MyISAM 与 InnoDB 类型：</h4>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVFwbVNGTWxKNGZERmRHb1dPc1R1TmZGWnEwWEtXMUd5aWJkWkhVMkY3M0RUZXpNWU0xSzBkYzJBLzY0MA-1619184464658" alt loading="lazy"></p>
<p>锁：MyISAM表锁定 InniDB行锁定</p>
<p>经验 ( 适用场合 )  :</p>
<ul>
<li>适用 MyISAM : <strong>节约空间及相应速度</strong></li>
<li>适用 InnoDB : 安全性 , 事务处理及多用户操作数据表</li>
</ul>
<h3 id="引擎的物理存储"><a class="markdownIt-Anchor" href="#引擎的物理存储"></a> 引擎的物理存储</h3>
<blockquote>
<p>数据表的存储位置</p>
</blockquote>
<ul>
<li>
<p>MySQL数据表以<strong>文件方式存放在磁盘中</strong></p>
<ul>
<li>包括表文件 , 数据文件 , 以及数据库的选项文件</li>
<li>位置 : <strong>Mysql安装目录\data\下存放数据表 . 目录名对应数据库名 , 该目录下文件名对应数据表 .</strong></li>
</ul>
</li>
</ul>
<h3 id="注意"><a class="markdownIt-Anchor" href="#注意"></a> 注意 :</h3>
<ul>
<li>
<p>MyISAM类型数据表对应三个文件 :</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SlpYMUQwbmVVSU1qU0ZpYXpVR0sxNVE1dGs4WHROdE5HblVnZXZoRlN6d1RVck83QW1iWFpGdW1UaWJ0NDNTRElJOW5PUVk5N090UWRRLzY0MA-1619184466787" alt loading="lazy"></p>
<ul>
<li>* . frm – 表结构定义文件</li>
</ul>
</li>
<li>
<p>* . MYD – <strong>数据文件 ( data )</strong></p>
</li>
<li>
<p>* . MYI – <strong>索引</strong>文件 ( index )</p>
</li>
<li>
<p>InnoDB类型*<em>数据表只有一个 <em>.frm文件 , 以及上一级目录的ibdata1文件</em></em></p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210109205014544-1619184470599.png" alt loading="lazy"></p>
</li>
<li>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210109204958246-1619184469036.png" alt loading="lazy"></p>
</li>
</ul>
<h4 id="设置charset"><a class="markdownIt-Anchor" href="#设置charset"></a> 设置charset</h4>
<blockquote>
<p>设置数据表字符集</p>
</blockquote>
<p>我们可为数据库,数据表,数据列设定不同的字符集，设定方法 :</p>
<ul>
<li>(保证不同环境可以运用)创建时通过命令来设置 , 如 : CREATE TABLE 表名()CHARSET = utf8;</li>
<li>如无设定 , 则根据MySQL数据库配置文件 <strong>my.ini 中的参数设定</strong></li>
</ul>
<h2 id="26修改数据库"><a class="markdownIt-Anchor" href="#26修改数据库"></a> 2.6修改数据库</h2>
<h3 id="修改表-alter-table"><a class="markdownIt-Anchor" href="#修改表-alter-table"></a> 修改表 ( ALTER TABLE )</h3>
<p>修改表名 :ALTER TABLE 旧表名 RENAME AS 新表名</p>
<p>添加字段 : ALTER TABLE 表名 ADD字段名 列属性[属性]</p>
<p>修改字段 :mordify可以修改字段类型  change用来重命名</p>
<ul>
<li>ALTER TABLE 表名 MODIFY 字段名 列类型[属性]  --修改约束</li>
<li>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 列属性[属性]  --字段重命名</li>
</ul>
<p>删除字段 :  ALTER TABLE 表名 DROP 字段名</p>
<h3 id="删除数据表"><a class="markdownIt-Anchor" href="#删除数据表"></a> 删除数据表</h3>
<p>语法：DROP TABLE [IF EXISTS] 表名</p>
<ul>
<li>IF EXISTS为可选 , <strong>判断是否存在该数据表</strong></li>
<li>如删除不存在的数据表会抛出错误</li>
</ul>
<h3 id="注意点"><a class="markdownIt-Anchor" href="#注意点"></a> 注意点：</h3>
<ol>
<li><strong>可用反引号（`）为标识符</strong>（库名、表名、字段名、索引、别名）包裹，以避免与关键字重名！中文也可以作为标识符！</li>
<li>每个库目录存在一个保存当前数据库的选项文件db.opt。</li>
<li>注释：<br>
多行注释 /* 注释内容 */<br>
单行注释 – 注释内容        (标准SQL注释风格，要求双破折号后<strong>加一空格符</strong>（空格、TAB、换行等）)</li>
<li>模式通配符：<br>
_    任意单个字符<br>
%    任意多个字符，甚至包括零字符<br>
单引号需要进行转义 ’</li>
<li>**CMD命令行内的语句结束符可以为 “;”, “\G”, “\g”，**仅影响显示结果。其他地方还是用分号结束。delimiter 可修改当前对话的语句结束符。</li>
<li>SQL对大小写不敏感 （关键字）</li>
<li>清除已有语句：\c</li>
</ol>
<h1 id="三mysql数据管理"><a class="markdownIt-Anchor" href="#三mysql数据管理"></a> 三.MySQL数据管理</h1>
<h2 id="31外键写一遍"><a class="markdownIt-Anchor" href="#31外键写一遍"></a> 3,1外键（写一遍）</h2>
<h3 id="外键概念"><a class="markdownIt-Anchor" href="#外键概念"></a> 外键概念</h3>
<p>如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的<strong>外键</strong>。由此可见，外键表示了两个关系之间的相关联系。以另一个关系的外键作主关键字的表被称为<strong>主表</strong>，具有此外键的表被称为主表的<strong>从表</strong>。</p>
<p>在实际操作中，将一个表的值放入第二个表来表示关联，所使用的值是第一个表的主键值(在必要时可包括复合主键值)。此时，第二个表中保存这些值的属性称为外键(<strong>foreign key</strong>)。</p>
<h3 id="外键作用"><a class="markdownIt-Anchor" href="#外键作用"></a> 外键作用</h3>
<p>保持数据<strong>一致性</strong>，<strong>完整性</strong>，主要目的是控制存储在外键表中的数据,<strong>约束</strong>。使两张表形成关联，外键只能引用外表中的列的值或使用空值。</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210116210738405-1619184472955.png" alt="image-20210116210738405" loading="lazy"></p>
<h3 id="创建外键"><a class="markdownIt-Anchor" href="#创建外键"></a> 创建外键</h3>
<h4 id="1建表时指定外键约束"><a class="markdownIt-Anchor" href="#1建表时指定外键约束"></a> 1建表时指定外键约束</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建外键的方式一 : 创建子表同时创建外键</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 年级表 (id\年级名称)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `grade` (</span><br><span class="line">	`gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;年级ID&#x27;</span>,</span><br><span class="line">    `gradename` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级名称&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`gradeid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学生信息表 (学号,姓名,性别,年级,手机,地址,出生日期,邮箱,身份证号)</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">      `studentno` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">      `studentname` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">      `sex` TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">      `gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级&#x27;</span>,</span><br><span class="line">      `phoneNum` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;手机&#x27;</span>,</span><br><span class="line">      `address` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址&#x27;</span>,</span><br><span class="line">      `email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">      `idCard` <span class="type">VARCHAR</span>(<span class="number">18</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;身份证号&#x27;</span>,</span><br><span class="line">      <span class="keyword">PRIMARY</span> KEY (`studentno`),</span><br><span class="line">      KEY `FK_gradeid` (`gradeid`),</span><br><span class="line">	<span class="comment">--key作为外键加上约束（执行引用） reference</span></span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `FK_gradeid` <span class="keyword">FOREIGN</span> KEY (`gradeid`) <span class="keyword">REFERENCES</span> `grade` (`gradeid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210116212208887-1619184477250.png" alt="image-20210116212208887" loading="lazy"></p>
<h4 id="2建表后修改"><a class="markdownIt-Anchor" href="#2建表后修改"></a> 2建表后修改</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建外键方式二 : 创建子表完毕后,修改子表添加外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student`</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> `FK_gradeid` <span class="keyword">FOREIGN</span> KEY (`gradeid`) <span class="keyword">REFERENCES</span> `grade` (`gradeid`);</span><br></pre></td></tr></table></figure>
<h3 id="删除外键"><a class="markdownIt-Anchor" href="#删除外键"></a> 删除外键</h3>
<p>操作：先删除 grade 表，发现报错</p>
<p><strong>注意</strong> : <strong>删除具有主外键关系的表时 , 要先删子表 , 后删主表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY FK_gradeid;</span><br><span class="line"><span class="comment">-- 发现执行完上面的,索引还在,所以还要删除索引</span></span><br><span class="line"><span class="comment">-- 注:这个索引是建立外键的时候默认生成的</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">DROP</span> INDEX FK_gradeid;</span><br></pre></td></tr></table></figure>
<p><strong>注意：以上操作都是物理外键，数据库级别的外键，我们不建议使用</strong>(数据库过多，了解即可)</p>
<ul>
<li>我们想使用多张表的数据，想使用外键操作(JAVA操作)</li>
</ul>
<h2 id="32dml语言数据库管理语言"><a class="markdownIt-Anchor" href="#32dml语言数据库管理语言"></a> 3.2DML语言(数据库管理语言)</h2>
<p><strong>数据库意义</strong> ： 数据存储、数据管理</p>
<p><strong>管理数据库数据方法：</strong></p>
<ul>
<li>通过SQLyog等管理工具管理数据库数据</li>
<li>通过<strong>DML语句</strong>管理数据库数据</li>
</ul>
<p><strong>DML语言</strong>  ：数据操作语言</p>
<ul>
<li>用于操作数据库对象中所包含的数据</li>
<li>包括 :<strong>（语法注意事项）</strong>
<ul>
<li><strong>INSERT (添加数据语句)</strong></li>
<li><strong>UPDATE (更新数据语句)</strong></li>
<li><strong>DELETE (删除数据语句)</strong></li>
</ul>
</li>
</ul>
<h2 id="33添加数据"><a class="markdownIt-Anchor" href="#33添加数据"></a> 3.3添加数据</h2>
<h3 id="insert命令背"><a class="markdownIt-Anchor" href="#insert命令背"></a> INSERT命令(背)</h3>
<p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 表名[(字段<span class="number">1</span>,字段<span class="number">2</span>,字段<span class="number">3</span>,...)] <span class="keyword">VALUES</span>(<span class="string">&#x27;值1&#x27;</span>,<span class="string">&#x27;值2&#x27;</span>,<span class="string">&#x27;值3&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>注意 :</strong></p>
<ul>
<li>字段或值之间用<strong>英文逗号</strong>隔开 .</li>
<li>’ <strong>字段1,字段2…’ 该部分可省略</strong> , 但添加的值务必与表结构,数据列**,顺序相对应,且数量一致 .**</li>
<li>可同时<strong>插入多条数据</strong> , values 后用<strong>英文逗号隔开</strong> .</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用语句如何增加语句?</span></span><br><span class="line"><span class="comment">-- 语法 : INSERT INTO 表名[(字段1,字段2,字段3,...)] VALUES(&#x27;值1&#x27;,&#x27;值2&#x27;,&#x27;值3&#x27;)</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade(gradename) <span class="keyword">VALUES</span> (<span class="string">&#x27;大一&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade <span class="keyword">VALUES</span> (<span class="string">&#x27;大二&#x27;</span>);<span class="comment">--避免这样的写法，最好数据和字段一一对应</span></span><br><span class="line"><span class="comment">-- 查询:INSERT INTO grade VALUE (&#x27;大二&#x27;)错误代码：1136</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 主键自增,那能否省略呢?可以省略，如果不写会一一匹配</span></span><br><span class="line"><span class="comment">-- 结论:&#x27;字段1,字段2...&#x27;该部分可省略 , 但添加的值务必与表结构,数据列,顺序相对应,且数量一致.</span></span><br><span class="line"><span class="comment">-- 一次插入多条数据用逗号隔开</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade(gradename) <span class="keyword">VALUES</span> (<span class="string">&#x27;大三&#x27;</span>),(<span class="string">&#x27;大四&#x27;</span>);</span><br><span class="line"><span class="comment">--对应多个属性</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`name`,`pwd`,`sex`) <span class="keyword">VALUE</span> (`张三`,`aaaa`,`男`)</span><br></pre></td></tr></table></figure>
<p><strong>练习题目</strong></p>
<p>自己使用INSERT语句为课程表subject添加数据 . 使用到外键.</p>
<h2 id="34修改数据"><a class="markdownIt-Anchor" href="#34修改数据"></a> 3.4修改数据</h2>
<h3 id="update命令"><a class="markdownIt-Anchor" href="#update命令"></a> update命令</h3>
<p>语法：update 对象 set 修改的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE 表名 <span class="keyword">SET</span> column_name<span class="operator">=</span><span class="keyword">value</span> [,column_name2<span class="operator">=</span>value2,...] [<span class="keyword">WHERE</span> <span class="keyword">condition</span>];</span><br></pre></td></tr></table></figure>
<p><strong>注意 :</strong></p>
<ul>
<li>column_name 为<strong>要更改的数据列名</strong>，尽量带上``</li>
<li>value 为修改后的数据 , 可以为变量 , 具体指 , 表达式或者嵌套的SELECT结果</li>
<li>condition 为<strong>筛选条件</strong> , 如不指定则<strong>修改该表的所有列数据</strong>(跑路操作),多个设置加上逗号</li>
</ul>
<h3 id="where条件子句"><a class="markdownIt-Anchor" href="#where条件子句"></a> where条件子句</h3>
<p>可以简单的理解为 : 有条件地从表中筛选数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改年级信息</span></span><br><span class="line">UPDATE grade <span class="keyword">SET</span> gradename <span class="operator">=</span> <span class="string">&#x27;高中&#x27;</span> <span class="keyword">WHERE</span> gradeid <span class="operator">=</span> <span class="number">1</span>;<span class="comment">--没有where所有的结果都改变</span></span><br><span class="line">UPDATE grade <span class="keyword">SET</span> `birthday`<span class="operator">=</span><span class="built_in">CURRENT_TIME</span> <span class="keyword">WHERE</span> `name`<span class="operator">=</span><span class="string">&#x27;djjd&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="34删除数据"><a class="markdownIt-Anchor" href="#34删除数据"></a> 3.4删除数据</h2>
<h3 id="delete命令"><a class="markdownIt-Anchor" href="#delete命令"></a> DELETE命令</h3>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> <span class="keyword">condition</span>];</span><br></pre></td></tr></table></figure>
<p>注意：condition为筛选条件 , 如不指定则删除该表的所有列数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除最后一个数据</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> grade <span class="keyword">WHERE</span> gradeid <span class="operator">=</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>
<h3 id="truncate命令"><a class="markdownIt-Anchor" href="#truncate命令"></a> TRUNCATE命令</h3>
<p>作用：用于完全清空表数据 , 但表结构 , 索引 , 约束等不变 ;</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> [<span class="keyword">TABLE</span>] table_name;</span><br><span class="line"><span class="comment">-- 清空年级表</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> grade</span><br></pre></td></tr></table></figure>
<h3 id="注意区别于delete命令"><a class="markdownIt-Anchor" href="#注意区别于delete命令"></a> 注意：区别于DELETE命令</h3>
<ul>
<li>相同 : 都能<strong>删除数据 , 不删除表结构</strong> , 但TRUNCATE速度更快</li>
<li>不同 :
<ul>
<li>使用TRUNCATE TABLE 重新设置<strong>AUTO_INCREMENT计数器</strong>(归零)</li>
<li>使用TRUNCATE TABLE不会对事务有影响 （事务后面会说）</li>
</ul>
</li>
</ul>
<p>测试：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个测试表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `test` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `coll` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 插入几个测试数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test(coll) <span class="keyword">VALUES</span>(<span class="string">&#x27;row1&#x27;</span>),(<span class="string">&#x27;row2&#x27;</span>),(<span class="string">&#x27;row3&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表数据(不带where条件的delete)</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结论:如不指定Where则删除该表的所有列数据,自增当前值依然从原来基础上进行,会记录日志.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表数据(truncate)</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> test;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结论:truncate删除数据,自增当前值会恢复到初始值重新开始;不会记录日志.</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">-- 同样使用DELETE清空不同引擎的数据库表数据.重启数据库服务后</span></span><br><span class="line"><span class="comment">-- InnoDB : 自增列从初始值重新开始 (因为是存储在内存中,断电即失)</span></span><br><span class="line"><span class="comment">-- MyISAM : 自增列依然从上一个自增数据基础上开始 (存在文件中,不会丢失)</span></span><br></pre></td></tr></table></figure>
<h1 id="四使用dql查询数据"><a class="markdownIt-Anchor" href="#四使用dql查询数据"></a> 四.使用DQL查询数据</h1>
<h3 id="dql语言-data-query-language-数据查询语言"><a class="markdownIt-Anchor" href="#dql语言-data-query-language-数据查询语言"></a> DQL语言( Data Query Language 数据查询语言 )**</h3>
<ul>
<li>查询数据库数据 , 如<strong>SELECT</strong>语句</li>
<li>简单的单表查询或多表的复杂查询和嵌套查询</li>
<li>是数据库语言中最核心,最重要的语句</li>
<li>使用频率最高的语句</li>
</ul>
<h2 id="select语法"><a class="markdownIt-Anchor" href="#select语法"></a> SELECT语法</h2>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SELECT [ALL | DISTINCT] &#123;* | table.* | [table.field1[as alias1][,table.field2[as alias2]][,...]]&#125; </span><br><span class="line"><span class="keyword">FROM</span> table_name [<span class="keyword">as</span> table_alias]<span class="comment">--(起别名) </span></span><br><span class="line">[<span class="keyword">left</span> <span class="operator">|</span> <span class="keyword">right</span> <span class="operator">|</span> <span class="keyword">inner</span> <span class="keyword">join</span> table_name2]  <span class="comment">-- 联合查询</span></span><br><span class="line">    [<span class="keyword">WHERE</span> ...]  <span class="comment">-- 指定结果需满足的条件</span></span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> ...]  <span class="comment">-- 指定结果按照哪几个字段来分组</span></span><br><span class="line">    [<span class="keyword">HAVING</span>]  <span class="comment">-- 过滤分组的记录必须满足的次要条件</span></span><br><span class="line"></span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> ...]  <span class="comment">-- 指定查询记录按一个或多个条件排序</span></span><br><span class="line"></span><br><span class="line">    [LIMIT &#123;[offset,]row_count | row_countOFFSET offset&#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">--  指定查询的记录从哪条至哪条</span></span><br></pre></td></tr></table></figure>
<p><strong>注意 : [ ] 括号代表可选的 , { }括号代表必选得</strong></p>
<h3 id="指定查询字段"><a class="markdownIt-Anchor" href="#指定查询字段"></a> 指定查询字段</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询表中所有的数据列结果 , 采用 **&quot; \* &quot;** 符号; 但是效率低，不推荐 .</span></span><br><span class="line"><span class="comment">-- 查询所有学生信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="comment">-- 查询指定列(学号 , 姓名)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure>
<h3 id="as-子句作为别名"><a class="markdownIt-Anchor" href="#as-子句作为别名"></a> AS 子句作为别名</h3>
<p>作用：</p>
<ul>
<li>可给数据列取一个新别名</li>
<li>可给表取一个新别名</li>
<li>可把经计算或总结的结果用另一个新名称来代替</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 这里是为列取别名(当然as关键词可以省略)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno <span class="keyword">AS</span> 学号,studentname <span class="keyword">AS</span> 姓名 <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="comment">-- 使用as也可以为表取别名</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno <span class="keyword">AS</span> 学号,studentname <span class="keyword">AS</span> 姓名 <span class="keyword">FROM</span> student <span class="keyword">AS</span> s;</span><br><span class="line"><span class="comment">-- 使用as,为查询结果取一个新名字</span></span><br><span class="line"><span class="comment">-- CONCAT()函数拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;姓名:&#x27;</span>,studentname) <span class="keyword">AS</span> 新姓名 <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure>
<h3 id="distinct关键字的使用"><a class="markdownIt-Anchor" href="#distinct关键字的使用"></a> DISTINCT关键字的使用</h3>
<p>作用 : <strong>去掉SELECT查询返回的记录结果中重复</strong>的记录 ( 返回所有列的值都相同 ) , 只返回一条</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- # 查看哪些同学参加了考试(学号)  去除重复项</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">result</span>; </span><br><span class="line"><span class="comment">-- 查看考试成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno <span class="keyword">FROM</span> <span class="keyword">result</span>; </span><br><span class="line"><span class="comment">--  查看哪些同学参加了考试</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> studentno <span class="keyword">FROM</span> <span class="keyword">result</span>; </span><br><span class="line"><span class="comment">-- 了解:DISTINCT 去除重复项 , (默认是ALL)</span></span><br></pre></td></tr></table></figure>
<h3 id="使用表达式的列"><a class="markdownIt-Anchor" href="#使用表达式的列"></a> 使用表达式的列</h3>
<p>数据库中的表达式 : 一般由文本值 , 列值 , NULL , 函数和操作符等组成</p>
<p>应用场景 :</p>
<ul>
<li>
<p>SELECT语句返回结果列中使用</p>
</li>
<li>
<p>SELECT语句中的ORDER BY , HAVING等子句中使用</p>
</li>
<li>
<p>DML语句中的 where 条件语句中使用表达式</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- selcet查询中可以使用表达式</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@auto</span>_increment_increment; </span><br><span class="line"><span class="comment">-- 查询自增步长</span></span><br><span class="line"><span class="keyword">SELECT</span> VERSION(); <span class="comment">-- 查询版本号</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">*</span><span class="number">3</span><span class="number">-1</span> <span class="keyword">AS</span> 计算结果; <span class="comment">-- 表达式</span></span><br><span class="line"><span class="comment">-- 学员考试成绩集体提分一分查看</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,StudentResult<span class="operator">+</span><span class="number">1</span> <span class="keyword">AS</span> <span class="string">&#x27;提分后&#x27;</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>避免SQL返回结果中包含 ’ . ’ , ’ * ’ 和括号等干扰开发语言程序.</p>
</li>
</ul>
<h3 id="where条件语句"><a class="markdownIt-Anchor" href="#where条件语句"></a> where条件语句</h3>
<p>作用：用于检索数据表中 符合条件 的记录</p>
<p>搜索条件可由一个或多个逻辑表达式组成 , <strong>结果一般为真或假</strong>.</p>
<h4 id="逻辑操作符"><a class="markdownIt-Anchor" href="#逻辑操作符"></a> 逻辑操作符</h4>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRUMkdUc09kY2o3bk91b1hUSWdFZnJOTU44WUd5Z1dkckZVVExlNDF4TnFjaGhmR2RxNkNIdHcvNjQw-1619184484303" alt="img" loading="lazy"></p>
<p>测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 满足条件的查询(where)</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">-- 查询考试成绩在95-100之间的</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">95</span> <span class="keyword">AND</span> StudentResult<span class="operator">&lt;=</span><span class="number">100</span>;</span><br><span class="line"><span class="comment">-- AND也可以写成 &amp;&amp;</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">95</span> <span class="operator">&amp;&amp;</span> StudentResult<span class="operator">&lt;=</span><span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 模糊查询(对应的词:精确查询)</span></span><br><span class="line"><span class="keyword">SELECT</span> Studentno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> StudentResult <span class="keyword">BETWEEN</span> <span class="number">95</span> <span class="keyword">AND</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 除了1000号同学,要其他同学的成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentresult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> studentno<span class="operator">!=</span><span class="number">1000</span>;</span><br><span class="line"><span class="comment">-- 使用NOT</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentresult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> studentno<span class="operator">=</span><span class="number">1000</span>;</span><br></pre></td></tr></table></figure>
<h4 id="模糊查询-比较操作符"><a class="markdownIt-Anchor" href="#模糊查询-比较操作符"></a> 模糊查询 ：比较操作符</h4>
<p>LIKE：SQL匹配</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRrOHhsNThvUDZjaDY3WmliaWNVMWZuMk83TGs0dUxaeWlhRzhwOFpoa2w0b0YxR1VpYmJQRjBpYXhJUS82NDA-1619184486171" alt="img" loading="lazy"></p>
<p>注意：</p>
<ul>
<li>数值数据类型的记录之间才能进行算术运算 ;</li>
<li>相同数据类型的数据之间才能进行比较 ;</li>
</ul>
<p>测试：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 模糊查询 between and \ like \ in \ null</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- LIKE</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询姓刘的同学的学号及姓名</span></span><br><span class="line"><span class="comment">-- like结合使用的通配符 : % (代表0到任意个字符)  _ (一个字符)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询姓刘的同学,后面只有一个字的</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘_&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询姓刘的同学,后面只有两个字的</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> studentname <span class="keyword">LIKE</span> <span class="string">&#x27;刘__&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询姓名中含有 嘉 字的</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> studentname <span class="keyword">LIKE</span> <span class="string">&#x27;%嘉%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 查询姓名中含有特殊字符的需要使用转义符号 &#x27;\&#x27;</span></span><br><span class="line"><span class="comment">-- 自定义转义符关键字:  ESCAPE &#x27;:&#x27;</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- IN</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询学号为1000,1001,1002的学生姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> studentno <span class="keyword">IN</span> (<span class="number">1000</span>,<span class="number">1001</span>,<span class="number">1002</span>);</span><br><span class="line"><span class="comment">-- 查询地址在北京,南京,河南洛阳的学生</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname,address <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> address <span class="keyword">IN</span> (<span class="string">&#x27;北京&#x27;</span>,<span class="string">&#x27;南京&#x27;</span>,<span class="string">&#x27;河南洛阳&#x27;</span>);</span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- NULL 空</span></span><br><span class="line"><span class="comment">-- =============================================</span></span><br><span class="line"><span class="comment">-- 查询出生日期没有填写的同学</span></span><br><span class="line"><span class="comment">-- 不能直接写=NULL , 这是代表错误的 , 用 is null</span></span><br><span class="line"><span class="keyword">SELECT</span> studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> BornDate <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询出生日期填写的同学</span></span><br><span class="line"><span class="keyword">SELECT</span> studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> BornDate <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line"><span class="comment">-- 查询没有写家庭住址的同学(空字符串不等于null)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentname <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> Address<span class="operator">=</span><span class="string">&#x27;&#x27;</span> <span class="keyword">OR</span> Address <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h3 id="连接查询"><a class="markdownIt-Anchor" href="#连接查询"></a> 连接查询</h3>
<h4 id="join-对比"><a class="markdownIt-Anchor" href="#join-对比"></a> JOIN 对比</h4>
<p>左中右查询</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkRvd1FmMUhIYVlJaWNFTFlLblU5a0RlYUZIbmZ4MEdZVzZBc0V3b1R5U3l3bjkxaWE4V3oyc1hpYUEvNjQw-1619184488042" alt="img" loading="lazy"></p>
<p>七种Join：</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3THdmakZiQ1FYaWMwcGNFMjFsVUZHdkR3NWFaTGVoSVl6d0xwckNmcWR4U2pzbTJ3ZmljSHJTRXpKaWFKQkdhS1dwYXRRN3NJU2liOU1nQ1EvNjQw-1619184489391" alt="img" loading="lazy"></p>
<p>测试</p>
<p>where-- 等值查询</p>
<p>join （连接的表）on（判断的条件） --连接查询</p>
<p>结果</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">连接查询</span></span><br><span class="line"><span class="comment">    如需要多张数据表的数据进行查询,则可通过连接运算符实现多个查询</span></span><br><span class="line"><span class="comment">内连接 inner join</span></span><br><span class="line"><span class="comment">    查询两个表中的结果集中的交集</span></span><br><span class="line"><span class="comment">外连接 outer join</span></span><br><span class="line"><span class="comment">    左外连接 left join</span></span><br><span class="line"><span class="comment">        (以左表作为基准,右边表来一一匹配,匹配不上的,返回左表的记录,右表以NULL填充)</span></span><br><span class="line"><span class="comment">    右外连接 right join</span></span><br><span class="line"><span class="comment">        (以右表作为基准,左边表来一一匹配,匹配不上的,返回右表的记录,左表以NULL填充)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 查询参加了考试的同学信息(学号,学生姓名,科目编号,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="comment">/*思路:</span></span><br><span class="line"><span class="comment">(1):分析需求,确定查询的列来源于两个类,student  result,连接查询</span></span><br><span class="line"><span class="comment">(2):确定使用哪种连接查询?(内连接)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">--并集</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 右连接(也可实现)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等值连接</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s , <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">WHERE</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 左连接 (查询了所有同学,不考试的也会查出来)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s  <span class="comment">--查询s所有的值</span></span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查一下缺考的同学(左连接应用场景)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">WHERE</span> StudentResult <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> sub.subjectno <span class="operator">=</span> r.subjectno</span><br><span class="line"><span class="comment">-- 思考题:查询参加了考试的同学信息(学号,学生姓名,科目名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> sub.subjectno <span class="operator">=</span> r.subjectno</span><br><span class="line"><span class="comment">-- 查询学员及所属的年级(学号,学生姓名,年级名)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno <span class="keyword">AS</span> 学号,studentname <span class="keyword">AS</span> 学生姓名,gradename <span class="keyword">AS</span> 年级名称</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> grade g</span><br><span class="line"><span class="keyword">ON</span> s.`GradeId` <span class="operator">=</span> g.`GradeID`</span><br><span class="line"><span class="comment">-- 查询科目及所属的年级(科目名称,年级名称)</span></span><br><span class="line"><span class="keyword">SELECT</span> subjectname <span class="keyword">AS</span> 科目名称,gradename <span class="keyword">AS</span> 年级名称</span><br><span class="line"><span class="keyword">FROM</span> SUBJECT sub</span><br><span class="line"></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> grade g</span><br><span class="line"><span class="keyword">ON</span> sub.gradeid <span class="operator">=</span> g.gradeid</span><br><span class="line"><span class="comment">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span> subjectname<span class="operator">=</span><span class="string">&#x27;数据库结构-1&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="自连接"><a class="markdownIt-Anchor" href="#自连接"></a> 自连接</h4>
<p><strong>数据表与自身进行连接</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">自连接</span></span><br><span class="line"><span class="comment">    数据表与自身进行连接</span></span><br><span class="line"><span class="comment">需求:从一个包含栏目ID , 栏目名称和父栏目ID的表中</span></span><br><span class="line"><span class="comment">     查询父栏目名称和其他子栏目名称</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 创建一个表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `category` (</span><br><span class="line">  `categoryid` <span class="type">INT</span>(<span class="number">10</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主题id&#x27;</span>,</span><br><span class="line">  `pid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;父id&#x27;</span>,</span><br><span class="line">  `categoryName` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主题名字&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`categoryid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB AUTO_INCREMENT<span class="operator">=</span><span class="number">9</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `category` (`categoryid`, `pid`, `categoryName`)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;信息技术&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;软件开发&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;数据库&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;美术设计&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;web开发&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;ps技术&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;办公信息&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">--例子： 编写SQL语句,将栏目的父子关系呈现出来 (父栏目名称,子栏目名称)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 核心思想:把一张表看成两张一模一样的表,然后将这两张表连接查询(自连接)</span></span><br><span class="line"><span class="keyword">SELECT</span> a.categoryName <span class="keyword">AS</span> <span class="string">&#x27;父栏目&#x27;</span>,b.categoryName <span class="keyword">AS</span> <span class="string">&#x27;子栏目&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> category <span class="keyword">AS</span> a,category <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span> a.`categoryid`<span class="operator">=</span>b.`pid`</span><br></pre></td></tr></table></figure>
<h3 id="排序和分页"><a class="markdownIt-Anchor" href="#排序和分页"></a> 排序和分页</h3>
<p>分页：缓解数据库的压力，给人体验更好瀑布流</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*============== 排序 ================</span></span><br><span class="line"><span class="comment">语法 : ORDER BY</span></span><br><span class="line"><span class="comment">    ORDER BY 语句用于根据指定的列对结果集进行排序。</span></span><br><span class="line"><span class="comment">    ORDER BY 语句默认按照ASC升序对记录进行排序。</span></span><br><span class="line"><span class="comment">    如果您希望按照降序对记录进行排序，可以使用 DESC 关键字。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 查询 数据库结构-1 的所有考试结果(学号 学生姓名 科目名称 成绩)</span></span><br><span class="line"><span class="comment">-- 按成绩降序排序</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span> subjectname<span class="operator">=</span><span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> StudentResult <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*============== 分页 ================</span></span><br><span class="line"><span class="comment">语法 : SELECT * FROM table LIMIT [offset,] rows | rows OFFSET offset</span></span><br><span class="line"><span class="comment">好处 : (用户体验,网络传输,查询压力)</span></span><br><span class="line"><span class="comment">推导:</span></span><br><span class="line"><span class="comment">    第一页 : limit 0,5</span></span><br><span class="line"><span class="comment">    第二页 : limit 5,5</span></span><br><span class="line"><span class="comment">    第三页 : limit 10,5</span></span><br><span class="line"><span class="comment">    ......</span></span><br><span class="line"><span class="comment">    第N页 : limit (pageNo-1)*pageSzie,pageSzie</span></span><br><span class="line"><span class="comment">    [pageNo:页码,pageSize:单页面显示条数]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 每页显示5条数据</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span> subjectname<span class="operator">=</span><span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> StudentResult <span class="keyword">DESC</span> , studentno</span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">5</span></span><br><span class="line"><span class="comment">-- 查询 JAVA第一学年 课程成绩前10名并且分数大于80的学生信息(学号,姓名,课程名,分数)</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname,subjectname,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> r.studentno <span class="operator">=</span> s.studentno</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> r.subjectno <span class="operator">=</span> sub.subjectno</span><br><span class="line"><span class="keyword">WHERE</span> subjectname<span class="operator">=</span><span class="string">&#x27;JAVA第一学年&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> StudentResult <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">10</span></span><br></pre></td></tr></table></figure>
<h3 id="子查询"><a class="markdownIt-Anchor" href="#子查询"></a> 子查询</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*============== 子查询 ================</span></span><br><span class="line"><span class="comment">什么是子查询?</span></span><br><span class="line"><span class="comment">    在查询语句中的WHERE条件子句中,又嵌套了另一个查询语句</span></span><br><span class="line"><span class="comment">    嵌套查询可由多个子查询组成,求解的方式是由里及外;</span></span><br><span class="line"><span class="comment">    子查询返回的结果一般都是集合,故而建议使用IN关键字;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询 数据库结构-1 的所有考试结果(学号,科目编号,成绩),并且成绩降序排列</span></span><br><span class="line"><span class="comment">-- 方法一:使用连接查询</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,r.subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> r.`SubjectNo`<span class="operator">=</span>sub.`SubjectNo`</span><br><span class="line"><span class="keyword">WHERE</span> subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> studentresult <span class="keyword">DESC</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 方法二:使用子查询(执行顺序:由里及外)</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,subjectno,StudentResult</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">result</span></span><br><span class="line"><span class="keyword">WHERE</span> subjectno<span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> subjectno <span class="keyword">FROM</span> `subject`</span><br><span class="line">    <span class="keyword">WHERE</span> subjectname <span class="operator">=</span> <span class="string">&#x27;数据库结构-1&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> studentresult <span class="keyword">DESC</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查询课程为 高等数学-2 且分数不小于80分的学生的学号和姓名</span></span><br><span class="line"><span class="comment">-- 方法一:使用连接查询</span></span><br><span class="line"><span class="keyword">SELECT</span> s.studentno,studentname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r</span><br><span class="line"><span class="keyword">ON</span> s.`StudentNo` <span class="operator">=</span> r.`StudentNo`</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` sub</span><br><span class="line"><span class="keyword">ON</span> sub.`SubjectNo` <span class="operator">=</span> r.`SubjectNo`</span><br><span class="line"><span class="keyword">WHERE</span> subjectname <span class="operator">=</span> <span class="string">&#x27;高等数学-2&#x27;</span> <span class="keyword">AND</span> StudentResult<span class="operator">&gt;=</span><span class="number">80</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 方法二:使用连接查询+子查询</span></span><br><span class="line"><span class="comment">-- 分数不小于80分的学生的学号和姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> r.studentno,studentname <span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> s.`StudentNo`<span class="operator">=</span>r.`StudentNo`</span><br><span class="line"><span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">80</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 在上面SQL基础上,添加需求:课程为 高等数学-2</span></span><br><span class="line"><span class="keyword">SELECT</span> r.studentno,studentname <span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> <span class="keyword">result</span> r <span class="keyword">ON</span> s.`StudentNo`<span class="operator">=</span>r.`StudentNo`</span><br><span class="line"><span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">80</span> <span class="keyword">AND</span> subjectno<span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> subjectno <span class="keyword">FROM</span> `subject`</span><br><span class="line">    <span class="keyword">WHERE</span> subjectname <span class="operator">=</span> <span class="string">&#x27;高等数学-2&#x27;</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 方法三:使用子查询</span></span><br><span class="line"><span class="comment">-- 分步写简单sql语句,然后将其嵌套起来</span></span><br><span class="line"><span class="keyword">SELECT</span> studentno,studentname <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> studentno <span class="keyword">IN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> studentno <span class="keyword">FROM</span> <span class="keyword">result</span> <span class="keyword">WHERE</span> StudentResult<span class="operator">&gt;=</span><span class="number">80</span> <span class="keyword">AND</span> subjectno<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">SELECT</span> subjectno <span class="keyword">FROM</span> `subject` <span class="keyword">WHERE</span> subjectname <span class="operator">=</span> <span class="string">&#x27;高等数学-2&#x27;</span></span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">练习题目:</span></span><br><span class="line"><span class="comment">    查 C语言-1 的前5名学生的成绩信息(学号,姓名,分数)</span></span><br><span class="line"><span class="comment">    使用子查询,查询郭靖同学所在的年级名称</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="分组和过滤"><a class="markdownIt-Anchor" href="#分组和过滤"></a> 分组和过滤</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">SELECT</span> subjectname,<span class="built_in">AVG</span>(studentresult) <span class="keyword">AS</span> 平均分,<span class="built_in">MAX</span>(StudentResult) <span class="keyword">AS</span> 最高分,<span class="built_in">MIN</span>(StudentResult) <span class="keyword">AS</span> 最低分</span><br><span class="line"> <span class="keyword">FROM</span> <span class="keyword">result</span> <span class="keyword">AS</span> r</span><br><span class="line"> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> s</span><br><span class="line"> <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> s.subjectno</span><br><span class="line"> <span class="keyword">GROUP</span> <span class="keyword">BY</span> r.subjectno <span class="comment">--group分组，因为max ,min的结果不能是聚合函数的</span></span><br><span class="line"> <span class="keyword">HAVING</span> 平均分<span class="operator">&gt;</span><span class="number">80</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment"> where写在group by前面.</span></span><br><span class="line"><span class="comment"> 要是放在分组后面的筛选</span></span><br><span class="line"><span class="comment"> 要使用HAVING..</span></span><br><span class="line"><span class="comment"> 因为having是从前面筛选的字段再筛选（可以判断组），而where是从数据表中的&gt;字段直接进行的筛选的</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h1 id="五mysql函数"><a class="markdownIt-Anchor" href="#五mysql函数"></a> 五.MySQL函数</h1>
<h3 id="常用函数"><a class="markdownIt-Anchor" href="#常用函数"></a> 常用函数</h3>
<p><strong>数据函数</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-8</span>);  <span class="comment">/*绝对值*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">9.4</span>); <span class="comment">/*向上取整*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">9.4</span>);   <span class="comment">/*向下取整*/</span></span><br><span class="line"><span class="keyword">SELECT</span> RAND();  <span class="comment">/*随机数,返回一个0-1之间的sql随机数*/</span></span><br><span class="line"><span class="keyword">SELECT</span> SIGN(<span class="number">0</span>); <span class="comment">/*符号函数: 负数返回-1,正数返回1,0返回0*/</span></span><br></pre></td></tr></table></figure>
<p><strong>字符串函数</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>); <span class="comment">/*返回字符串包含的字符数*/</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;我&#x27;</span>,<span class="string">&#x27;爱&#x27;</span>,<span class="string">&#x27;程序&#x27;</span>);  <span class="comment">/*合并字符串,参数可以有多个*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;我爱编程helloworld&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;超级热爱&#x27;</span>);  <span class="comment">/*替换字符串,从某个位置开始替换某个长度*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;KuangShen&#x27;</span>); <span class="comment">/*小写*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;KuangShen&#x27;</span>); <span class="comment">/*大写*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LEFT</span>(<span class="string">&#x27;hello,world&#x27;</span>,<span class="number">5</span>);   <span class="comment">/*从左边截取*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">RIGHT</span>(<span class="string">&#x27;hello,world&#x27;</span>,<span class="number">5</span>);  <span class="comment">/*从右边截取*/</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>,<span class="string">&#x27;坚持&#x27;</span>,<span class="string">&#x27;努力&#x27;</span>);  <span class="comment">/*替换字符串*/</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>,<span class="number">4</span>,<span class="number">6</span>); <span class="comment">/*截取字符串,开始和长度*/</span></span><br><span class="line"><span class="keyword">SELECT</span> REVERSE(<span class="string">&#x27;狂神说坚持就能成功&#x27;</span>); <span class="comment">/*反转</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">-- 查询姓周的同学,改成邹</span></span><br><span class="line"><span class="comment">SELECT REPLACE(studentname,&#x27;周&#x27;,&#x27;邹&#x27;) AS 新名字</span></span><br><span class="line"><span class="comment">FROM student WHERE studentname LIKE &#x27;周%&#x27;;</span></span><br></pre></td></tr></table></figure>
<p><strong>日期和时间函数</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>();   <span class="comment">/*获取当前日期*/</span></span><br><span class="line"> <span class="keyword">SELECT</span> CURDATE();   <span class="comment">/*获取当前日期*/</span></span><br><span class="line"> <span class="keyword">SELECT</span> NOW();   <span class="comment">/*获取当前日期和时间*/</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">LOCALTIME</span>();   <span class="comment">/*获取当前日期和时间*/</span></span><br><span class="line"> <span class="keyword">SELECT</span> SYSDATE();   <span class="comment">/*获取当前日期和时间*/</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- 获取年月日,时分秒</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(NOW());</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(NOW());</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">DAY</span>(NOW());</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(NOW());</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(NOW());</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(NOW());</span><br></pre></td></tr></table></figure>
<p><strong>系统信息函数</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> VERSION();  <span class="comment">/*版本*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>();     <span class="comment">/*用户*/</span></span><br></pre></td></tr></table></figure>
<h3 id="聚合函数where不能use"><a class="markdownIt-Anchor" href="#聚合函数where不能use"></a> 聚合函数where不能use</h3>
<p>查出的都是单个，除非groupby</p>
<table>
<thead>
<tr>
<th style="text-align:left">函数名称</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>COUNT()</strong></td>
<td style="text-align:left">返回<strong>满足Select条件的记录总和数</strong>，如 select count(*) 【不建议使用 *，效率低】</td>
</tr>
<tr>
<td style="text-align:left">SUM()</td>
<td style="text-align:left">返回数字字段或表达式列作统计，返回一列的总和。</td>
</tr>
<tr>
<td style="text-align:left">AVG()</td>
<td style="text-align:left">通常为数值字段或表达列作统计，返回一列的平均值</td>
</tr>
<tr>
<td style="text-align:left">MAX()</td>
<td style="text-align:left">可以为数值字段，字符字段或表达式列作统计，返回最大的值。</td>
</tr>
<tr>
<td style="text-align:left">MIN()</td>
<td style="text-align:left">可以为数值字段，字符字段或表达式列作统计，返回最小的值。</td>
</tr>
</tbody>
</table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">-- 聚合函数</span></span><br><span class="line"> <span class="comment">/*COUNT:非空的*/</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(studentname) <span class="keyword">FROM</span> student;</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> student;</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">FROM</span> student;  <span class="comment">/*推荐*/</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- 从含义上讲，count(1) 与 count(*) 都表示对全部数据行的查询。</span></span><br><span class="line"> <span class="comment">-- count(字段) 会统计该字段在表中出现的次数，忽略字段为null 的情况。即不统计字段为null 的记录。</span></span><br><span class="line"> <span class="comment">-- count(*) 包括了所有的列，相当于行数，在统计结果的时候，包含字段为null 的记录；</span></span><br><span class="line"> <span class="comment">-- count(1) 用1代表代码行，在统计结果的时候，包含字段为null 的记录 。</span></span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment"> 很多人认为count(1)执行的效率会比count(*)高，原因是count(*)会存在全表扫描，而count(1)可以针对一个字段进行查询。其实不然，count(1)和count(*)都会对全表进行扫描，统计所有记录的条数，包括那些为null的记录，因此，它们的效率可以说是相差无几。而count(字段)则与前两者不同，它会统计该字段不为null的记录条数。</span></span><br><span class="line"><span class="comment"> 下面它们之间的一些对比：</span></span><br><span class="line"><span class="comment"> 1）在表没有主键时，count(1)比count(*)快</span></span><br><span class="line"><span class="comment"> 2）有主键时，主键作为计算条件，count(主键)效率最高；</span></span><br><span class="line"><span class="comment"> 3）若表格只有一个字段，则count(*)效率较高。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">SUM</span>(StudentResult) <span class="keyword">AS</span> 总和 <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(StudentResult) <span class="keyword">AS</span> 平均分 <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(StudentResult) <span class="keyword">AS</span> 最高分 <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br><span class="line"> <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(StudentResult) <span class="keyword">AS</span> 最低分 <span class="keyword">FROM</span> <span class="keyword">result</span>;</span><br></pre></td></tr></table></figure>
<p><strong>题目：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">-- 查询不同课程的平均分,最高分,最低分</span></span><br><span class="line"> <span class="comment">-- 前提:根据不同的课程进行分组</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">SELECT</span> subjectname,<span class="built_in">AVG</span>(studentresult) <span class="keyword">AS</span> 平均分,<span class="built_in">MAX</span>(StudentResult) <span class="keyword">AS</span> 最高分,<span class="built_in">MIN</span>(StudentResult) <span class="keyword">AS</span> 最低分</span><br><span class="line"> <span class="keyword">FROM</span> <span class="keyword">result</span> <span class="keyword">AS</span> r</span><br><span class="line"> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> s</span><br><span class="line"> <span class="keyword">ON</span> r.subjectno <span class="operator">=</span> s.subjectno</span><br><span class="line"> <span class="keyword">GROUP</span> <span class="keyword">BY</span> r.subjectno</span><br><span class="line"> <span class="keyword">HAVING</span> 平均分<span class="operator">&gt;</span><span class="number">80</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">Select</span> SubjectName ,<span class="built_in">AVG</span>(studentresult) <span class="keyword">As</span> 平均分,<span class="built_in">MAX</span>(StudentResult) <span class="keyword">as</span> 最高分,<span class="built_in">Min</span>(Student)</span><br><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment"> where写在group by前面.</span></span><br><span class="line"><span class="comment"> 要是放在分组后面的筛选</span></span><br><span class="line"><span class="comment"> 要使用HAVING..</span></span><br><span class="line"><span class="comment"> 因为having是从前面筛选的字段再筛选，而where是从数据表中的&gt;字段直接进行的筛选的</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<h3 id="md5-加密"><a class="markdownIt-Anchor" href="#md5-加密"></a> MD5 加密</h3>
<h4 id="一-md5简介"><a class="markdownIt-Anchor" href="#一-md5简介"></a> 一、MD5简介</h4>
<p>MD5即Message-Digest Algorithm 5（信息-摘要算法5），**用于确保信息传输完整一致。**是计算机广泛使用的杂凑算法之一（又译摘要算法、哈希算法），主流编程语言普遍已有MD5实现。将数据（如汉字）运算为另一固定长度值，是杂凑算法的基础原理，MD5的前身有MD2、MD3和MD4。</p>
<h4 id="二-实现数据加密"><a class="markdownIt-Anchor" href="#二-实现数据加密"></a> 二、实现数据加密</h4>
<p>新建一个表 testmd5</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `testmd5` (</span><br><span class="line">   `id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   `name` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   `pwd` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">   <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line"> ) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>
<p>插入一些数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> testmd5 <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;kuangshen&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;qinjiang&#x27;</span>,<span class="string">&#x27;456789&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>如果我们要对pwd这一列数据进行加密，语法是：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update testmd5 <span class="keyword">set</span> pwd <span class="operator">=</span> md5(pwd);</span><br></pre></td></tr></table></figure>
<p>如果单独对某个用户(如kuangshen)的密码加密：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> testmd5 <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">&#x27;kuangshen2&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line">update testmd5 <span class="keyword">set</span> pwd <span class="operator">=</span> md5(pwd) <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;kuangshen2&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>插入新的数据自动加密</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> testmd5 <span class="keyword">VALUES</span>(<span class="number">4</span>,<span class="string">&#x27;kuangshen3&#x27;</span>,md5(<span class="string">&#x27;123456&#x27;</span>));</span><br></pre></td></tr></table></figure>
<p>查询登录用户信息（md5对比使用，查看用户输入加密后的密码进行比对）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> testmd5 <span class="keyword">WHERE</span> `name`<span class="operator">=</span><span class="string">&#x27;kuangshen&#x27;</span> <span class="keyword">AND</span> pwd<span class="operator">=</span>MD5(<span class="string">&#x27;123456&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="六事务和索引"><a class="markdownIt-Anchor" href="#六事务和索引"></a> 六.事务和索引</h1>
<h2 id="事务transaction"><a class="markdownIt-Anchor" href="#事务transaction"></a> 事务transaction</h2>
<h3 id="什么是事务"><a class="markdownIt-Anchor" href="#什么是事务"></a> 什么是事务</h3>
<ul>
<li>事务就是将<strong>一组SQL语句放在同一批次内去执行</strong>(转账)</li>
<li>如果一个SQL语句出错,则该批次内的所有SQL都将被取消执行</li>
<li>MySQL事务处理<strong>只支持InnoDB和BDB数据表类型</strong></li>
</ul>
<h4 id="事务的acid原则"><a class="markdownIt-Anchor" href="#事务的acid原则"></a> 事务的ACID原则</h4>
<h4 id="原子性atomic"><a class="markdownIt-Anchor" href="#原子性atomic"></a> <strong>原子性(Atomic)</strong></h4>
<ul>
<li>整个事务中的所有操作，<strong>要么全部完成，要么全部不完成</strong>，不可能停滞在中间某个环节。事务在执行过程中发生错误，会被回滚（ROLLBACK）到事务开始前的状态，就像这个事务从来没有执行过一样。</li>
</ul>
<h4 id="一致性consist"><a class="markdownIt-Anchor" href="#一致性consist"></a> <strong>一致性(Consist)</strong></h4>
<ul>
<li>一个事务可以封装状态改变（除非它是一个只读的）。事务必须始终保持系统处于一致的状态，不管在任何给定的时间并发事务有多少。也就是说：如果事务是并发多个，系统也必须如同串行事务一样操作。其主要特征是保护性和不变性(Preserving an Invariant)，以转账案例为例，假设有五个账户，每个账户余额是100元，那么五个账户总额是500元，如果在这个5个账户之间同时发生多个转账，无论并发多少个，比如在A与B账户之间转账5元，在C与D账户之间转账10元，在B与E之间转账15元，<strong>五个账户总额也应该还是500元</strong>，这就是<strong>保护性和不变性。</strong></li>
</ul>
<h4 id="隔离性isolated两个或者以上事务"><a class="markdownIt-Anchor" href="#隔离性isolated两个或者以上事务"></a> **隔离性(Isolated)**两个或者以上事务</h4>
<p>隔离强调的是两个或两个以上同时发生（并发）的业务同时操作一个数据库，为了让两个事务一方面能都看到、得到正确的结果，一方面还要保证一定的效率而产生的不同的隔离级别。</p>
<p><strong>隔离状态执行事务</strong>，并发执行时互相不干扰</p>
<p>隔离级别(4个)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--演示过程必须开两个事务</span></span><br><span class="line"><span class="comment">--1-楠哥，转账</span></span><br><span class="line"><span class="comment">--2-楠哥老婆，查账，不错，钱已到账</span></span><br><span class="line"><span class="keyword">set</span> session transaction isolation level repeatable read;</span><br><span class="line"><span class="keyword">SET</span> transaction isolation level read uncommitted;</span><br><span class="line"><span class="keyword">SET</span> transaction isolation level read committed;</span><br><span class="line"><span class="keyword">set</span> transaction isolation level repeatable read;</span><br><span class="line"><span class="keyword">SET</span> transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> transaction isolation level read uncommitted;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> transaction isolation level read committed;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">GLOBAL</span> transaction isolation level repeatable read;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> transaction isolation level serializable;</span><br><span class="line"></span><br><span class="line"><span class="comment">--SESSION 和 GLOBAL 关键字用来指定修改的事务隔离级别的范围：要重启</span></span><br></pre></td></tr></table></figure>
<h5 id="隔离的问题"><a class="markdownIt-Anchor" href="#隔离的问题"></a> 隔离的问题：</h5>
<p>1.脏读：事物A和事物B，事物A未提交的数据事物B可以读取到这里读取到的数据叫做“脏数据”</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125082220093-1619184498069.png" alt="image-20210125082220093" loading="lazy"></p>
<p>2.不可重复读:A事务在本次事务中，对自己操作过的数据，进行了多次读取发现数据不一致，不可重复读。</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125082234268-1619184499449.png" alt="image-20210125082234268" loading="lazy"></p>
<p>3.幻读（目前mysql用mvcc解决了）：A事务在本次事务中对未操作的数据进行多次查询，发现第一次没有，第二次出现了就像幻觉一样</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209190431445-1619184501135.png" alt="image-20210209190431445" loading="lazy"></p>
<h4 id="1读未提交read-uncommittedq脏读不可重复读"><a class="markdownIt-Anchor" href="#1读未提交read-uncommittedq脏读不可重复读"></a> （1）读未提交：read uncommitted（Q:脏读，不可重复读）</h4>
<p>这种隔离级别最低，这种级别一般是在理论上存在，数据库隔离级别一般都高于该级别<br>
简而言之第一个事务没提交，别的事物就能读，这种数据不一定是正确的因为人家可能回滚呀！</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209185644057-1619184505623.png" alt="image-20210209185644057" loading="lazy"></p>
<p>案例：<br>
楠哥发工资了，老婆让楠哥把工资打到他老婆的账号上，但是该事务并未提交，就让老婆去查看，老婆一看真的打了钱了，高高兴兴关了网页，此时楠哥急中生智进行回滚，钱瞬间回来，一次蒙混了一个月工资。所以楠哥老婆看到的数据我们称之为“脏数据”且读取不可重复。</p>
<h5 id="2读已提交read-committedq不可重复读"><a class="markdownIt-Anchor" href="#2读已提交read-committedq不可重复读"></a> （2）读已提交：read committed（Q:不可重复读）</h5>
<p>能读到别的事物已经提交的数据。<br>
A事务在本次事务中，对自己操作过的数据，进行了多次读取发现数据不一致，不可重复读。<br>
简单点说就是不能让我好好的重复读，一个事务里读出来的数据都不一样，让不让人干活了。</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209185117758-1619184508063.png" alt="image-20210209185117758" loading="lazy"></p>
<p>发现钱少了，不可重复读：同一事物读出的东西不一样</p>
<h5 id="3可重复读repeatable-readq幻读"><a class="markdownIt-Anchor" href="#3可重复读repeatable-readq幻读"></a> （3）可重复读：repeatable read（Q:幻读）</h5>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209190457067-1619184509751.png" alt="image-20210209190457067" loading="lazy"></p>
<h5 id="4串行化serializable解决一切问题但是慢"><a class="markdownIt-Anchor" href="#4串行化serializable解决一切问题但是慢"></a> （4）串行化：serializable(解决一切问题但是慢)</h5>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210209191259746-1619184511159.png" alt="image-20210209191259746" loading="lazy"></p>
<h4 id="持久性durable"><a class="markdownIt-Anchor" href="#持久性durable"></a> <strong>持久性(Durable)</strong></h4>
<ul>
<li>在事务完成以后，该事务对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。事物<strong>没有提交恢复原状，提交了持久化数据库(提交了不可逆)</strong></li>
</ul>
<h3 id="基本语法"><a class="markdownIt-Anchor" href="#基本语法"></a> 基本语法</h3>
<p>– 注意:<br>
—  1.MySQL中默认是自动提交<br>
—  2.使用事务时应先关闭自动提交</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用set语句来改变自动提交模式</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;   <span class="comment">/*关闭*/</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">1</span>;   <span class="comment">/*开启*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 注意:</span></span><br><span class="line"><span class="comment">---  1.MySQL中默认是自动提交</span></span><br><span class="line"><span class="comment">---  2.使用事务时应先关闭自动提交</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 开始一个事务,标记事务的起始点</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION  或者<span class="keyword">begin</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 提交一个事务给数据库</span></span><br><span class="line"><span class="keyword">COMMIT</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 将事务回滚,数据回到本次事务的初始状态</span></span><br><span class="line"><span class="keyword">ROLLBACK</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 还原MySQL数据库的自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 保存点</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> 保存点名称 <span class="comment">-- 设置一个事务保存点</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> 保存点名称 <span class="comment">-- 回滚到保存点</span></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> 保存点名称 <span class="comment">-- 删除保存点</span></span><br></pre></td></tr></table></figure>
<h3 id="测试"><a class="markdownIt-Anchor" href="#测试"></a> 测试</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">课堂测试题目</span></span><br><span class="line"><span class="comment">A在线买一款价格为500元商品,网上银行转账.</span></span><br><span class="line"><span class="comment">A的银行卡余额为2000,然后给商家B支付500.</span></span><br><span class="line"><span class="comment">商家B一开始的银行卡余额为10000</span></span><br><span class="line"><span class="comment">创建数据库shop和创建表account并插入2条数据</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `shop`<span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line">USE `shop`;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `account` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `cash` <span class="type">DECIMAL</span>(<span class="number">9</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"> </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> account (`name`,`cash`)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;A&#x27;</span>,<span class="number">2000.00</span>),(<span class="string">&#x27;B&#x27;</span>,<span class="number">10000.00</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 转账实现</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>; <span class="comment">-- 关闭自动提交</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;  <span class="comment">-- 开始一个事务,标记事务的起始点</span></span><br><span class="line">UPDATE account <span class="keyword">SET</span> cash<span class="operator">=</span>cash<span class="number">-500</span> <span class="keyword">WHERE</span> `name`<span class="operator">=</span><span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">UPDATE account <span class="keyword">SET</span> cash<span class="operator">=</span>cash<span class="operator">+</span><span class="number">500</span> <span class="keyword">WHERE</span> `name`<span class="operator">=</span><span class="string">&#x27;B&#x27;</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>; <span class="comment">-- 提交事务</span></span><br><span class="line"># <span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">1</span>; <span class="comment">-- 恢复自动提交</span></span><br></pre></td></tr></table></figure>
<h2 id="索引"><a class="markdownIt-Anchor" href="#索引"></a> 索引</h2>
<h3 id="索引的作用"><a class="markdownIt-Anchor" href="#索引的作用"></a> 索引的作用</h3>
<ul>
<li>提高查询速度</li>
<li>确保数据的唯一性</li>
<li>可以加速表和表之间的连接 , 实现表与表之间的参照完整性</li>
<li>使用分组和排序子句进行数据检索时 , 可以显著减少分组和排序的时间</li>
<li>全文检索字段进行搜索优化.</li>
</ul>
<h3 id="分类"><a class="markdownIt-Anchor" href="#分类"></a> 分类</h3>
<ul>
<li>主键索引 (Primary Key)</li>
<li>唯一索引 (Unique)</li>
<li>常规索引 (Index)</li>
<li>全文索引 (FullText)</li>
</ul>
<h4 id="主键索引"><a class="markdownIt-Anchor" href="#主键索引"></a> 主键索引</h4>
<p>主键 : 某一个属性组能唯一标识一条记录</p>
<p>特点 :</p>
<ul>
<li>最常见的索引类型</li>
<li><strong>确保数据记录的唯一性</strong></li>
<li>确定特定数据记录在数据库中的位置</li>
</ul>
<h4 id="唯一索引"><a class="markdownIt-Anchor" href="#唯一索引"></a> 唯一索引</h4>
<p>作用 : 避免同一个表中某数据列中的<strong>值重复</strong></p>
<p>与主键索引的区别</p>
<ul>
<li>主键索引只能有一个</li>
<li><strong>唯一索引可能有多个</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `Grade`(</span><br><span class="line">    `GradeID` <span class="type">INT</span>(<span class="number">11</span>) AUTO_INCREMENT PRIMARYKEY,</span><br><span class="line">    `GradeName` <span class="type">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line">    <span class="comment">-- 或 UNIQUE KEY `GradeID` (`GradeID`)</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="常规索引"><a class="markdownIt-Anchor" href="#常规索引"></a> 常规索引</h4>
<p>作用 : 快速定位特定数据</p>
<p>注意 :</p>
<ul>
<li>index 和 key 关键字都可以设置常规索引</li>
<li>应加在查询找条件的字段</li>
<li>不宜添加太多常规索引,影响数据的插入,删除和修改操作</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">result</span>`(</span><br><span class="line">    <span class="comment">-- 省略一些代码</span></span><br><span class="line">    INDEX<span class="operator">/</span>KEY `ind` (`studentNo`,`subjectNo`) <span class="comment">-- 创建表时添加</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- 创建后添加</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `<span class="keyword">result</span>` <span class="keyword">ADD</span> INDEX `ind`(`studentNo`,`subjectNo`);</span><br></pre></td></tr></table></figure>
<h4 id="全文索引"><a class="markdownIt-Anchor" href="#全文索引"></a> 全文索引</h4>
<p>百度搜索：全文索引</p>
<p>作用 : 快速定位特定数据<br>
开始之前，先说一下全文索引的版本、存储引擎、数据类型的支持情况<br>
MySQL 5.6 以前的版本，只有 MyISAM 存储引擎支持全文索引；<br>
MySQL 5.6 及以后的版本，MyISAM 和 InnoDB 存储引擎均支持全文索引;<br>
只有字段的数据类型为 char、varchar、text 及其系列才可以建全文索引。<br>
测试或使用全文索引时，要先看一下自己的 MySQL 版本、存储引擎和数据类型是否支持全文索引。</p>
<p>注意 :</p>
<ul>
<li>只能用于MyISAM类型的数据表</li>
<li>只能用于<strong>CHAR , VARCHAR , TEXT数据列</strong>类型</li>
<li><strong>适合大型数据集</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#方法一：创建表时</span></span><br><span class="line"><span class="comment">    　　CREATE TABLE 表名 (</span></span><br><span class="line"><span class="comment">                字段名1  数据类型 [完整性约束条件…],</span></span><br><span class="line"><span class="comment">                字段名2  数据类型 [完整性约束条件…],</span></span><br><span class="line"><span class="comment">                [UNIQUE | FULLTEXT | SPATIAL ]   INDEX | KEY</span></span><br><span class="line"><span class="comment">                [索引名]  (字段名[(长度)]  [ASC |DESC])</span></span><br><span class="line"><span class="comment">                );</span></span><br><span class="line"><span class="comment">#方法二：CREATE在已存在的表上创建索引</span></span><br><span class="line"><span class="comment">        CREATE  [UNIQUE | FULLTEXT | SPATIAL ]  INDEX  索引名</span></span><br><span class="line"><span class="comment">                     ON 表名 (字段名[(长度)]  [ASC |DESC]) ;</span></span><br><span class="line"><span class="comment">#方法三：ALTER TABLE在已存在的表上创建索引</span></span><br><span class="line"><span class="comment">        ALTER TABLE 表名 ADD  [UNIQUE | FULLTEXT | SPATIAL ] INDEX</span></span><br><span class="line"><span class="comment">                             索引名 (字段名[(长度)]  [ASC |DESC]) ;</span></span><br><span class="line"><span class="comment">                            </span></span><br><span class="line"><span class="comment">                            </span></span><br><span class="line"><span class="comment">#删除索引：DROP INDEX 索引名 ON 表名字;</span></span><br><span class="line"><span class="comment">#删除主键索引: ALTER TABLE 表名 DROP PRIMARY KEY;</span></span><br><span class="line"><span class="comment">#显示索引信息: SHOW INDEX FROM student;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/*增加全文索引*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `school`.`student` <span class="keyword">ADD</span> FULLTEXT INDEX `studentname` (`StudentName`);</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*EXPLAIN : 分析SQL语句执行性能*/</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> studentno<span class="operator">=</span><span class="string">&#x27;1000&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*使用全文索引*/</span></span><br><span class="line"><span class="comment">-- 全文搜索通过 MATCH() 函数完成。</span></span><br><span class="line"><span class="comment">-- 搜索字符串作为 against() 的参数被给定。搜索以忽略字母大小写的方式执行。对于表中的每个记录行，MATCH() 返回一个相关性值。即，在搜索字符串与记录行在 MATCH() 列表中指定的列的文本之间的相似性尺度。</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span><span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(studentname) AGAINST(<span class="string">&#x27;love&#x27;</span>);</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<h3 id="拓展测试索引"><a class="markdownIt-Anchor" href="#拓展测试索引"></a> 拓展：测试索引</h3>
<p><strong>建表app_user：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `app_user` (</span><br><span class="line">  `id` <span class="type">bigint</span>(<span class="number">20</span>) unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line">  `email` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span> COMMENT <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">  `gender` tinyint(<span class="number">4</span>) unsigned <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;性别（0:男；1：女）&#x27;</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `age` tinyint(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">  `create_time` datetime <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">  `update_time` <span class="type">timestamp</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> UPDATE <span class="built_in">CURRENT_TIMESTAMP</span>,<span class="comment">--保存修改记录的最后时间</span></span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 COMMENT<span class="operator">=</span><span class="string">&#x27;app用户表&#x27;</span> </span><br></pre></td></tr></table></figure>
<h4 id="current_timestamp"><a class="markdownIt-Anchor" href="#current_timestamp"></a> Current_timestamp:</h4>
<p>当你更新字段时，只有字段值发生变化了，你的时间字段才会变为UPDATE操作时的时间。</p>
<p>如果<strong>只对字段设置默认值取CURRENT_TIMESTAMP，而没有设置随当前时间戳更新的话（就是建表时不勾选下图中的玩意儿）</strong>，只有记录创建时会有时间戳，此后对记录的更新操作都不会再改变该记录的时间字段了。<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20191217133545374-1619184516270.png" alt="img" loading="lazy"></p>
<p><strong>批量插入数据：100w</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> IF <span class="keyword">EXISTS</span> mock_data;</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">DECLARE</span> num <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;<span class="comment">--定义数字和大小</span></span><br><span class="line">  <span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">  WHILE i <span class="operator">&lt;</span> num DO</span><br><span class="line">   <span class="keyword">INSERT</span> <span class="keyword">INTO</span> app_user(`name`, `email`, `phone`, `gender`, `password`, `age`)</span><br><span class="line">    <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;用户&#x27;</span>, i), <span class="string">&#x27;24736743@qq.com&#x27;</span>, CONCAT(<span class="string">&#x27;18&#x27;</span>, <span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span>(<span class="number">999999999</span><span class="number">-100000000</span>)<span class="operator">+</span><span class="number">100000000</span>)),<span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">2</span>),UUID(), <span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">100</span>));</span><br><span class="line">   <span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">END</span> WHILE;</span><br><span class="line">  <span class="keyword">RETURN</span> i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">SELECT</span> mock_data();</span><br></pre></td></tr></table></figure>
<p><strong>索引效率测试</strong></p>
<p>无索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>; <span class="comment">-- 查看耗时</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">           id: <span class="number">1</span></span><br><span class="line">  select_type: SIMPLE</span><br><span class="line">        <span class="keyword">table</span>: app_user</span><br><span class="line">   partitions: <span class="keyword">NULL</span></span><br><span class="line">         type: <span class="keyword">ALL</span></span><br><span class="line">possible_keys: <span class="keyword">NULL</span></span><br><span class="line">          key: <span class="keyword">NULL</span></span><br><span class="line">      key_len: <span class="keyword">NULL</span></span><br><span class="line">          <span class="keyword">ref</span>: <span class="keyword">NULL</span></span><br><span class="line">         <span class="keyword">rows</span>: <span class="number">992759</span></span><br><span class="line">     filtered: <span class="number">10.00</span></span><br><span class="line">        Extra: <span class="keyword">Using</span> <span class="keyword">where</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>创建索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX idx_app_user_name <span class="keyword">ON</span> app_user(name); <span class="comment">--有索引之后查询快了很多 ，在大数据的时候区别很大</span></span><br></pre></td></tr></table></figure>
<p>测试普通索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>\G</span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1.</span> <span class="type">row</span> <span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line">           id: <span class="number">1</span></span><br><span class="line">  select_type: SIMPLE</span><br><span class="line">        <span class="keyword">table</span>: app_user</span><br><span class="line">   partitions: <span class="keyword">NULL</span></span><br><span class="line">         type: <span class="keyword">ref</span></span><br><span class="line">possible_keys: idx_app_user_name</span><br><span class="line">          key: idx_app_user_name</span><br><span class="line">      key_len: <span class="number">203</span></span><br><span class="line">          <span class="keyword">ref</span>: const</span><br><span class="line">         <span class="keyword">rows</span>: <span class="number">1</span></span><br><span class="line">     filtered: <span class="number">100.00</span></span><br><span class="line">        Extra: <span class="keyword">NULL</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span>, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"> </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> app_user <span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;用户9999&#x27;</span>;</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="索引准则"><a class="markdownIt-Anchor" href="#索引准则"></a> 索引准则</h3>
<ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据加索引</li>
<li><strong>小数据量的表建议不要加索引</strong></li>
<li>索引一般应<strong>加在查找条件的字段</strong></li>
</ul>
<h3 id="索引的数据结构"><a class="markdownIt-Anchor" href="#索引的数据结构"></a> 索引的数据结构</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 我们可以在创建上述索引的时候，为其指定索引类型，分两类</span></span><br><span class="line">hash类型的索引：查询单条快，范围查询慢</span><br><span class="line">btree类型的索引：b<span class="operator">+</span>树，层数越多，数据量指数级增长（我们就用它，因为innodb默认支持它）</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 不同的存储引擎支持的索引类型也不一样</span></span><br><span class="line">InnoDB 支持事务，支持行级别锁定，支持 B<span class="operator">-</span>tree、<span class="keyword">Full</span><span class="operator">-</span>text 等索引，不支持 Hash 索引；</span><br><span class="line">MyISAM 不支持事务，支持表级别锁定，支持 B<span class="operator">-</span>tree、<span class="keyword">Full</span><span class="operator">-</span>text 等索引，不支持 Hash 索引；</span><br><span class="line">Memory 不支持事务，支持表级别锁定，支持 B<span class="operator">-</span>tree、Hash 等索引，不支持 <span class="keyword">Full</span><span class="operator">-</span>text 索引；</span><br><span class="line">NDB 支持事务，支持行级别锁定，支持 Hash 索引，不支持 B<span class="operator">-</span>tree、<span class="keyword">Full</span><span class="operator">-</span>text 等索引；</span><br><span class="line">Archive 不支持事务，支持表级别锁定，不支持 B<span class="operator">-</span>tree、Hash、<span class="keyword">Full</span><span class="operator">-</span>text 等索引；</span><br></pre></td></tr></table></figure>
<p>阅读文档面试：<a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">http://blog.codinglabs.org/articles/theory-of-mysql-index.html</a></p>
<h1 id="七权限及如何设计数据库"><a class="markdownIt-Anchor" href="#七权限及如何设计数据库"></a> 七.权限及如何设计数据库</h1>
<h3 id="用户管理"><a class="markdownIt-Anchor" href="#用户管理"></a> 用户管理</h3>
<h4 id="用sqlyog-创建用户并授予权限演示"><a class="markdownIt-Anchor" href="#用sqlyog-创建用户并授予权限演示"></a> 用SQLyog 创建用户并授予权限演示</h4>
<p>删除和添加用户</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SmY3ZGVvbHdRYTQ0clh2aWNJaFhaME5HTDRzWktnOG5pY0JHcllsRUJKaDFWM3ltSjRXekJ4OXpYc0laeVBZRkFESkJ6bjBpYkNtZ2lhdUEvNjQw-1619184518981" alt="img" loading="lazy"></p>
<h4 id="基本命令"><a class="markdownIt-Anchor" href="#基本命令"></a> 基本命令</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 用户和权限管理 */</span> <span class="comment">------------------</span></span><br><span class="line">用户信息表：mysql.user</span><br><span class="line"><span class="comment">-- 刷新权限</span></span><br><span class="line">FLUSH PRIVILEGES</span><br><span class="line"><span class="comment">-- 增加用户  CREATE USER kuangshen IDENTIFIED BY &#x27;123456&#x27;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> 用户名 IDENTIFIED <span class="keyword">BY</span> [PASSWORD] 密码(字符串)</span><br><span class="line">    <span class="operator">-</span> 必须拥有mysql数据库的全局<span class="keyword">CREATE</span> <span class="keyword">USER</span>权限，或拥有<span class="keyword">INSERT</span>权限。</span><br><span class="line">    <span class="operator">-</span> 只能创建用户，不能赋予权限。</span><br><span class="line">    <span class="operator">-</span> 用户名，注意引号：如 <span class="string">&#x27;user_name&#x27;</span>@<span class="string">&#x27;192.168.1.1&#x27;</span></span><br><span class="line">    <span class="operator">-</span> 密码也需引号，纯数字密码也要加引号</span><br><span class="line">    <span class="operator">-</span> 要在纯文本中指定密码，需忽略PASSWORD关键词。要把密码指定为由PASSWORD()函数返回的混编值，需包含关键字PASSWORD</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 重命名用户  RENAME USER kuangshen TO kuangshen2</span></span><br><span class="line">RENAME <span class="keyword">USER</span> old_user <span class="keyword">TO</span> new_user</span><br><span class="line"> http:<span class="operator">/</span><span class="operator">/</span>www.python3.vip<span class="operator">/</span>tut<span class="operator">/</span>auto<span class="operator">/</span>appium<span class="operator">/</span><span class="number">01</span><span class="operator">/</span></span><br><span class="line"><span class="comment">-- 设置密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">&#x27;密码&#x27;</span>)    <span class="comment">-- 为当前用户设置密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> 用户名 <span class="operator">=</span> PASSWORD(<span class="string">&#x27;密码&#x27;</span>)    <span class="comment">-- 为指定用户设置密码</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 删除用户  DROP USER kuangshen2</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> 用户名</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 分配权限/添加用户</span></span><br><span class="line"><span class="keyword">GRANT</span> 权限列表 <span class="keyword">ON</span> 表名 <span class="keyword">TO</span> 用户名 [IDENTIFIED <span class="keyword">BY</span> [PASSWORD] <span class="string">&#x27;password&#x27;</span>]</span><br><span class="line">    <span class="operator">-</span> <span class="keyword">all</span> privileges 表示所有权限</span><br><span class="line">    <span class="operator">-</span> <span class="operator">*</span>.<span class="operator">*</span> 表示所有库的所有表</span><br><span class="line">    <span class="operator">-</span> 库名.表名 表示某库下面的某表</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 查看权限   SHOW GRANTS FOR root@localhost;</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> 用户名</span><br><span class="line">    <span class="comment">-- 查看当前用户权限</span></span><br><span class="line">    <span class="keyword">SHOW</span> GRANTS; 或 <span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="built_in">CURRENT_USER</span>; 或 <span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="built_in">CURRENT_USER</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 撤消权限</span></span><br><span class="line"><span class="keyword">REVOKE</span> 权限列表 <span class="keyword">ON</span> 表名 <span class="keyword">FROM</span> 用户名</span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES, <span class="keyword">GRANT</span> OPTION <span class="keyword">FROM</span> 用户名    <span class="comment">-- 撤销所有权限</span></span><br></pre></td></tr></table></figure>
<h4 id="权限解释"><a class="markdownIt-Anchor" href="#权限解释"></a> 权限解释</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 权限列表</span></span><br><span class="line"><span class="keyword">ALL</span> [PRIVILEGES]    <span class="comment">-- 设置除GRANT OPTION之外的所有简单权限</span></span><br><span class="line"><span class="keyword">ALTER</span>    <span class="comment">-- 允许使用ALTER TABLE</span></span><br><span class="line"><span class="keyword">ALTER</span> ROUTINE    <span class="comment">-- 更改或取消已存储的子程序</span></span><br><span class="line"><span class="keyword">CREATE</span>    <span class="comment">-- 允许使用CREATE TABLE</span></span><br><span class="line"><span class="keyword">CREATE</span> ROUTINE    <span class="comment">-- 创建已存储的子程序</span></span><br><span class="line"><span class="keyword">CREATE</span> TEMPORARY TABLES        <span class="comment">-- 允许使用CREATE TEMPORARY TABLE</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span>        <span class="comment">-- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span>        <span class="comment">-- 允许使用CREATE VIEW</span></span><br><span class="line"><span class="keyword">DELETE</span>    <span class="comment">-- 允许使用DELETE</span></span><br><span class="line"><span class="keyword">DROP</span>    <span class="comment">-- 允许使用DROP TABLE</span></span><br><span class="line"><span class="keyword">EXECUTE</span>        <span class="comment">-- 允许用户运行已存储的子程序</span></span><br><span class="line">FILE    <span class="comment">-- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</span></span><br><span class="line">INDEX     <span class="comment">-- 允许使用CREATE INDEX和DROP INDEX</span></span><br><span class="line"><span class="keyword">INSERT</span>    <span class="comment">-- 允许使用INSERT</span></span><br><span class="line">LOCK TABLES        <span class="comment">-- 允许对您拥有SELECT权限的表使用LOCK TABLES</span></span><br><span class="line">PROCESS     <span class="comment">-- 允许使用SHOW FULL PROCESSLIST</span></span><br><span class="line"><span class="keyword">REFERENCES</span>    <span class="comment">-- 未被实施</span></span><br><span class="line">RELOAD    <span class="comment">-- 允许使用FLUSH</span></span><br><span class="line">REPLICATION CLIENT    <span class="comment">-- 允许用户询问从属服务器或主服务器的地址</span></span><br><span class="line">REPLICATION SLAVE    <span class="comment">-- 用于复制型从属服务器（从主服务器中读取二进制日志事件）</span></span><br><span class="line"><span class="keyword">SELECT</span>    <span class="comment">-- 允许使用SELECT</span></span><br><span class="line"><span class="keyword">SHOW</span> DATABASES    <span class="comment">-- 显示所有数据库</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">VIEW</span>    <span class="comment">-- 允许使用SHOW CREATE VIEW</span></span><br><span class="line">SHUTDOWN    <span class="comment">-- 允许使用mysqladmin shutdown</span></span><br><span class="line">SUPER    <span class="comment">-- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</span></span><br><span class="line">UPDATE    <span class="comment">-- 允许使用UPDATE</span></span><br><span class="line">USAGE    <span class="comment">-- “无权限”的同义词</span></span><br><span class="line"><span class="keyword">GRANT</span> OPTION    <span class="comment">-- 允许授予权限</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">/* 表维护 */</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">-- 分析和存储表的关键字分布</span></span><br><span class="line">ANALYZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> 表名 ...</span><br><span class="line"><span class="comment">-- 检查一个或多个表是否有错误</span></span><br><span class="line"><span class="keyword">CHECK</span> <span class="keyword">TABLE</span> tbl_name [, tbl_name] ... [option] ...</span><br><span class="line">option = &#123;QUICK | FAST | MEDIUM | EXTENDED | CHANGED&#125;</span><br><span class="line"><span class="comment">-- 整理数据文件的碎片</span></span><br><span class="line">OPTIMIZE [<span class="keyword">LOCAL</span> <span class="operator">|</span> NO_WRITE_TO_BINLOG] <span class="keyword">TABLE</span> tbl_name [, tbl_name] ...</span><br></pre></td></tr></table></figure>
<h3 id="mysql备份"><a class="markdownIt-Anchor" href="#mysql备份"></a> MySQL备份</h3>
<p>数据库备份必要性</p>
<ul>
<li>保证重要数据不丢失</li>
<li>数据转移</li>
</ul>
<p>MySQL数据库<strong>备份</strong>方法</p>
<ul>
<li>
<p>mysqldump备份工具（命令行）</p>
</li>
<li>
<p>数据库管理工具,如SQLyog（右键）<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125153602454-1619184521572.png" alt="image-20210125153602454" loading="lazy"></p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125153403050-1619184524725.png" alt="image-20210125153403050" loading="lazy"></p>
</li>
<li>
<p>直接拷贝数据库文件和相关配置文件</p>
</li>
</ul>
<p><strong>mysqldump客户端</strong></p>
<p>作用 :</p>
<ul>
<li>转储数据库</li>
<li>搜集数据库进行备份</li>
<li>将数据转移到另一个SQL服务器,不一定是MySQL服务器<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy91SkRBVUtyR0M3SmY3ZGVvbHdRYTQ0clh2aWNJaFhaME56Z1dKV2V5WVljZjFEeTNpYmZONjZTaWFaUW1xVEYzSHY4SEJqcjF6SW93WGgyMDFwRWpVenlKdy82NDA-1619184528052" alt="img" loading="lazy"></li>
</ul>
<h4 id="导入导出"><a class="markdownIt-Anchor" href="#导入导出"></a> 导入导出</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 导出</span></span><br><span class="line"><span class="number">1.</span> 导出一张表 <span class="comment">-- mysqldump -uroot -p123456 school student &gt;D:/a.sql    </span></span><br><span class="line">　　mysqldump <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 库名 表名 <span class="operator">&gt;</span> 文件名(D:<span class="operator">/</span>a.sql)</span><br><span class="line"><span class="number">2.</span> 导出多张表 <span class="comment">-- mysqldump -uroot -p123456 school student result &gt;D:/a.sql</span></span><br><span class="line">　　mysqldump <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 库名 表<span class="number">1</span> 表<span class="number">2</span> 表<span class="number">3</span> <span class="operator">&gt;</span> 文件名(D:<span class="operator">/</span>a.sql)</span><br><span class="line"><span class="number">3.</span> 导出所有表 <span class="comment">-- mysqldump -uroot -p123456 school &gt;D:/a.sql</span></span><br><span class="line">　　mysqldump <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 库名 <span class="operator">&gt;</span> 文件名(D:<span class="operator">/</span>a.sql)</span><br><span class="line"><span class="number">4.</span> 导出一个库 <span class="comment">-- mysqldump -uroot -p123456 -B school &gt;D:/a.sql</span></span><br><span class="line">　　mysqldump <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 <span class="operator">-</span>B 库名 <span class="operator">&gt;</span> 文件名(D:<span class="operator">/</span>a.sql)</span><br><span class="line"> </span><br><span class="line">可以<span class="operator">-</span>w携带备份条件</span><br><span class="line"> 可以远程导出</span><br><span class="line"><span class="comment">-- 导入</span></span><br><span class="line"><span class="number">1.</span> 在登录mysql的情况下：</span><br><span class="line"><span class="comment">--use databasename   切换到指定数据库</span></span><br><span class="line"><span class="comment">-- source D:/a.sql</span></span><br><span class="line">　　source  备份文件</span><br><span class="line"><span class="number">2.</span> 在不登录的情况下</span><br><span class="line">　　mysql <span class="operator">-</span>u用户名 <span class="operator">-</span>p密码 库名 <span class="operator">&lt;</span> 备份文件</span><br></pre></td></tr></table></figure>
<h2 id="规范化数据库设计"><a class="markdownIt-Anchor" href="#规范化数据库设计"></a> 规范化数据库设计</h2>
<h3 id="为什么需要数据库设计"><a class="markdownIt-Anchor" href="#为什么需要数据库设计"></a> 为什么需要数据库设计</h3>
<p><strong>当数据库比较复杂时我们需要设计数据库</strong></p>
<p><strong>糟糕的数据库设计 :</strong></p>
<ul>
<li>数据冗余,存储空间浪费</li>
<li>数据更新和插入的异常</li>
<li>程序性能差</li>
</ul>
<p><strong>良好的数据库设计 :</strong></p>
<ul>
<li>节省数据的存储空间</li>
<li>能够保证数据的完整性</li>
<li>方便进行数据库应用系统的开发</li>
</ul>
<p><strong>软件项目开发周期中数据库设计 :</strong></p>
<ul>
<li>需求分析阶段: <strong>分析客户的业务和数据处理需求</strong></li>
<li>概要设计阶段:设计数据库的E-R模型图 , 确认需求信息的正确和完整.</li>
</ul>
<p><strong>设计数据库步骤</strong></p>
<ul>
<li><strong>收集信息</strong>
<ul>
<li>与该系统有关人员进行交流 , 座谈 , 充分了解用户需求 , 理解数据库需要完成的任务.</li>
</ul>
</li>
<li>标识实体[Entity]</li>
<li>
<ul>
<li>标识数据库要管理的关键对象或实体,实体一般是名词</li>
</ul>
</li>
<li>标识每个实体需要存储的详细信息[Attribute]</li>
<li>标识实体之间的关系[Relationship]</li>
</ul>
<h3 id="三大范式"><a class="markdownIt-Anchor" href="#三大范式"></a> 三大范式</h3>
<p><strong>问题 : 为什么需要数据规范化?</strong></p>
<p>不合规范的表设计会导致的问题：</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常
<ul>
<li>无法正确表示信息</li>
</ul>
</li>
<li>删除异常
<ul>
<li>丢失有效信息</li>
</ul>
</li>
</ul>
<blockquote>
<p>三大范式</p>
</blockquote>
<p><strong>第一范式 (1st NF)</strong></p>
<p>第一范式的目标是确**保每列的原子性,如果每列都是不可再分的最小数据单元,**则满足第一范式</p>
<p><strong>第二范式(2nd NF)</strong></p>
<p>第二范式（2NF）是在第一范式（1NF）的基础上建立起来的，即满足第二范式（2NF）必须先满足第一范式（1NF）。</p>
<p>第二范式要求<strong>每个表只描述一件事情</strong></p>
<p><strong>第三范式(3rd NF)</strong></p>
<p>如果一个关系满足第二范式,并且除了主键以外的其他列都不传递依赖于主键列,则满足第三范式.</p>
<p><strong>第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。</strong></p>
<p><strong>规范化和性能的关系</strong></p>
<p>为满足某种商业目标 , 数据库<strong>性能比规范化数据库更重要</strong></p>
<p>在数据规范化的同时 , 要综合考虑数据库的性能</p>
<ul>
<li>
<p>通过在给定的表中添加额外的字段,以大量减少需要从中搜索信息所需的时间（从<strong>多表查询到单表查询</strong>）</p>
</li>
<li>
<p>通过在给定的表中插入计算列(大数据量降低为小数据量),以方便查询</p>
</li>
</ul>
<blockquote>
<p>注：关联的表不能超过三张</p>
</blockquote>
<h1 id="八jdbc"><a class="markdownIt-Anchor" href="#八jdbc"></a> 八：JDBC</h1>
<blockquote>
<p>Java数据库连接，（Java Database Connectivity，简称JDBC）是Java语言中用来<strong>规范客户端程序如何来访问数据库的应用程序接口</strong>，提供了诸如查询和更新数据库中数据的方法。JDBC也是Sun Microsystems的商标。我们通常说的JDBC是面向关系型数据库的。</p>
</blockquote>
<ul>
<li><strong>建立测试库</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE jdbcStudy <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line">USE jdbcStudy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users`(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">NAME <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">PASSWORD <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">birthday <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `users`(id,NAME,PASSWORD,email,birthday)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;zhansan&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;zs@sina.com&#x27;</span>,<span class="string">&#x27;1980-12-04&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;lisi@sina.com&#x27;</span>,<span class="string">&#x27;1981-12-04&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;wangwu@sina.com&#x27;</span>,<span class="string">&#x27;1979-12-04&#x27;</span>)</span><br><span class="line"><span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="jdbc测试"><a class="markdownIt-Anchor" href="#jdbc测试"></a> jdbc测试</h2>
<p>步骤：</p>
<ol>
<li>
<p>加载驱动</p>
</li>
<li>
<p>链接数据库DriverManager</p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210125171323187-1619184531781.png" alt="image-20210125171323187" loading="lazy"></p>
</li>
<li>
<p>获得执行sql的对象 statement</p>
</li>
<li>
<p>获得返回的结果集</p>
</li>
<li>
<p>施放链接</p>
</li>
</ol>
<p><strong>注意</strong>：报错可能原因：</p>
<ul>
<li><strong>&amp;没有替换为&amp;amp</strong></li>
<li><strong>useSSL没有放在最前</strong></li>
</ul>
<p>上述两点改掉一点就正常了，也不知道为什么</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//加载驱动</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">        <span class="comment">//用户信息和url</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8&quot;</span>;</span><br><span class="line">        String username=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">        String password=<span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="comment">//链接成功 数据库对象</span></span><br><span class="line">        Connection connection = DriverManager.getConnection(url,username,password);</span><br><span class="line">        <span class="comment">//执行SQL的对象</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        <span class="comment">//执行SQL的对象 去执行SQL 可能返回结果</span></span><br><span class="line">        String sql=<span class="string">&quot;select * from users&quot;</span>;</span><br><span class="line">        ResultSet resultSet =  statement.executeQuery(sql);<span class="comment">//返回的结果集</span></span><br><span class="line">        <span class="keyword">while</span> (resultSet.next())&#123; System.out.println(<span class="string">&quot;id=&quot;</span>+resultSet.getObject(<span class="string">&quot;id&quot;</span>)); System.out.println(<span class="string">&quot;name=&quot;</span>+resultSet.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//施放链接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="drivermanager"><a class="markdownIt-Anchor" href="#drivermanager"></a> DriverManager</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DriverManager.registerDriver(new com.mysql.jdbc.Driver());</span></span><br><span class="line">Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="url"><a class="markdownIt-Anchor" href="#url"></a> url</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8&quot;</span>;</span><br><span class="line"><span class="comment">//mysql--3306</span></span><br><span class="line"><span class="comment">// 协议://主机地址:端口号/数据库名?参数1&amp;参数2...</span></span><br><span class="line"><span class="comment">//oracle--1521</span></span><br><span class="line"><span class="comment">//jdbc:oracle:thin:@localhost:1521:sid</span></span><br></pre></td></tr></table></figure>
<h3 id="connection"><a class="markdownIt-Anchor" href="#connection"></a> Connection</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//链接成功 数据库对象 connection代表数据库</span></span><br><span class="line">Connection connection = DriverManager.getConnection(url,username,password);</span><br><span class="line">connection.rollback();</span><br><span class="line">connection.setAutoCommit();</span><br></pre></td></tr></table></figure>
<h3 id="statement向数据库发送sql语句"><a class="markdownIt-Anchor" href="#statement向数据库发送sql语句"></a> Statement：向数据库发送sql语句</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">statement.executeQuery();<span class="comment">//查询操作 返回结果集ResultSet</span></span><br><span class="line">statement.execute();<span class="comment">//可以执行任何sql，效率低一点</span></span><br><span class="line">statement.executeUpdate();<span class="comment">//更新 插入 删除都是用这个，返回受影响的行数</span></span><br></pre></td></tr></table></figure>
<h3 id="resultset只有查询是这个"><a class="markdownIt-Anchor" href="#resultset只有查询是这个"></a> ResultSet：只有查询是这个</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不知道类型就用Object</span></span><br><span class="line">resultSet.getObject();</span><br><span class="line"></span><br><span class="line"><span class="comment">//知道类型可以直接使用对应类型获取</span></span><br><span class="line">resultSet.getString();</span><br><span class="line">resultSet.getInt();</span><br><span class="line">resultSet.getFloat();</span><br><span class="line">resultSet.getDouble();</span><br><span class="line"></span><br><span class="line">resultSet.next();<span class="comment">//移动到下一行数据</span></span><br><span class="line">resultSet.beforeFirst();<span class="comment">//移动到最前</span></span><br><span class="line">resultSet.afterLast();<span class="comment">//移动到最后</span></span><br><span class="line">resultSet.previous();<span class="comment">//移动到前一行</span></span><br><span class="line">resultSet.absolute(i);<span class="comment">//移动到第i行指定行</span></span><br></pre></td></tr></table></figure>
<h3 id="代码实现工具类jdbcutils"><a class="markdownIt-Anchor" href="#代码实现工具类jdbcutils"></a> 代码实现&amp;工具类JdbcUtils</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//db.properties存储信息降低耦合</span></span><br><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line">username=root</span><br><span class="line">password=root</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String driver=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String url=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String username=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  String password=<span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream in = JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="keyword">assert</span> in != <span class="keyword">null</span>;</span><br><span class="line">            properties.load(in);</span><br><span class="line">            driver=properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            url=properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            username=properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            password=properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="comment">//驱动只用加载一次</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//施放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection connection, Statement statement, ResultSet resultSet)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            resultSet.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            statement.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>操作</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection=<span class="keyword">null</span>;</span><br><span class="line">        Statement statement=<span class="keyword">null</span>;</span><br><span class="line">        ResultSet resultSet=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection= JdbcUtils.getConnection();</span><br><span class="line">            statement=connection.createStatement();</span><br><span class="line">            String sql=<span class="string">&quot;insert into users(id,name,password,email,birthday)&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;values(100,&#x27;tzt&#x27;,&#x27;123456&#x27;,&#x27;123456@qq.com&#x27;,&#x27;1998-08-08&#x27;);&quot;</span>;</span><br><span class="line">            <span class="comment">//可以先在数据库里执行感受一下</span></span><br><span class="line">            <span class="keyword">int</span> i=statement.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入成功！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(connection,statement,resultSet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="九sql注入的问题"><a class="markdownIt-Anchor" href="#九sql注入的问题"></a> 九：SQL注入的问题</h1>
<p>SQL注入即是指web应用程序<strong>对用户输入数据的合法性没有判断或过滤不严</strong>，攻击者可以在web应用程序中事先定义好的查询语句的结尾上<strong>添加额外的SQL语句</strong>，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。</p>
<p><strong>sql存在漏洞，会被攻击导致数据泄露</strong><br>
比如登录业务中，需要查询账号密码所对应的用户（比对），可能用到如下sql语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;name&#x27;</span> <span class="keyword">and</span> password <span class="operator">=</span><span class="string">&#x27;password&#x27;</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>对应<span class="keyword">sql</span></span><br><span class="line">String <span class="keyword">sql</span><span class="operator">=</span>&quot;select&quot;</span><br></pre></td></tr></table></figure>
<p>其中name和password两个变量都是用户所传入的数据<br>
如果用户构造合适的输入，比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String name=<span class="string">&quot; &#x27; or &#x27;1=1&#x27; -- &quot;</span>;</span><br><span class="line">String password =<span class="string">&quot;12412r1&quot;</span>;<span class="comment">//password在此例中的值不重要</span></span><br></pre></td></tr></table></figure>
<p>那么如上sql语句拼接成了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> name<span class="operator">=</span><span class="string">&#x27;  &#x27;</span> <span class="keyword">or</span>  <span class="number">1</span><span class="operator">=</span><span class="number">1</span> </span><br><span class="line"><span class="comment">-- password =&#x27;12412r1&#x27;</span></span><br></pre></td></tr></table></figure>
<p>就可以匹配到表中所有用户的信息</p>
<h3 id="对策preparedstatement"><a class="markdownIt-Anchor" href="#对策preparedstatement"></a> 对策：PreparedStatement</h3>
<ul>
<li>可以<strong>防止SQL注入，而且效率更高</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> utils.JdbcUtils;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection=<span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="keyword">null</span>;</span><br><span class="line">        ResultSet resultSet=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection= JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">//？占位符  对？赋值</span></span><br><span class="line">            String sql=<span class="string">&quot;insert into users(id,name,password,email,birthday)&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;values(?,?,?,?,?);&quot;</span>;</span><br><span class="line">            <span class="comment">//和Statement的区别！！！！！！！！！</span></span><br><span class="line">            <span class="comment">//预编译sql先写sql不执行</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//手动给参数赋值</span></span><br><span class="line">            statement.setInt(<span class="number">1</span>,<span class="number">99</span>);</span><br><span class="line">            statement.setString(<span class="number">2</span>,<span class="string">&quot;hhh&quot;</span>);</span><br><span class="line">            statement.setString(<span class="number">3</span>,<span class="string">&quot;12312313&quot;</span>);</span><br><span class="line">            statement.setString(<span class="number">4</span>,<span class="string">&quot;15612318@qq.com&quot;</span>);</span><br><span class="line">            <span class="comment">//sql.Date 数据库的date</span></span><br><span class="line">            <span class="comment">//util.Date java的data new Date().getTime()获取时间对象</span></span><br><span class="line">            statement.setDate(<span class="number">5</span>,<span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> Date(<span class="number">1231</span>).getTime()));</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//传入参数之后执行</span></span><br><span class="line">            <span class="keyword">int</span> i=statement.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入成功！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(connection,statement,resultSet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    conn=JdbcUtils.getConnection();</span><br><span class="line">    String sql=<span class="string">&quot;delete from users where id=?&quot;</span>;</span><br><span class="line">    st=conn.prepareStatement(sql);</span><br><span class="line">    st.setInt(<span class="number">1</span>,<span class="number">4</span>);<span class="comment">//给第一个参数赋值</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> i=st.executeUpdate();</span><br><span class="line">    <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        sout(<span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="idea链接数据库"><a class="markdownIt-Anchor" href="#idea链接数据库"></a> IDEA链接数据库</h2>
<ol>
<li>点击窗口右侧database加号，选择MySQL<br>
<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160718151-1619184538569.png" alt="img" loading="lazy"></li>
<li>填写数据库链接信息<br>
测试链接时有可能提示要下包，按照提示自动下载即可<br>
<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160825975-1619184540036.png" alt="img" loading="lazy"></li>
<li>然后apply OK就完成了<br>
如图所示即为成功，不能有红线<br>
<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625160904322-1619184544505.png" alt="img" loading="lazy"></li>
</ol>
<p><strong>可能出现的错误：</strong></p>
<ul>
<li>Server returns invalid timezone. Go to ‘Advanced’ tab and set ‘serverTimezone’ property manually.</li>
<li>临时解决：在MySQL登录后输入：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> time_zone <span class="operator">=</span> <span class="string">&#x27;+8:00&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>这种方法在重启MySQL后失效，需要重新设置</p>
<ul>
<li>永久解决：在IDEA中，链接数据库的界面中高级设置，把时区设置为东八区<br>
<img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/20200625162500274-1619184546328.png" alt="img" loading="lazy"></li>
</ul>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210126093609776-1619184548500.png" alt="image-20210126093609776" loading="lazy"></p>
<p><img src="/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/image-20210126093703710-1619184550118.png" alt="image-20210126093703710" loading="lazy"></p>
<h2 id="jdbc操作事务"><a class="markdownIt-Anchor" href="#jdbc操作事务"></a> JDBC操作事务</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection=<span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="keyword">null</span>;</span><br><span class="line">        ResultSet resultSet=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            connection= JdbcUtils.getConnection();</span><br><span class="line">            connection.setAutoCommit(<span class="keyword">false</span>);<span class="comment">//关闭自动提交 开启事务</span></span><br><span class="line">            String sql1=<span class="string">&quot;update users set name=&#x27;hhh&#x27; where name=&#x27;hyx&#x27;;&quot;</span>;</span><br><span class="line">            String sql2=<span class="string">&quot;update users set name=&#x27;tzt&#x27; where name=&#x27;ttt&#x27;;&quot;</span>;</span><br><span class="line">            <span class="keyword">int</span> i=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">            statement=connection.prepareStatement(sql1);</span><br><span class="line">            statement.executeUpdate();</span><br><span class="line">            statement=connection.prepareStatement(sql2);</span><br><span class="line">            statement.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//业务完毕提交事务</span></span><br><span class="line">            connection.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="comment">//如果失败则回滚</span></span><br><span class="line">            connection.rollback();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(connection,statement,resultSet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数据库连接池"><a class="markdownIt-Anchor" href="#数据库连接池"></a> 数据库连接池</h2>
<p>数据库链接–执行完毕–施放十分消耗资源<br>
<strong>池化技术：准备一些预先的资源，过来就链接预先准备好的</strong></p>
<p>若常用连接数10个<br>
最小连接数：10个即可<br>
最大连接数：15 业务最高承载上限，超过此值则排队等待<br>
等待超时：等待时间超过一定值直接失败</p>
<p>编写连接池：实现<strong>DataSource接口</strong></p>
<h3 id="开源数据源实现"><a class="markdownIt-Anchor" href="#开源数据源实现"></a> 开源数据源实现</h3>
<p>DBCP<br>
C3P0<br>
Druid：阿里巴巴</p>
<p>使用了<strong>数据库连接池之后，我们在项目开发中就不需要编写链接数据库的代码</strong>了！</p>
<h4 id="dbcp"><a class="markdownIt-Anchor" href="#dbcp"></a> DBCP</h4>
<p>需要导入的包：</p>
<p>commons-dbcp-1.4<br>
commons-pool-1.6</p>
<ul>
<li>配置文件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useSSL=false&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line">username=root</span><br><span class="line">password=root</span><br></pre></td></tr></table></figure>
<ul>
<li>工具类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils_DBCP</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource=<span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream in = JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;dbcp.properties&quot;</span>);</span><br><span class="line">            Properties properties=<span class="keyword">new</span> Properties();</span><br><span class="line">            <span class="keyword">assert</span> in != <span class="keyword">null</span>;</span><br><span class="line">            properties.load(in);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//创建数据源 工厂模式→创建</span></span><br><span class="line">            dataSource=BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//施放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection connection, Statement statement, ResultSet resultSet)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">            resultSet.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (statement != <span class="keyword">null</span>) &#123;</span><br><span class="line">            statement.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>测试</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> utils.JdbcUtils_DBCP;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Connection connection=<span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement statement=<span class="keyword">null</span>;</span><br><span class="line">        ResultSet resultSet=<span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection= JdbcUtils_DBCP.getConnection();</span><br><span class="line">            <span class="comment">//？占位符</span></span><br><span class="line">            String sql=<span class="string">&quot;insert into users(id,name,password,email,birthday)&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;values(?,?,?,?,?);&quot;</span>;</span><br><span class="line">            <span class="comment">//和Statement的区别！！！！！！！！！</span></span><br><span class="line">            statement=connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//手动给参数赋值</span></span><br><span class="line">            statement.setInt(<span class="number">1</span>,<span class="number">49</span>);</span><br><span class="line">            statement.setString(<span class="number">2</span>,<span class="string">&quot;few&quot;</span>);</span><br><span class="line">            statement.setString(<span class="number">3</span>,<span class="string">&quot;12312313&quot;</span>);</span><br><span class="line">            statement.setString(<span class="number">4</span>,<span class="string">&quot;15612318@qq.com&quot;</span>);</span><br><span class="line">            statement.setDate(<span class="number">5</span>,<span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> Date(<span class="number">1231</span>).getTime()));</span><br><span class="line">            <span class="keyword">int</span> i=statement.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入成功！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils_DBCP.release(connection,statement,resultSet);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="打赏" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a href="/images/donate/zhifubao.jpg"><img loading="lazy" src="/images/donate/zhifubao.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/donate/weixin.png"><img loading="lazy" src="/images/donate/weixin.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a href="/images/donate/weixin.png"><img loading="lazy" src="/images/donate/weixin.png" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>AI Jiang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/" title="狂神说mysql">http://example.com/2021/04/02/%E7%8B%82%E7%A5%9E%E8%AF%B4mysql/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2021/04/11/%E5%89%8D%E7%AB%AFTypescript%E7%AC%94%E8%AE%B0/" rel="prev" title="前端Typescript笔记"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">前端Typescript笔记</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2021/04/01/%E7%8B%82%E7%A5%9E%E8%AF%B4Mybatis-Plus/" rel="next" title="狂神说Mybatis-Plus"><span class="post-nav-text">狂神说Mybatis-Plus</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>点击按钮跳转 GitHub Issues 评论。</span><br><span>若没有本文 Issue，您可以使用 Comment 模版新建。</span><br><a class="hty-button hty-button--raised" id="github-issues" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/issues?q=is:issue+狂神说mysql">GitHub Issues</a><a class="hty-button hty-button--raised" id="github-discussions" target="_blank" rel="noopener" href="https://github.com/YunYouJun/yunyoujun.github.io/discussions/new">GitHub Discussions</a></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> AI Jiang</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.4.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.5.1</span></div></footer><a class="hty-icon-button" id="goUp" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>